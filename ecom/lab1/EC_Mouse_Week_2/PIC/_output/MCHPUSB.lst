MP2COD 4.15, COFF to COD File Converter
Copyright (c) 2007 Microchip Technology Inc.
Listing File Generated: Wed Sep 30 12:26:57 2015


Address  Value    Disassembly              Source                                                                           File
-------  -------  -----------------------  -------------------------------------------------------------------------------  -----
                                           /* $Id: c018i.c,v 1.7 2006/11/15 22:53:12 moshtaa Exp $ */                       C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* Copyright (c)1999 Microchip Technology */                                     C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* MPLAB-C18 startup code, including initialized data */                         C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* external reference to __init() function */                                    C:\MCC18\src\traditional\startup\c018i.c
                                           extern void __init (void);                                                       C:\MCC18\src\traditional\startup\c018i.c
                                           /* external reference to the user's main routine */                              C:\MCC18\src\traditional\startup\c018i.c
                                           extern void main (void);                                                         C:\MCC18\src\traditional\startup\c018i.c
                                           /* prototype for the startup function */                                         C:\MCC18\src\traditional\startup\c018i.c
                                           void _entry (void);                                                              C:\MCC18\src\traditional\startup\c018i.c
                                           void _startup (void);                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* prototype for the initialized data setup */                                   C:\MCC18\src\traditional\startup\c018i.c
                                           void _do_cinit (void);                                                           C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           extern volatile near unsigned long short TBLPTR;                                 C:\MCC18\src\traditional\startup\c018i.c
                                           extern near unsigned FSR0;                                                       C:\MCC18\src\traditional\startup\c018i.c
                                           extern near char __FPFLAGS;                                                      C:\MCC18\src\traditional\startup\c018i.c
                                           #define RND 6                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           #pragma code _entry_scn=0x000000                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           void                                                                             C:\MCC18\src\traditional\startup\c018i.c
                                           _entry (void)                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
000000   ef52     GOTO      0x18a4         _asm goto _startup _endasm                                                       C:\MCC18\src\traditional\startup\c018i.c
000002   f00c                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
000004   0012     RETURN    0x0            }                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                           #pragma code _startup_scn                                                        C:\MCC18\src\traditional\startup\c018i.c
                                           void                                                                             C:\MCC18\src\traditional\startup\c018i.c
                                           _startup (void)                                                                  C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                             _asm                                                                           C:\MCC18\src\traditional\startup\c018i.c
                                               // Initialize the stack pointer                                              C:\MCC18\src\traditional\startup\c018i.c
0018a4   ee13     LFSR      0x1,0x300          lfsr 1, _stack                                                               C:\MCC18\src\traditional\startup\c018i.c
0018a6   f000                                                                                                               
0018a8   ee23     LFSR      0x2,0x300          lfsr 2, _stack                                                               C:\MCC18\src\traditional\startup\c018i.c
0018aa   f000                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
0018ac   6af8     CLRF      0xf8,0x0           clrf TBLPTRU, 0 // 1st silicon doesn't do this on POR                        C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
0018ae   9c0f     BCF       0xf,0x6,0x0        bcf __FPFLAGS,RND,0 // Initialize rounding flag for floating point libs      C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                               _endasm                                                                      C:\MCC18\src\traditional\startup\c018i.c
0018b0   ec86     CALL      0x170c,0x0         _do_cinit ();                                                                C:\MCC18\src\traditional\startup\c018i.c
0018b2   f00b                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           loop:                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             // If user defined __init is not found, the one in clib.lib will be used       C:\MCC18\src\traditional\startup\c018i.c
0018b4   ec6c     CALL      0x18d8,0x0       __init ();                                                                     C:\MCC18\src\traditional\startup\c018i.c
0018b6   f00c                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             // Call the user's main routine                                                C:\MCC18\src\traditional\startup\c018i.c
0018b8   ecea     CALL      0x17d4,0x0       main ();                                                                       C:\MCC18\src\traditional\startup\c018i.c
0018ba   f00b                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
0018bc   d7fb     BRA       0x18b4           goto loop;                                                                     C:\MCC18\src\traditional\startup\c018i.c
0018be   0012     RETURN    0x0            }                               /* end _startup() */                             C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* MPLAB-C18 initialized data memory support */                                  C:\MCC18\src\traditional\startup\c018i.c
                                           /* The linker will populate the _cinit table */                                  C:\MCC18\src\traditional\startup\c018i.c
                                           extern far rom struct                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                             unsigned short num_init;                                                       C:\MCC18\src\traditional\startup\c018i.c
                                             struct _init_entry                                                             C:\MCC18\src\traditional\startup\c018i.c
                                             {                                                                              C:\MCC18\src\traditional\startup\c018i.c
                                               unsigned long from;                                                          C:\MCC18\src\traditional\startup\c018i.c
                                               unsigned long to;                                                            C:\MCC18\src\traditional\startup\c018i.c
                                               unsigned long size;                                                          C:\MCC18\src\traditional\startup\c018i.c
                                             }                                                                              C:\MCC18\src\traditional\startup\c018i.c
                                             entries[];                                                                     C:\MCC18\src\traditional\startup\c018i.c
                                           }                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                           _cinit;                                                                          C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           #pragma code _cinit_scn                                                          C:\MCC18\src\traditional\startup\c018i.c
                                           void                                                                             C:\MCC18\src\traditional\startup\c018i.c
                                           _do_cinit (void)                                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                             /* we'll make the assumption in the following code that these statics          C:\MCC18\src\traditional\startup\c018i.c
                                              * will be allocated into the same bank.                                       C:\MCC18\src\traditional\startup\c018i.c
                                              */                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             static short long prom;                                                        C:\MCC18\src\traditional\startup\c018i.c
                                             static unsigned short curr_byte;                                               C:\MCC18\src\traditional\startup\c018i.c
                                             static unsigned short curr_entry;                                              C:\MCC18\src\traditional\startup\c018i.c
                                             static short long data_ptr;                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             // Initialized data...                                                         C:\MCC18\src\traditional\startup\c018i.c
00170c   0e2a     MOVLW     0x2a             TBLPTR = (short long)&_cinit;                                                  C:\MCC18\src\traditional\startup\c018i.c
00170e   6ef6     MOVWF     0xf6,0x0                                                                                        
001710   0e08     MOVLW     0x8                                                                                             
001712   6ef7     MOVWF     0xf7,0x0                                                                                        
001714   0e00     MOVLW     0x0                                                                                             
001716   6ef8     MOVWF     0xf8,0x0                                                                                        
                                             _asm                                                                           C:\MCC18\src\traditional\startup\c018i.c
001718   0100     MOVLB     0x0                movlb data_ptr                                                               C:\MCC18\src\traditional\startup\c018i.c
00171a   0009     TBLRDPOSTINC                 tblrdpostinc                                                                 C:\MCC18\src\traditional\startup\c018i.c
00171c   50f5     MOVF      0xf5,0x0,0x0       movf TABLAT, 0, 0                                                            C:\MCC18\src\traditional\startup\c018i.c
00171e   6fb4     MOVWF     0xb4,0x1           movwf curr_entry, 1                                                          C:\MCC18\src\traditional\startup\c018i.c
001720   0009     TBLRDPOSTINC                 tblrdpostinc                                                                 C:\MCC18\src\traditional\startup\c018i.c
001722   50f5     MOVF      0xf5,0x0,0x0       movf TABLAT, 0, 0                                                            C:\MCC18\src\traditional\startup\c018i.c
001724   6fb5     MOVWF     0xb5,0x1           movwf curr_entry+1, 1                                                        C:\MCC18\src\traditional\startup\c018i.c
                                             _endasm                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                               //while (curr_entry)                                                         C:\MCC18\src\traditional\startup\c018i.c
                                               //{                                                                          C:\MCC18\src\traditional\startup\c018i.c
                                               test:                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                               _asm                                                                         C:\MCC18\src\traditional\startup\c018i.c
001726   e103     BNZ       0x172e              bnz 3                                                                       C:\MCC18\src\traditional\startup\c018i.c
001728   67b4     TSTFSZ    0xb4,0x1           tstfsz curr_entry, 1                                                         C:\MCC18\src\traditional\startup\c018i.c
00172a   d001     BRA       0x172e             bra 1                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                               _endasm                                                                      C:\MCC18\src\traditional\startup\c018i.c
00172c   d03d     BRA       0x17a8             goto done;                                                                   C:\MCC18\src\traditional\startup\c018i.c
                                                 /* Count down so we only have to look up the data in _cinit                C:\MCC18\src\traditional\startup\c018i.c
                                                  * once.                                                                   C:\MCC18\src\traditional\startup\c018i.c
                                                  *                                                                         C:\MCC18\src\traditional\startup\c018i.c
                                                  * At this point we know that TBLPTR points to the top of the current      C:\MCC18\src\traditional\startup\c018i.c
                                                  * entry in _cinit, so we can just start reading the from, to, and         C:\MCC18\src\traditional\startup\c018i.c
                                                  * size values.                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                  */                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                                 _asm                                                                       C:\MCC18\src\traditional\startup\c018i.c
                                           	/* read the source address */                                                   C:\MCC18\src\traditional\startup\c018i.c
00172e   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001730   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
001732   6faf     MOVWF     0xaf,0x1       	movwf prom, 1                                                                   C:\MCC18\src\traditional\startup\c018i.c
001734   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001736   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
001738   6fb0     MOVWF     0xb0,0x1       	movwf prom+1, 1                                                                 C:\MCC18\src\traditional\startup\c018i.c
00173a   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
00173c   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
00173e   6fb1     MOVWF     0xb1,0x1       	movwf prom+2, 1                                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           	/* skip a byte since it's stored as a 32bit int */                              C:\MCC18\src\traditional\startup\c018i.c
001740   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                           	/* read the destination address directly into FSR0 */                           C:\MCC18\src\traditional\startup\c018i.c
001742   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001744   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
001746   6ee9     MOVWF     0xe9,0x0       	movwf FSR0L, 0                                                                  C:\MCC18\src\traditional\startup\c018i.c
001748   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
00174a   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
00174c   6eea     MOVWF     0xea,0x0       	movwf FSR0H, 0                                                                  C:\MCC18\src\traditional\startup\c018i.c
                                           	/* skip two bytes since it's stored as a 32bit int */                           C:\MCC18\src\traditional\startup\c018i.c
00174e   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001750   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                           	/* read the destination address directly into FSR0 */                           C:\MCC18\src\traditional\startup\c018i.c
001752   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001754   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
001756   6fb2     MOVWF     0xb2,0x1       	movwf curr_byte, 1                                                              C:\MCC18\src\traditional\startup\c018i.c
001758   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
00175a   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
00175c   6fb3     MOVWF     0xb3,0x1       	movwf curr_byte+1, 1                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           	/* skip two bytes since it's stored as a 32bit int */                           C:\MCC18\src\traditional\startup\c018i.c
00175e   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001760   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                 _endasm                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                 //prom = data_ptr->from;                                                   C:\MCC18\src\traditional\startup\c018i.c
                                                 //FSR0 = data_ptr->to;                                                     C:\MCC18\src\traditional\startup\c018i.c
                                                 //curr_byte = (unsigned short) data_ptr->size;                             C:\MCC18\src\traditional\startup\c018i.c
                                                 /* the table pointer now points to the next entry. Save it                 C:\MCC18\src\traditional\startup\c018i.c
                                                  * off since we'll be using the table pointer to do the copying            C:\MCC18\src\traditional\startup\c018i.c
                                                  * for the entry.                                                          C:\MCC18\src\traditional\startup\c018i.c
                                                  */                                                                        C:\MCC18\src\traditional\startup\c018i.c
001762   cff6     MOVFF     0xff6,0xb6           data_ptr = TBLPTR;                                                         C:\MCC18\src\traditional\startup\c018i.c
001764   f0b6                                                                                                               
001766   cff7     MOVFF     0xff7,0xb7                                                                                      
001768   f0b7                                                                                                               
00176a   cff8     MOVFF     0xff8,0xb8                                                                                      
00176c   f0b8                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                 /* now assign the source address to the table pointer */                   C:\MCC18\src\traditional\startup\c018i.c
00176e   c0af     MOVFF     0xaf,0xff6           TBLPTR = prom;                                                             C:\MCC18\src\traditional\startup\c018i.c
001770   fff6                                                                                                               
001772   c0b0     MOVFF     0xb0,0xff7                                                                                      
001774   fff7                                                                                                               
001776   c0b1     MOVFF     0xb1,0xff8                                                                                      
001778   fff8                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                 /* do the copy loop */                                                     C:\MCC18\src\traditional\startup\c018i.c
                                                 _asm                                                                       C:\MCC18\src\traditional\startup\c018i.c
                                                   // determine if we have any more bytes to copy                           C:\MCC18\src\traditional\startup\c018i.c
00177a   0100     MOVLB     0x0            	movlb curr_byte                                                                 C:\MCC18\src\traditional\startup\c018i.c
00177c   53b2     MOVF      0xb2,0x1,0x1   	movf curr_byte, 1, 1                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           copy_loop:                                                                       C:\MCC18\src\traditional\startup\c018i.c
00177e   e102     BNZ       0x1784         	bnz 2 // copy_one_byte                                                          C:\MCC18\src\traditional\startup\c018i.c
001780   53b3     MOVF      0xb3,0x1,0x1   	movf curr_byte + 1, 1, 1                                                        C:\MCC18\src\traditional\startup\c018i.c
001782   e007     BZ        0x1792         	bz 7 // done_copying                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           copy_one_byte:                                                                   C:\MCC18\src\traditional\startup\c018i.c
001784   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001786   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
001788   6eee     MOVWF     0xee,0x0       	movwf POSTINC0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           	// decrement byte counter                                                       C:\MCC18\src\traditional\startup\c018i.c
00178a   07b2     DECF      0xb2,0x1,0x1   	decf curr_byte, 1, 1                                                            C:\MCC18\src\traditional\startup\c018i.c
00178c   e2f8     BC        0x177e         	bc -8 // copy_loop                                                              C:\MCC18\src\traditional\startup\c018i.c
00178e   07b3     DECF      0xb3,0x1,0x1           decf curr_byte + 1, 1, 1                                                 C:\MCC18\src\traditional\startup\c018i.c
001790   d7f9     BRA       0x1784         	bra -7 // copy_one_byte                                                         C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           done_copying:                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                 _endasm                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                 /* restore the table pointer for the next entry */                         C:\MCC18\src\traditional\startup\c018i.c
001792   c0b6     MOVFF     0xb6,0xff6           TBLPTR = data_ptr;                                                         C:\MCC18\src\traditional\startup\c018i.c
001794   fff6                                                                                                               
001796   c0b7     MOVFF     0xb7,0xff7                                                                                      
001798   fff7                                                                                                               
00179a   c0b8     MOVFF     0xb8,0xff8                                                                                      
00179c   fff8                                                                                                               
                                                 /* next entry... */                                                        C:\MCC18\src\traditional\startup\c018i.c
00179e   0100     MOVLB     0x0                  curr_entry--;                                                              C:\MCC18\src\traditional\startup\c018i.c
0017a0   07b4     DECF      0xb4,0x1,0x1                                                                                    
0017a2   0e00     MOVLW     0x0                                                                                             
0017a4   5bb5     SUBWFB    0xb5,0x1,0x1                                                                                    
0017a6   d7bf     BRA       0x1726               goto test;                                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           done:                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           ;                                                                                C:\MCC18\src\traditional\startup\c018i.c
0017a8   0012     RETURN    0x0            }                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                           /*********************************************************************           C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            *********************************************************************           C:\EC_Mouse_Week_2\PIC\main.c
                                            * FileName:        main.c                                                       C:\EC_Mouse_Week_2\PIC\main.c
                                            * Dependencies:    See INCLUDES section below                                   C:\EC_Mouse_Week_2\PIC\main.c
                                            * Processor:       PIC18                                                        C:\EC_Mouse_Week_2\PIC\main.c
                                            * Compiler:        C18 2.30.01+                                                 C:\EC_Mouse_Week_2\PIC\main.c
                                            * Company:         Microchip Technology, Inc.                                   C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * Software License Agreement                                                    C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\EC_Mouse_Week_2\PIC\main.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\EC_Mouse_Week_2\PIC\main.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\EC_Mouse_Week_2\PIC\main.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\EC_Mouse_Week_2\PIC\main.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\EC_Mouse_Week_2\PIC\main.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\EC_Mouse_Week_2\PIC\main.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\EC_Mouse_Week_2\PIC\main.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\EC_Mouse_Week_2\PIC\main.c
                                            * civil liability for the breach of the terms and conditions of this            C:\EC_Mouse_Week_2\PIC\main.c
                                            * license.                                                                      C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\EC_Mouse_Week_2\PIC\main.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\EC_Mouse_Week_2\PIC\main.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\EC_Mouse_Week_2\PIC\main.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\EC_Mouse_Week_2\PIC\main.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\EC_Mouse_Week_2\PIC\main.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * Author               Date        Comment                                      C:\EC_Mouse_Week_2\PIC\main.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\EC_Mouse_Week_2\PIC\main.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\EC_Mouse_Week_2\PIC\main.c
                                            ********************************************************************/           C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
                                           /** I N C L U D E S **********************************************************/  C:\EC_Mouse_Week_2\PIC\main.c
                                           #include <p18cxxx.h>                                                             C:\EC_Mouse_Week_2\PIC\main.c
                                           #include "system\typedefs.h"                        // Required                  C:\EC_Mouse_Week_2\PIC\main.c
                                           #include "system\usb\usb.h"                         // Required                  C:\EC_Mouse_Week_2\PIC\main.c
                                           #include "io_cfg.h"                                 // Required                  C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
                                           #include "system\usb\usb_compile_time_validation.h" // Optional                  C:\EC_Mouse_Week_2\PIC\main.c
                                           #include "user\user.h"                              // Modifiable                C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
                                           #include <portb.h>									// For interruptions                                  C:\EC_Mouse_Week_2\PIC\main.c
                                           #include "def_ports.h"								// Port definitions                                C:\EC_Mouse_Week_2\PIC\main.c
                                           #include "def_interruptions.h"						// Interruption definitions                  C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
                                           void int_routine(void);                                                          C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
                                           /** V A R I A B L E S ********************************************************/  C:\EC_Mouse_Week_2\PIC\main.c
                                           #pragma udata                                                                    C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\EC_Mouse_Week_2\PIC\main.c
                                           static void InitializeSystem(void);                                              C:\EC_Mouse_Week_2\PIC\main.c
                                           void USBTasks(void);                                                             C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
                                           /** V E C T O R  R E M A P P I N G *******************************************/  C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
                                           extern void _startup (void);        // See c018i.c in your C18 compiler dir      C:\EC_Mouse_Week_2\PIC\main.c
                                           #pragma code _RESET_INTERRUPT_VECTOR = 0x000800                                  C:\EC_Mouse_Week_2\PIC\main.c
                                           void _reset (void)                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\main.c
000800   ef52     GOTO      0x18a4             _asm goto _startup _endasm                                                   C:\EC_Mouse_Week_2\PIC\main.c
000802   f00c                                                                                                               
000804   0012     RETURN    0x0            }                                                                                C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
                                           #pragma code                                                                     C:\EC_Mouse_Week_2\PIC\main.c
                                           #pragma code _LOW_INTERRUPT_VECTOR = 0x000818                                    C:\EC_Mouse_Week_2\PIC\main.c
                                           void _low_ISR (void)                                                             C:\EC_Mouse_Week_2\PIC\main.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\main.c
                                               ;                                                                            C:\EC_Mouse_Week_2\PIC\main.c
000818   0012     RETURN    0x0            }                                                                                C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
                                           // HIGH PRIORITY INTERRUPTS VECTOR                                               C:\EC_Mouse_Week_2\PIC\main.c
                                           #pragma code high_interrupt_vector = 0x808                                       C:\EC_Mouse_Week_2\PIC\main.c
                                           void high_interrupt (void)                                                       C:\EC_Mouse_Week_2\PIC\main.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\main.c
000808   efd5     GOTO      0x17aa         	_asm goto int_routine _endasm                                                   C:\EC_Mouse_Week_2\PIC\main.c
00080a   f00b                                                                                                               
00080c   0012     RETURN    0x0            }                                                                                C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
                                           #pragma code                                                                     C:\EC_Mouse_Week_2\PIC\main.c
                                           #pragma interrupt int_routine                                                    C:\EC_Mouse_Week_2\PIC\main.c
0017aa   cfda     MOVFF     0xfda,0xfe4    void int_routine (void)                                                          C:\EC_Mouse_Week_2\PIC\main.c
0017ac   ffe4                                                                                                               
0017ae   cfe2     MOVFF     0xfe2,0xfda                                                                                     
0017b0   ffda                                                                                                               
0017b2   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\main.c
                                           	// Lights LED D3 and D4, which is connected to bit 2 and 3 of  port D (PD2 and PD3),  C:\EC_Mouse_Week_2\PIC\main.c
                                           	// only when both switches 2 and 3, connected bits 4 and 5 of port B (PB4 and PB5) are pressed. C:\EC_Mouse_Week_2\PIC\main.c
0017b4   5081     MOVF      0x81,0x0,0x0   	if(!PB4 && !PB5 ) {                                                             C:\EC_Mouse_Week_2\PIC\main.c
0017b6   0b10     ANDLW     0x10                                                                                            
0017b8   e106     BNZ       0x17c6                                                                                          
0017ba   5081     MOVF      0x81,0x0,0x0                                                                                    
0017bc   0b20     ANDLW     0x20                                                                                            
0017be   e103     BNZ       0x17c6                                                                                          
0017c0   8483     BSF       0x83,0x2,0x0   		PD2 = 1;                                                                       C:\EC_Mouse_Week_2\PIC\main.c
0017c2   8683     BSF       0x83,0x3,0x0   		PD3 = 1;                                                                       C:\EC_Mouse_Week_2\PIC\main.c
                                           	}                                                                               C:\EC_Mouse_Week_2\PIC\main.c
0017c4   d002     BRA       0x17ca         	else {                                                                          C:\EC_Mouse_Week_2\PIC\main.c
0017c6   9483     BCF       0x83,0x2,0x0   		PD2 = 0;                                                                       C:\EC_Mouse_Week_2\PIC\main.c
0017c8   9683     BCF       0x83,0x3,0x0   		PD3 = 0;                                                                       C:\EC_Mouse_Week_2\PIC\main.c
                                           	}                                                                               C:\EC_Mouse_Week_2\PIC\main.c
0017ca   90f2     BCF       0xf2,0x0,0x0   	RBIF = 0; // Clear the interrupt flag for port B.                               C:\EC_Mouse_Week_2\PIC\main.c
0017cc   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\EC_Mouse_Week_2\PIC\main.c
0017ce   cfe5     MOVFF     0xfe5,0xfda                                                                                     
0017d0   ffda                                                                                                               
0017d2   0011     RETFIE    0x1                                                                                             
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
                                           #pragma code                                                                     C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\EC_Mouse_Week_2\PIC\main.c
                                           #pragma code                                                                     C:\EC_Mouse_Week_2\PIC\main.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\main.c
                                            * Function:        void main(void)                                              C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * Overview:        Main program entry point.                                    C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\main.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\main.c
                                           void main(void)                                                                  C:\EC_Mouse_Week_2\PIC\main.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\main.c
0017d4   d806     RCALL     0x17e2             InitializeSystem();                                                          C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
                                           	//DDRB = PINPUT;				// Port B is an input port                                  C:\EC_Mouse_Week_2\PIC\main.c
0017d6   8ef2     BSF       0xf2,0x7,0x0   	GINTEN  = ENABLE;			// General interrupt enable                                 C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
0017de   d7fc     BRA       0x17d8             while(1)                                                                     C:\EC_Mouse_Week_2\PIC\main.c
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\main.c
0017d8   d816     RCALL     0x1806                 USBTasks();         // USB Tasks                                         C:\EC_Mouse_Week_2\PIC\main.c
0017da   ec2d     CALL      0x85a,0x0              ProcessIO();        // See user\user.c & .h                              C:\EC_Mouse_Week_2\PIC\main.c
0017dc   f004                                                                                                               
                                               } //end while                                                                C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
0017e0   0012     RETURN    0x0            } //end main                                                                     C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\main.c
                                            * Function:        static void InitializeSystem(void)                           C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * Overview:        InitializeSystem is a centralize initialization routine.     C:\EC_Mouse_Week_2\PIC\main.c
                                            *                  All required USB initialization routines are called from     C:\EC_Mouse_Week_2\PIC\main.c
                                            *                  here.                                                        C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            *                  User application initialization routine should also be       C:\EC_Mouse_Week_2\PIC\main.c
                                            *                  called from here.                                            C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\main.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\main.c
                                           static void InitializeSystem(void)                                               C:\EC_Mouse_Week_2\PIC\main.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\main.c
0017e2   0e0f     MOVLW     0xf                ADCON1 |= 0x0F;                 // Default all pins to digital               C:\EC_Mouse_Week_2\PIC\main.c
0017e4   12c1     IORWF     0xc1,0x1,0x0                                                                                    
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
                                               #if defined(USE_USB_BUS_SENSE_IO)                                            C:\EC_Mouse_Week_2\PIC\main.c
0017e6   8292     BSF       0x92,0x1,0x0       tris_usb_bus_sense = INPUT_PIN; // See io_cfg.h                              C:\EC_Mouse_Week_2\PIC\main.c
                                               #endif                                                                       C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
                                               #if defined(USE_SELF_POWER_SENSE_IO)                                         C:\EC_Mouse_Week_2\PIC\main.c
0017e8   8492     BSF       0x92,0x2,0x0       tris_self_power = INPUT_PIN;                                                 C:\EC_Mouse_Week_2\PIC\main.c
                                               #endif                                                                       C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
0017ea   0e14     MOVLW     0x14               mInitializeUSBDriver();         // See usbdrv.h                              C:\EC_Mouse_Week_2\PIC\main.c
0017ec   6e6f     MOVWF     0x6f,0x0                                                                                        
0017ee   0100     MOVLB     0x0                                                                                             
0017f0   6bc1     CLRF      0xc1,0x1                                                                                        
0017f2   0100     MOVLB     0x0                                                                                             
0017f4   6bc2     CLRF      0xc2,0x1                                                                                        
0017f6   0100     MOVLB     0x0                                                                                             
0017f8   6bc3     CLRF      0xc3,0x1                                                                                        
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
0017fa   ec1c     CALL      0x838,0x0          UserInit();                     // See user.c & .h                           C:\EC_Mouse_Week_2\PIC\main.c
0017fc   f004                                                                                                               
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
0017fe   86f2     BSF       0xf2,0x3,0x0   	RBIE = 1; //int dos RB ligadas                                                  C:\EC_Mouse_Week_2\PIC\main.c
001800   80f2     BSF       0xf2,0x0,0x0   	RBIF = 1; //Clear RB flag                                                       C:\EC_Mouse_Week_2\PIC\main.c
001802   80f1     BSF       0xf1,0x0,0x0   	RBIP = 1; //int dos RB altas                                                    C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
001804   0012     RETURN    0x0            }//end InitializeSystem                                                          C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\main.c
                                            * Function:        void USBTasks(void)                                          C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * PreCondition:    InitializeSystem has been called.                            C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * Overview:        Service loop for USB tasks.                                  C:\EC_Mouse_Week_2\PIC\main.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\main.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\main.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\main.c
                                           void USBTasks(void)                                                              C:\EC_Mouse_Week_2\PIC\main.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\main.c
                                               /*                                                                           C:\EC_Mouse_Week_2\PIC\main.c
                                                * Servicing Hardware                                                        C:\EC_Mouse_Week_2\PIC\main.c
                                                */                                                                          C:\EC_Mouse_Week_2\PIC\main.c
001806   ecdf     CALL      0x13be,0x0         USBCheckBusStatus();                    // Must use polling method           C:\EC_Mouse_Week_2\PIC\main.c
001808   f009                                                                                                               
00180a   be6f     BTFSC     0x6f,0x7,0x0       if(UCFGbits.UTEYE!=1)                                                        C:\EC_Mouse_Week_2\PIC\main.c
00180c   d002     BRA       0x1812                                                                                          
00180e   ec00     CALL      0x1400,0x0             USBDriverService();                 // Interrupt or polling method       C:\EC_Mouse_Week_2\PIC\main.c
001810   f00a                                                                                                               
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
001812   0012     RETURN    0x0            }// end USBTasks                                                                 C:\EC_Mouse_Week_2\PIC\main.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\main.c
                                           /** EOF main.c ***************************************************************/  C:\EC_Mouse_Week_2\PIC\main.c
                                           /*********************************************************************           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *********************************************************************           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * FileName:        usbmmap.c                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * Dependencies:    See INCLUDES section below                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * Processor:       PIC18                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * Compiler:        C18 2.30.01+                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * Company:         Microchip Technology, Inc.                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * Software License Agreement                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * civil liability for the breach of the terms and conditions of this            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * license.                                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * Author               Date        Comment                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            ********************************************************************/           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * -usbmmap.c-                                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * USB Memory Map                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * This file is the USB memory manager; it serves as a compile-time memory       C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * allocator for the USB endpoints. It uses the compile time options passed      C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * from usbcfg.h to instantiate endpoints and endpoint buffer.                   C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * Each endpoint requires to have a set of Buffer Descriptor registers(BDT).     C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * A BDT is 4-byte long and has a specific RAM location for each endpoint.       C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * The BDT for endpoint 0 out is located at address 0x400 to 0x403.              C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * The BDT for endpoint 0 in is located at address 0x404 to 0x407.               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * The BDT for endpoint 1 out is located at address 0x408 to 0x40B.              C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * and so on... The above allocation assumes the Ping-Pong Buffer Mode 0 is      C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * used. These locations are already hard-wired in the silicon. The point        C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * of doing instantiation, i.e. volatile far BDT ep0Bo;, is to provide the       C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * C compiler a way to address each variable directly. This is very important    C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * because when a register can be accessed directly, it saves execution time     C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * and reduces program size.                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * Endpoints are defined using the endpoint number and the direction             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * of transfer. For simplicity, usbmmap.c only uses the endpoint number          C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * in the BDT register allocation scheme. This means if the usbcfg.h states      C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * that the MAX_EP_NUMBER is number 1, then four BDTs will be                    C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * instantiated: one each for endpoint0 in and endpoint0 out, which must         C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * always be instantiated for control transfer by default, and one each sets     C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * for endpoint1 in and endpoint1 out. The naming convention for instantiating   C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * BDT is                                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * ep<#>B<d>                                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * where # is the endpoint number, and d is the direction of                     C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * transfer, which could be either <i> or <o>.                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * The USB memory manager uses MAX_EP_NUMBER, as defined in usbcfg.h, to define  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * the endpoints to be instantiated. This represents the highest endpoint        C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * number to be allocated, not how many endpoints are used. Since the BDTs for   C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * endpoints have hardware-assigned addresses in Bank 4, setting this value too  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * high may lead to inefficient use of data RAM. For example, if an application  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * uses only endpoints EP0 and EP4, then the MAX_EP_NUMBER is 4, and not 2.      C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * The in-between endpoint BDTs in this example (EP1, EP2, and EP3) go unused,   C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * and the 24 bytes of memory associated with them are wasted. It does not make  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * much sense to skip endpoints, but the final decision lies with the user.      C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * The next step is to assign the instantiated BDTs to different                 C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * USB functions. The firmware framework fundamentally assumes that every USB    C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * function should know which endpoint it is using, i.e., the default control    C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * transfer should know that it is using endpoint 0 in and endpoint 0 out.       C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * A HID class can choose which endpoint it wants to use, but once chosen, it    C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * should always know the number of the endpoint.                                C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * The assignment of endpoints to USB functions is managed centrally             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * in usbcfg.h. This helps prevent the mistake of having more                    C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * than one USB function using the same endpoint. The "Endpoint Allocation"      C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * section in usbcfg.h provides examples for how to map USB endpoints to USB     C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * functions.                                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * Quite a few things can be mapped in that section. There is no                 C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * one correct way to do the mapping and the user has the choice to              C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * choose a method that is most suitable to the application.                     C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * Typically, however, a user will want to map the following for a given         C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * USB interface function:                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * 1. The USB interface ID                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * 2. The endpoint control registers (UEPn)                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * 3. The BDT registers (ep<#>B<d>)                                              C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * 4. The endpoint size                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * Example: Assume a USB device class "foo", which uses one out endpoint         C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *          of size 64-byte and one in endpoint of size 64-byte, then:           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * #define FOO_INTF_ID          0x00                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * #define FOO_UEP              UEP1                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * #define FOO_BD_OUT           ep1Bo                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * #define FOO_BD_IN            ep1Bi                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * #define FOO_EP_SIZE          64                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * The mapping above has chosen class "foo" to use endpoint 1.                   C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * The names are arbitrary and can be anything other than FOO_??????.            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * For abstraction, the code for class "foo" should use the abstract             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * definitions of FOO_BD_OUT,FOO_BD_IN, and not ep1Bo or ep1Bi.                  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * Note that the endpoint size defined in the usbcfg.h file is again             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * used in the usbmmap.c file. This shows that the relationship between          C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * the two files are tightly related.                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * The endpoint buffer for each USB function must be located in the              C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * dual-port RAM area and has to come after all the BDTs have been               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * instantiated. An example declaration is:                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * volatile far unsigned char[FOO_EP_SIZE] data;                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * The 'volatile' keyword tells the compiler not to perform any code             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * optimization on this variable because its content could be modified           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * by the hardware. The 'far' keyword tells the compiler that this variable      C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * is not located in the Access RAM area (0x000 - 0x05F).                        C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * For the variable to be globally accessible by other files, it should be       C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * declared in the header file usbmmap.h as an extern definition, such as        C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * extern volatile far unsigned char[FOO_EP_SIZE] data;                          C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * Conclusion:                                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * In a short summary, the dependencies between usbcfg and usbmmap can           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * be shown as:                                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * usbcfg[MAX_EP_NUMBER] -> usbmmap                                              C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * usbmmap[ep<#>B<d>] -> usbcfg                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * usbcfg[EP size] -> usbmmap                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * usbcfg[abstract ep definitions] -> usb9/hid/cdc/etc class code                C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * usbmmap[endpoint buffer variable] -> usb9/hid/cdc/etc class code              C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * Data mapping provides a means for direct addressing of BDT and endpoint       C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * buffer. This means less usage of pointers, which equates to a faster and      C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * smaller program code.                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           /** I N C L U D E S **********************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #include "system\typedefs.h"                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #include "system\usb\usb.h"                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           /** U S B  G L O B A L  V A R I A B L E S ************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #pragma udata                                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           byte usb_device_state;          // Device States: DETACHED, ATTACHED, ...        C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           USB_DEVICE_STATUS usb_stat;     // Global USB flags                              C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           byte usb_active_cfg;            // Value of current configuration                C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           byte usb_alt_intf[MAX_NUM_INT]; // Array to keep track of the current alternate  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                           // setting for each interface ID                 C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           /** U S B  F I X E D  L O C A T I O N  V A R I A B L E S *********************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #pragma udata usbram4=0x400     //See Linker Script,usb4:0x400-0x4FF(256-byte)   C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * Section A: Buffer Descriptor Table                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * - 0x400 - 0x4FF(max)                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * - MAX_EP_NUMBER is defined in autofiles\usbcfg.h                              C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * - BDT data type is defined in system\usb\usbmmap.h                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #if(0 <= MAX_EP_NUMBER)                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep0Bo;         //Endpoint #0 BD Out                             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep0Bi;         //Endpoint #0 BD In                              C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #endif                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #if(1 <= MAX_EP_NUMBER)                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep1Bo;         //Endpoint #1 BD Out                             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep1Bi;         //Endpoint #1 BD In                              C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #endif                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #if(2 <= MAX_EP_NUMBER)                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep2Bo;         //Endpoint #2 BD Out                             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep2Bi;         //Endpoint #2 BD In                              C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #endif                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #if(3 <= MAX_EP_NUMBER)                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep3Bo;         //Endpoint #3 BD Out                             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep3Bi;         //Endpoint #3 BD In                              C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #endif                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #if(4 <= MAX_EP_NUMBER)                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep4Bo;         //Endpoint #4 BD Out                             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep4Bi;         //Endpoint #4 BD In                              C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #endif                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #if(5 <= MAX_EP_NUMBER)                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep5Bo;         //Endpoint #5 BD Out                             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep5Bi;         //Endpoint #5 BD In                              C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #endif                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #if(6 <= MAX_EP_NUMBER)                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep6Bo;         //Endpoint #6 BD Out                             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep6Bi;         //Endpoint #6 BD In                              C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #endif                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #if(7 <= MAX_EP_NUMBER)                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep7Bo;         //Endpoint #7 BD Out                             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep7Bi;         //Endpoint #7 BD In                              C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #endif                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #if(8 <= MAX_EP_NUMBER)                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep8Bo;         //Endpoint #8 BD Out                             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep8Bi;         //Endpoint #8 BD In                              C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #endif                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #if(9 <= MAX_EP_NUMBER)                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep9Bo;         //Endpoint #9 BD Out                             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep9Bi;         //Endpoint #9 BD In                              C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #endif                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #if(10 <= MAX_EP_NUMBER)                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep10Bo;        //Endpoint #10 BD Out                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep10Bi;        //Endpoint #10 BD In                             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #endif                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #if(11 <= MAX_EP_NUMBER)                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep11Bo;        //Endpoint #11 BD Out                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep11Bi;        //Endpoint #11 BD In                             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #endif                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #if(12 <= MAX_EP_NUMBER)                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep12Bo;        //Endpoint #12 BD Out                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep12Bi;        //Endpoint #12 BD In                             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #endif                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #if(13 <= MAX_EP_NUMBER)                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep13Bo;        //Endpoint #13 BD Out                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep13Bi;        //Endpoint #13 BD In                             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #endif                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #if(14 <= MAX_EP_NUMBER)                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep14Bo;        //Endpoint #14 BD Out                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep14Bi;        //Endpoint #14 BD In                             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #endif                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #if(15 <= MAX_EP_NUMBER)                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep15Bo;        //Endpoint #15 BD Out                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep15Bi;        //Endpoint #15 BD In                             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #endif                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * Section B: EP0 Buffer Space                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            ******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * - Two buffer areas are defined:                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *   A. CTRL_TRF_SETUP                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *      - Size = EP0_BUFF_SIZE as defined in autofiles\usbcfg.h                  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *      - Detailed data structure allows direct adddressing of bits and bytes.   C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *   B. CTRL_TRF_DATA                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *      - Size = EP0_BUFF_SIZE as defined in autofiles\usbcfg.h                  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *      - Data structure allows direct adddressing of the first 8 bytes.         C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * - Both data types are defined in system\usb\usbdefs\usbdefs_ep0_buff.h        C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far CTRL_TRF_SETUP SetupPkt;                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far CTRL_TRF_DATA CtrlTrfData;                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            * Section C: Buffer                                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            ******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far byte usbgen_out[USBGEN_EP_SIZE];                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           volatile far byte usbgen_in[USBGEN_EP_SIZE];                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           #pragma udata                                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           /** EOF usbmmap.c ************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbmmap.c
                                           /*********************************************************************           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *********************************************************************           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * FileName:        usbdrv.c                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Dependencies:    See INCLUDES section below                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Processor:       PIC18                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Compiler:        C18 2.30.01+                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Company:         Microchip Technology, Inc.                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Software License Agreement                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * civil liability for the breach of the terms and conditions of this            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * license.                                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Author               Date        Comment                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            ********************************************************************/           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           /** I N C L U D E S **********************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           #include <p18cxxx.h>                                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           #include "system\typedefs.h"                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           #include "system\usb\usb.h"                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           #include "io_cfg.h"             // Required for USBCheckBusStatus()              C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           /** V A R I A B L E S ********************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           #pragma udata                                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBModuleEnable(void);                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBModuleDisable(void);                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBSuspend(void);                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBWakeFromSuspend(void);                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBProtocolResetHandler(void);                                              C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           void USB_SOF_Handler(void);                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBStallHandler(void);                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBErrorHandler(void);                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           #pragma code                                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBCheckBusStatus(void)                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine enables/disables the USB module by monitoring   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  the USB power signal.                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBCheckBusStatus(void)                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               /**************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * Bus Attachment & Detachment Detection                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * usb_bus_sense is an i/o pin defined in io_cfg.h                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                *************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               #define USB_BUS_ATTACHED    1                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               #define USB_BUS_DETACHED    0                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013be   a280     BTFSS     0x80,0x1,0x0       if(usb_bus_sense == USB_BUS_ATTACHED)       // Is USB bus attached?          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013c0   d003     BRA       0x13c8                                                                                          
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013c2   a66d     BTFSS     0x6d,0x3,0x0           if(UCONbits.USBEN == 0)                 // Is the module off?            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013c4   d80f     RCALL     0x13e4                     USBModuleEnable();                  // Is off, enable it             C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               }                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013c6   d002     BRA       0x13cc             else                                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013c8   b66d     BTFSC     0x6d,0x3,0x0           if(UCONbits.USBEN == 1)                 // Is the module on?             C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013ca   d813     RCALL     0x13f2                     USBModuleDisable();                 // Is on, disable it             C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               }//end if(usb_bus_sense...)                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * After enabling the USB module, it takes some time for the voltage         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * on the D+ or D- line to rise high enough to get out of the SE0 condition. C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * The USB Reset interrupt should not be unmasked until the SE0 condition is C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * cleared. This helps preventing the firmware from misinterpreting this     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * unique event as a USB bus reset from the USB host.                        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013cc   0100     MOVLB     0x0                if(usb_device_state == ATTACHED_STATE)                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013ce   05c1     DECF      0xc1,0x0,0x1                                                                                    
0013d0   e108     BNZ       0x13e2                                                                                          
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013d2   ba6d     BTFSC     0x6d,0x5,0x0           if(!UCONbits.SE0)                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013d4   d006     BRA       0x13e2                                                                                          
                                                   {                                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013d6   6a68     CLRF      0x68,0x0                   UIR = 0;                        // Clear all USB interrupts          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013d8   6a69     CLRF      0x69,0x0                   UIE = 0;                        // Mask all USB interrupts           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013da   8069     BSF       0x69,0x0,0x0               UIEbits.URSTIE = 1;             // Unmask RESET interrupt            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013dc   8869     BSF       0x69,0x4,0x0               UIEbits.IDLEIE = 1;             // Unmask IDLE interrupt             C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013de   0e02     MOVLW     0x2                        usb_device_state = POWERED_STATE;                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013e0   6fc1     MOVWF     0xc1,0x1                                                                                        
                                                   }//end if                           // else wait until SE0 is cleared    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               }//end if(usb_device_state == ATTACHED_STATE)                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013e2   0012     RETURN    0x0            }//end USBCheckBusStatus                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBModuleEnable(void)                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine enables the USB module.                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  An end designer should never have to call this routine       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  manually. This routine should only be called from            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  USBCheckBusStatus().                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            See USBCheckBusStatus() for more information.                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBModuleEnable(void)                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013e4   6a6d     CLRF      0x6d,0x0           UCON = 0;                                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013e6   6a69     CLRF      0x69,0x0           UIE = 0;                                // Mask all USB interrupts           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013e8   866d     BSF       0x6d,0x3,0x0       UCONbits.USBEN = 1;                     // Enable module & attach to bus     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013ea   0100     MOVLB     0x0                usb_device_state = ATTACHED_STATE;      // Defined in usbmmap.c & .h         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013ec   0e01     MOVLW     0x1                                                                                             
0013ee   6fc1     MOVWF     0xc1,0x1                                                                                        
0013f0   0012     RETURN    0x0            }//end USBModuleEnable                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBModuleDisable(void)                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine disables the USB module.                        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  An end designer should never have to call this routine       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  manually. This routine should only be called from            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  USBCheckBusStatus().                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            See USBCheckBusStatus() for more information.                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBModuleDisable(void)                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013f2   6a6d     CLRF      0x6d,0x0           UCON = 0;                               // Disable module & detach from bus  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013f4   6a69     CLRF      0x69,0x0           UIE = 0;                                // Mask all USB interrupts           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013f6   0100     MOVLB     0x0                usb_device_state = DETACHED_STATE;      // Defined in usbmmap.c & .h         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013f8   6bc1     CLRF      0xc1,0x1                                                                                        
0013fa   0012     RETURN    0x0            }//end USBModuleDisable                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBSoftDetach(void)                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    The device will have to be re-enumerated to function again.  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        USBSoftDetach electrically disconnects the device from       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  the bus. This is done by stop supplying Vusb voltage to      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  pull-up resistor. The pull-down resistors on the host        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  side will pull both differential signal lines low and        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  the host registers the event as a disconnect.                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  Since the USB cable is not physically disconnected, the      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  power supply through the cable can still be sensed by        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  the device. The next time USBCheckBusStatus() function       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  is called, it will reconnect the device back to the bus.     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBSoftDetach(void)                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013fc   eff9     GOTO      0x13f2             USBModuleDisable();                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0013fe   f009                                                                                                               
                                           }//end USBSoftDetach                                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBDriverService(void)                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine is the heart of this firmware. It manages       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  all USB interrupts.                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            Device state transitions through the following stages:       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  DETACHED -> ATTACHED -> POWERED -> DEFAULT ->                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  ADDRESS_PENDING -> ADDRESSED -> CONFIGURED -> READY          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBDriverService(void)                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if USB cable is not even attached.        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001400   0100     MOVLB     0x0                if(usb_device_state == DETACHED_STATE) return;                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001402   51c1     MOVF      0xc1,0x0,0x1                                                                                    
001404   e101     BNZ       0x1408                                                                                          
001406   d03a     BRA       0x147c                                                                                          
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * Task A: Service USB Activity Interrupt                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001408   5068     MOVF      0x68,0x0,0x0       if(UIRbits.ACTVIF && UIEbits.ACTVIE)    USBWakeFromSuspend();                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
00140a   0b04     ANDLW     0x4                                                                                             
00140c   e004     BZ        0x1416                                                                                          
00140e   5069     MOVF      0x69,0x0,0x0                                                                                    
001410   0b04     ANDLW     0x4                                                                                             
001412   e001     BZ        0x1416                                                                                          
001414   d838     RCALL     0x1486                                                                                          
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if the device is in suspend mode.         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001416   b26d     BTFSC     0x6d,0x1,0x0       if(UCONbits.SUSPND==1) return;                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001418   d031     BRA       0x147c                                                                                          
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * Task B: Service USB Bus Reset Interrupt.                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * When bus reset is received during suspend, ACTVIF will be set first,      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * once the UCONbits.SUSPND is clear, then the URSTIF bit will be asserted.  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * This is why URSTIF is checked after ACTVIF.                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
00141a   5068     MOVF      0x68,0x0,0x0       if(UIRbits.URSTIF && UIEbits.URSTIE)    USBProtocolResetHandler();           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
00141c   0b01     ANDLW     0x1                                                                                             
00141e   e004     BZ        0x1428                                                                                          
001420   5069     MOVF      0x69,0x0,0x0                                                                                    
001422   0b01     ANDLW     0x1                                                                                             
001424   e001     BZ        0x1428                                                                                          
001426   d850     RCALL     0x14c8                                                                                          
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * Task C: Service other USB interrupts                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001428   5068     MOVF      0x68,0x0,0x0       if(UIRbits.IDLEIF && UIEbits.IDLEIE)    USBSuspend();                        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
00142a   0b10     ANDLW     0x10                                                                                            
00142c   e004     BZ        0x1436                                                                                          
00142e   5069     MOVF      0x69,0x0,0x0                                                                                    
001430   0b10     ANDLW     0x10                                                                                            
001432   e001     BZ        0x1436                                                                                          
001434   d824     RCALL     0x147e                                                                                          
001436   5068     MOVF      0x68,0x0,0x0       if(UIRbits.SOFIF && UIEbits.SOFIE)      USB_SOF_Handler();                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001438   0b40     ANDLW     0x40                                                                                            
00143a   e004     BZ        0x1444                                                                                          
00143c   5069     MOVF      0x69,0x0,0x0                                                                                    
00143e   0b40     ANDLW     0x40                                                                                            
001440   e001     BZ        0x1444                                                                                          
001442   d837     RCALL     0x14b2                                                                                          
001444   5068     MOVF      0x68,0x0,0x0       if(UIRbits.STALLIF && UIEbits.STALLIE)  USBStallHandler();                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001446   0b20     ANDLW     0x20                                                                                            
001448   e004     BZ        0x1452                                                                                          
00144a   5069     MOVF      0x69,0x0,0x0                                                                                    
00144c   0b20     ANDLW     0x20                                                                                            
00144e   e001     BZ        0x1452                                                                                          
001450   d832     RCALL     0x14b6                                                                                          
001452   5068     MOVF      0x68,0x0,0x0       if(UIRbits.UERRIF && UIEbits.UERRIE)    USBErrorHandler();                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001454   0b02     ANDLW     0x2                                                                                             
001456   e004     BZ        0x1460                                                                                          
001458   5069     MOVF      0x69,0x0,0x0                                                                                    
00145a   0b02     ANDLW     0x2                                                                                             
00145c   e001     BZ        0x1460                                                                                          
00145e   d832     RCALL     0x14c4                                                                                          
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if the host has not sent a bus reset.     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * Once bus reset is received, the device transitions into the DEFAULT       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * state and is ready for communication.                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001460   0e03     MOVLW     0x3                if(usb_device_state < DEFAULT_STATE) return;                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001462   0100     MOVLB     0x0                                                                                             
001464   5dc1     SUBWF     0xc1,0x0,0x1                                                                                    
001466   e201     BC        0x146a                                                                                          
001468   d009     BRA       0x147c                                                                                          
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * Task D: Servicing USB Transaction Complete Interrupt                      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
00146a   5068     MOVF      0x68,0x0,0x0       if(UIRbits.TRNIF && UIEbits.TRNIE)                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
00146c   0b08     ANDLW     0x8                                                                                             
00146e   e006     BZ        0x147c                                                                                          
001470   5069     MOVF      0x69,0x0,0x0                                                                                    
001472   0b08     ANDLW     0x8                                                                                             
001474   e003     BZ        0x147c                                                                                          
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                   /*                                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                    * USBCtrlEPService only services transactions over EP0.                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                    * It ignores all other EP transactions.                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                    */                                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001476   ecb7     CALL      0xf6e,0x0              USBCtrlEPService();                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001478   f007                                                                                                               
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                   /*                                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                    * Other EP can be serviced later by responsible device class firmware.  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                    * Each device driver knows when an OUT or IN transaction is ready by    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                    * checking the buffer ownership bit.                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                    * An OUT EP should always be owned by SIE until the data is ready.      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                    * An IN EP should always be owned by CPU until the data is ready.       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                    *                                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                    * Because of this logic, it is not necessary to save the USTAT value    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                    * of non-EP0 transactions.                                              C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                    */                                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
00147a   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               }//end if(UIRbits.TRNIF && UIEbits.TRNIE)                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
00147c   0012     RETURN    0x0            }//end USBDriverService                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBSuspend(void)                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:                                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBSuspend(void)                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * NOTE: Do not clear UIRbits.ACTVIF here!                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * Reason:                                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * ACTVIF is only generated once an IDLEIF has been generated.               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * This is a 1:1 ratio interrupt generation.                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * For every IDLEIF, there will be only one ACTVIF regardless of             C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * the number of subsequent bus transitions.                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                *                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * If the ACTIF is cleared here, a problem could occur when:                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * [       IDLE       ][bus activity ->                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * <--- 3 ms ----->     ^                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                *                ^     ACTVIF=1                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                *                IDLEIF=1                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                *  #           #           #           #   (#=Program polling flags)        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                *                          ^                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                *                          This polling loop will see both                  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                *                          IDLEIF=1 and ACTVIF=1.                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                *                          However, the program services IDLEIF first       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                *                          because ACTIVIE=0.                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                *                          If this routine clears the only ACTIVIF,         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                *                          then it can never get out of the suspend         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                *                          mode.                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
00147e   8469     BSF       0x69,0x2,0x0       UIEbits.ACTVIE = 1;                     // Enable bus activity interrupt     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001480   9868     BCF       0x68,0x4,0x0       UIRbits.IDLEIF = 0;                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001482   826d     BSF       0x6d,0x1,0x0       UCONbits.SUSPND = 1;                    // Put USB module in power conserve  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                       // mode, SIE clock inactive          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * At this point the PIC can go into sleep,idle, or                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * switch to a slower clock, etc.                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               /* Modifiable Section */                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               /* End Modifiable Section */                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001484   0012     RETURN    0x0            }//end USBSuspend                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBWakeFromSuspend(void)                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:                                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBWakeFromSuspend(void)                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * If using clock switching, this is the place to restore the                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * original clock frequency.                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001486   926d     BCF       0x6d,0x1,0x0       UCONbits.SUSPND = 0;                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001488   9469     BCF       0x69,0x2,0x0       UIEbits.ACTVIE = 0;                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
00148a   9468     BCF       0x68,0x2,0x0       UIRbits.ACTVIF = 0;                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
00148c   0012     RETURN    0x0            }//end USBWakeFromSuspend                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBRemoteWakeup(void)                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This function should be called by user when the device       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  is waken up by an external stimulus other than ACTIVIF.      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  Please read the note below to understand the limitations.    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            The modifiable section in this routine should be changed     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  to meet the application needs. Current implementation        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  temporary blocks other functions from executing for a        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  period of 1-13 ms depending on the core frequency.           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  According to USB 2.0 specification section 7.1.7.7,          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  "The remote wakeup device must hold the resume signaling     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  for at lest 1 ms but for no more than 15 ms."                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  The idea here is to use a delay counter loop, using a        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  common value that would work over a wide range of core       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  frequencies.                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  That value selected is 1800. See table below:                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  Core Freq(MHz)      MIP         RESUME Signal Period (ms)    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                      48              12          1.05                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                       4              1           12.6                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  * These timing could be incorrect when using code            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                    optimization or extended instruction mode,                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                    or when having other interrupts enabled.                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                    Make sure to verify using the MPLAB SIM's Stopwatch        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBRemoteWakeup(void)                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               static word delay_count;                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
00148e   0100     MOVLB     0x0                if(usb_stat.RemoteWakeup == 1)          // Check if RemoteWakeup function    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001490   a1c2     BTFSS     0xc2,0x0,0x1                                                                                    
001492   d00e     BRA       0x14b0                                                                                          
                                               {                                       // has been enabled by the host.     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001494   dff8     RCALL     0x1486                 USBWakeFromSuspend();               // Unsuspend USB modue               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001496   846d     BSF       0x6d,0x2,0x0           UCONbits.RESUME = 1;                // Start RESUME signaling            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                   /* Modifiable Section */                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001498   0100     MOVLB     0x0                    delay_count = 1800U;                // Set RESUME line for 1-13 ms       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
00149a   0e08     MOVLW     0x8                                                                                             
00149c   6fc5     MOVWF     0xc5,0x1                                                                                        
00149e   0e07     MOVLW     0x7                                                                                             
0014a0   6fc6     MOVWF     0xc6,0x1                                                                                        
                                                   do                                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                   {                                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014a2   07c5     DECF      0xc5,0x1,0x1               delay_count--;                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014a4   0e00     MOVLW     0x0                                                                                             
0014a6   5bc6     SUBWFB    0xc6,0x1,0x1                                                                                    
0014a8   51c5     MOVF      0xc5,0x0,0x1           }while(delay_count);                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014aa   11c6     IORWF     0xc6,0x0,0x1                                                                                    
0014ac   e1fa     BNZ       0x14a2                                                                                          
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                   /* End Modifiable Section */                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014ae   946d     BCF       0x6d,0x2,0x0           UCONbits.RESUME = 0;                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               }//endif                                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014b0   0012     RETURN    0x0            }//end USBRemoteWakeup                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USB_SOF_Handler(void)                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The USB host sends out a SOF packet to full-speed devices    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  every 1 ms. This interrupt may be useful for isochronous     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  pipes. End designers should implement callback routine       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  as necessary.                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           void USB_SOF_Handler(void)                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               /* Callback routine here */                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014b2   9c68     BCF       0x68,0x6,0x0       UIRbits.SOFIF = 0;                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014b4   0012     RETURN    0x0            }//end USB_SOF_Handler                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBStallHandler(void)                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    A STALL packet is sent to the host by the SIE.               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The STALLIF is set anytime the SIE sends out a STALL         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  packet regardless of which endpoint causes it.               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  A Setup transaction overrides the STALL function. A stalled  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  endpoint stops stalling once it receives a setup packet.     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  In this case, the SIE will accepts the Setup packet and      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  set the TRNIF flag to notify the firmware. STALL function    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  for that particular endpoint pipe will be automatically      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  disabled (direction specific).                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  There are a few reasons for an endpoint to be stalled.       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  1. When a non-supported USB request is received.             C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                     Example: GET_DESCRIPTOR(DEVICE_QUALIFIER)                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  2. When an endpoint is currently halted.                     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  3. When the device class specifies that an endpoint must     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                     stall in response to a specific event.                    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                     Example: Mass Storage Device Class                        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                              If the CBW is not valid, the device shall        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                              STALL the Bulk-In pipe.                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                              See USB Mass Storage Class Bulk-only Transport   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                              Specification for more details.                  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            UEPn.EPSTALL can be scanned to see which endpoint causes     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  the stall event.                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  If                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBStallHandler(void)                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * Does not really have to do anything here,                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * even for the control endpoint.                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * All BDs of Endpoint 0 are owned by SIE right now,                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * but once a Setup Transaction is received, the ownership                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * for EP0_OUT will be returned to CPU.                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * When the Setup Transaction is serviced, the ownership                     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * for EP0_IN will then be forced back to CPU by firmware.                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                *                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                * NOTE: Above description is not quite true at this point.                  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                *       It seems the SIE never returns the UOWN bit to CPU,                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                *       and a TRNIF is never generated upon successful                      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                *       reception of a SETUP transaction.                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                *       Firmware work-around is implemented below.                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014b6   a070     BTFSS     0x70,0x0,0x0       if(UEP0bits.EPSTALL == 1)                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014b8   d003     BRA       0x14c0                                                                                          
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014ba   ec02     CALL      0x1204,0x0             USBPrepareForNextSetupTrf();        // Firmware Work-Around              C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014bc   f009                                                                                                               
0014be   9070     BCF       0x70,0x0,0x0           UEP0bits.EPSTALL = 0;                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                               }                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014c0   9a68     BCF       0x68,0x5,0x0       UIRbits.STALLIF = 0;                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014c2   0012     RETURN    0x0            }//end USBStallHandler                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBErrorHandler(void)                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The purpose of this interrupt is mainly for debugging        C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  during development. Check UEIR to see which error causes     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  the interrupt.                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBErrorHandler(void)                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014c4   9268     BCF       0x68,0x1,0x0       UIRbits.UERRIF = 0;                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014c6   0012     RETURN    0x0            }//end USBErrorHandler                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBProtocolResetHandler(void)                           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    A USB bus reset is received from the host.                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    Currently, this routine flushes any pending USB              C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  transactions. It empties out the USTAT FIFO. This action     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  might not be desirable in some applications.                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        Once a USB bus reset is received from the host, this         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  routine should be called. It resets the device address to    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  zero, disables all non-EP0 endpoints, initializes EP0 to     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  be ready for default communication, clears all USB           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  interrupt flags, unmasks applicable USB interrupts, and      C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  reinitializes internal state-machine variables.              C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBProtocolResetHandler(void)                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014c8   6a6a     CLRF      0x6a,0x0           UEIR = 0;                       // Clear all USB error flags                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014ca   6a68     CLRF      0x68,0x0           UIR = 0;                        // Clears all USB interrupts                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014cc   0e9f     MOVLW     0x9f               UEIE = 0b10011111;              // Unmask all USB error interrupts           C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014ce   6e6b     MOVWF     0x6b,0x0                                                                                        
0014d0   0e7b     MOVLW     0x7b               UIE = 0b01111011;               // Enable all interrupts except ACTVIE       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014d2   6e69     MOVWF     0x69,0x0                                                                                        
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014d4   6a6e     CLRF      0x6e,0x0           UADDR = 0x00;                   // Reset to default address                  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014d6   0e0f     MOVLW     0xf                mDisableEP1to15();              // Reset all non-EP0 UEPn registers          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014d8   6ee6     MOVWF     0xe6,0x0                                                                                        
0014da   0e71     MOVLW     0x71                                                                                            
0014dc   6ee6     MOVWF     0xe6,0x0                                                                                        
0014de   0e0f     MOVLW     0xf                                                                                             
0014e0   6ee6     MOVWF     0xe6,0x0                                                                                        
0014e2   d814     RCALL     0x150c                                                                                          
0014e4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014e6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014e8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014ea   0e16     MOVLW     0x16               UEP0 = EP_CTRL|HSHK_EN;         // Init EP0 as a Ctrl EP, see usbdrv.h       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014ec   6e70     MOVWF     0x70,0x0                                                                                        
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014ee   a668     BTFSS     0x68,0x3,0x0       while(UIRbits.TRNIF == 1)       // Flush any pending transactions            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014f0   d002     BRA       0x14f6                                                                                          
0014f4   d7fc     BRA       0x14ee                                                                                          
0014f2   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014f6   986d     BCF       0x6d,0x4,0x0       UCONbits.PKTDIS = 0;            // Make sure packet processing is enabled    C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014f8   ec02     CALL      0x1204,0x0         USBPrepareForNextSetupTrf();    // Declared in usbctrltrf.c                  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014fa   f009                                                                                                               
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014fc   0100     MOVLB     0x0                usb_stat.RemoteWakeup = 0;      // Default status flag to disable            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
0014fe   91c2     BCF       0xc2,0x0,0x1                                                                                    
001500   0100     MOVLB     0x0                usb_active_cfg = 0;             // Clear active configuration                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001502   6bc3     CLRF      0xc3,0x1                                                                                        
001504   0100     MOVLB     0x0                usb_device_state = DEFAULT_STATE;                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001506   0e03     MOVLW     0x3                                                                                             
001508   6fc1     MOVWF     0xc1,0x1                                                                                        
00150a   0012     RETURN    0x0            }//end USBProtocolResetHandler                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           /* Auxiliary Function */                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
00150c   cfd9     MOVFF     0xfd9,0xfe6    void ClearArray(byte* startAdr,byte count)                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
00150e   ffe6                                                                                                               
001510   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001512   ffd9                                                                                                               
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001514   0efd     MOVLW     0xfd               *startAdr;                                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001516   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
001518   ffe9                                                                                                               
00151a   0efe     MOVLW     0xfe                                                                                            
00151c   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00151e   ffea                                                                                                               
001520   0efc     MOVLW     0xfc               while(count)                                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001522   50db     MOVF      0xdb,0x0,0x0                                                                                    
001524   e004     BZ        0x152e                                                                                          
00152c   d7f9     BRA       0x1520                                                                                          
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                   _asm                                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001526   6aee     CLRF      0xee,0x0               clrf POSTINC0,0                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                                   _endasm                                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001528   0efc     MOVLW     0xfc                   count--;                                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
00152a   06db     DECF      0xdb,0x1,0x0                                                                                    
                                               }//end while                                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
00152e   52e5     MOVF      0xe5,0x1,0x0   }//end ClearArray                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
001530   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001532   ffd9                                                                                                               
001534   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           /** EOF usbdrv.c *************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbdrv\usbdrv.c
                                           /*********************************************************************           C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *********************************************************************           C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * FileName:        usb9.c                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Dependencies:    See INCLUDES section below                                   C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Processor:       PIC18                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Compiler:        C18 2.30.01+                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Company:         Microchip Technology, Inc.                                   C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Software License Agreement                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * civil liability for the breach of the terms and conditions of this            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * license.                                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Author               Date        Comment                                      C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            ********************************************************************/           C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           /** I N C L U D E S **********************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           #include <p18cxxx.h>                                                             C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           #include "system\typedefs.h"                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           #include "system\usb\usb.h"                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           #include "io_cfg.h"                     // Required for self_power status        C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           /** V A R I A B L E S ********************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           #pragma udata                                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           void USBStdGetDscHandler(void);                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           void USBStdSetCfgHandler(void);                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           void USBStdGetStatusHandler(void);                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           void USBStdFeatureReqHandler(void);                                              C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           #pragma code                                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Function:        void USBCheckStdRequest(void)                                C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Overview:        This routine checks the setup data packet to see if it       C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                  knows how to handle it                                       C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           void USBCheckStdRequest(void)                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000c62   0104     MOVLB     0x4                if(SetupPkt.RequestType != STANDARD) return;                                 C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000c64   5118     MOVF      0x18,0x0,0x1                                                                                    
000c66   0b60     ANDLW     0x60                                                                                            
000c68   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000c6a   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000c6c   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000c6e   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000c70   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000c72   0900     IORLW     0x0                                                                                             
000c74   e001     BZ        0xc78                                                                                           
000c76   d055     BRA       0xd22                                                                                           
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000c78   5119     MOVF      0x19,0x0,0x1       switch(SetupPkt.bRequest)                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000c7a   0a07     XORLW     0x7                                                                                             
000c7c   e051     BZ        0xd20                                                                                           
000c7e   0a0b     XORLW     0xb                                                                                             
000c80   e04f     BZ        0xd20                                                                                           
000c82   0a07     XORLW     0x7                                                                                             
000c84   e040     BZ        0xd06                                                                                           
000c86   0a01     XORLW     0x1                                                                                             
000c88   e02c     BZ        0xce2                                                                                           
000c8a   0a0b     XORLW     0xb                                                                                             
000c8c   e028     BZ        0xcde                                                                                           
000c8e   0a02     XORLW     0x2                                                                                             
000c90   e026     BZ        0xcde                                                                                           
000c92   0a03     XORLW     0x3                                                                                             
000c94   e022     BZ        0xcda                                                                                           
000c96   0a08     XORLW     0x8                                                                                             
000c98   e012     BZ        0xcbe                                                                                           
000c9a   0a01     XORLW     0x1                                                                                             
000c9c   e00e     BZ        0xcba                                                                                           
000c9e   0a0f     XORLW     0xf                                                                                             
000ca0   e00a     BZ        0xcb6                                                                                           
000ca2   0a03     XORLW     0x3                                                                                             
000ca4   e001     BZ        0xca8                                                                                           
000ca6   d03c     BRA       0xd20                                                                                           
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                   case SET_ADR:                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000ca8   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000caa   0e01     MOVLW     0x1                                                                                             
000cac   6fba     MOVWF     0xba,0x1                                                                                        
000cae   0100     MOVLB     0x0                        usb_device_state = ADR_PENDING_STATE;       // Update state only     C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000cb0   0e04     MOVLW     0x4                                                                                             
000cb2   6fc1     MOVWF     0xc1,0x1                                                                                        
                                                       /* See USBCtrlTrfInHandler() in usbctrltrf.c for the next step */    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000cb4   d036     BRA       0xd22                      break;                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                   case GET_DSC:                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000cb6   d836     RCALL     0xd24                      USBStdGetDscHandler();                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000cb8   d034     BRA       0xd22                      break;                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                   case SET_CFG:                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000cba   d890     RCALL     0xddc                      USBStdSetCfgHandler();                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000cbc   d032     BRA       0xd22                      break;                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                   case GET_CFG:                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000cbe   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000cc0   0e01     MOVLW     0x1                                                                                             
000cc2   6fba     MOVWF     0xba,0x1                                                                                        
000cc4   0100     MOVLB     0x0                        pSrc.bRam = (byte*)&usb_active_cfg;         // Set Source            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000cc6   0ec3     MOVLW     0xc3                                                                                            
000cc8   6fbb     MOVWF     0xbb,0x1                                                                                        
000cca   0e00     MOVLW     0x0                                                                                             
000ccc   6fbc     MOVWF     0xbc,0x1                                                                                        
000cce   0100     MOVLB     0x0                        usb_stat.ctrl_trf_mem = _RAM;               // Set memory type       C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000cd0   93c2     BCF       0xc2,0x1,0x1                                                                                    
000cd2   0100     MOVLB     0x0                        LSB(wCount) = 1;                            // Set data count        C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000cd4   0e01     MOVLW     0x1                                                                                             
000cd6   6fbf     MOVWF     0xbf,0x1                                                                                        
000cd8   d024     BRA       0xd22                      break;                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                   case GET_STATUS:                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000cda   d8a8     RCALL     0xe2c                      USBStdGetStatusHandler();                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000cdc   d022     BRA       0xd22                      break;                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                   case CLR_FEATURE:                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                   case SET_FEATURE:                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000cde   d8f6     RCALL     0xecc                      USBStdFeatureReqHandler();                                           C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000ce0   d020     BRA       0xd22                      break;                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                   case GET_INTF:                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000ce2   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000ce4   0e01     MOVLW     0x1                                                                                             
000ce6   6fba     MOVWF     0xba,0x1                                                                                        
000ce8   0104     MOVLB     0x4                        pSrc.bRam = (byte*)&usb_alt_intf+SetupPkt.bIntfID;  // Set source    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000cea   511c     MOVF      0x1c,0x0,0x1                                                                                    
000cec   0100     MOVLB     0x0                                                                                             
000cee   6fbb     MOVWF     0xbb,0x1                                                                                        
000cf0   6bbc     CLRF      0xbc,0x1                                                                                        
000cf2   0ec4     MOVLW     0xc4                                                                                            
000cf4   27bb     ADDWF     0xbb,0x1,0x1                                                                                    
000cf6   0e00     MOVLW     0x0                                                                                             
000cf8   23bc     ADDWFC    0xbc,0x1,0x1                                                                                    
000cfa   0100     MOVLB     0x0                        usb_stat.ctrl_trf_mem = _RAM;               // Set memory type       C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000cfc   93c2     BCF       0xc2,0x1,0x1                                                                                    
000cfe   0100     MOVLB     0x0                        LSB(wCount) = 1;                            // Set data count        C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000d00   0e01     MOVLW     0x1                                                                                             
000d02   6fbf     MOVWF     0xbf,0x1                                                                                        
000d04   d00e     BRA       0xd22                      break;                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                   case SET_INTF:                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000d06   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000d08   0e01     MOVLW     0x1                                                                                             
000d0a   6fba     MOVWF     0xba,0x1                                                                                        
000d0c   0104     MOVLB     0x4                        usb_alt_intf[SetupPkt.bIntfID] = SetupPkt.bAltID;                    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000d0e   511c     MOVF      0x1c,0x0,0x1                                                                                    
000d10   6aea     CLRF      0xea,0x0                                                                                        
000d12   0fc4     ADDLW     0xc4                                                                                            
000d14   6ee9     MOVWF     0xe9,0x0                                                                                        
000d16   0e00     MOVLW     0x0                                                                                             
000d18   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000d1a   c41a     MOVFF     0x41a,0xfef                                                                                     
000d1c   ffef                                                                                                               
000d1e   d001     BRA       0xd22                      break;                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                   case SET_DSC:                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                   case SYNCH_FRAME:                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                   default:                                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000d20   d000     BRA       0xd22                      break;                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                               }//end switch                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000d22   0012     RETURN    0x0            }//end USBCheckStdRequest                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Function:        void USBStdGetDscHandler(void)                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard GET_DESCRIPTOR request.    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                  It utilizes tables dynamically looks up descriptor size.     C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                  This routine should never have to be modified if the tables  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                  in usbdsc.c are declared correctly.                          C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           void USBStdGetDscHandler(void)                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000d24   0e80     MOVLW     0x80               if(SetupPkt.bmRequestType == 0x80)                                           C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000d26   0104     MOVLB     0x4                                                                                             
000d28   5d18     SUBWF     0x18,0x0,0x1                                                                                    
000d2a   e157     BNZ       0xdda                                                                                           
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000d2c   511b     MOVF      0x1b,0x0,0x1           switch(SetupPkt.bDscType)                                                C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000d2e   0a03     XORLW     0x3                                                                                             
000d30   e034     BZ        0xd9a                                                                                           
000d32   0a01     XORLW     0x1                                                                                             
000d34   e010     BZ        0xd56                                                                                           
000d36   0a03     XORLW     0x3                                                                                             
000d38   e001     BZ        0xd3c                                                                                           
000d3a   d04d     BRA       0xdd6                                                                                           
                                                   {                                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                       case DSC_DEV:                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000d3c   0100     MOVLB     0x0                            ctrl_trf_session_owner = MUID_USB9;                              C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000d3e   0e01     MOVLW     0x1                                                                                             
000d40   6fba     MOVWF     0xba,0x1                                                                                        
000d42   0100     MOVLB     0x0                            pSrc.bRom = (rom byte*)&device_dsc;                              C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000d44   0e54     MOVLW     0x54                                                                                            
000d46   6fbb     MOVWF     0xbb,0x1                                                                                        
000d48   0e16     MOVLW     0x16                                                                                            
000d4a   6fbc     MOVWF     0xbc,0x1                                                                                        
000d4c   0e12     MOVLW     0x12                           wCount._word = sizeof(device_dsc);          // Set data count    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000d4e   0100     MOVLB     0x0                                                                                             
000d50   6fbf     MOVWF     0xbf,0x1                                                                                        
000d52   6bc0     CLRF      0xc0,0x1                                                                                        
000d54   d040     BRA       0xdd6                          break;                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                       case DSC_CFG:                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000d56   0100     MOVLB     0x0                            ctrl_trf_session_owner = MUID_USB9;                              C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000d58   0e01     MOVLW     0x1                                                                                             
000d5a   6fba     MOVWF     0xba,0x1                                                                                        
000d5c   0104     MOVLB     0x4                            pSrc.bRom = *(USB_CD_Ptr+SetupPkt.bDscIndex);                    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000d5e   511a     MOVF      0x1a,0x0,0x1                                                                                    
000d60   6ef6     MOVWF     0xf6,0x0                                                                                        
000d62   6af7     CLRF      0xf7,0x0                                                                                        
000d64   90d8     BCF       0xd8,0x0,0x0                                                                                    
000d66   36f6     RLCF      0xf6,0x1,0x0                                                                                    
000d68   36f7     RLCF      0xf7,0x1,0x0                                                                                    
000d6a   0e02     MOVLW     0x2                                                                                             
000d6c   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
000d6e   0e17     MOVLW     0x17                                                                                            
000d70   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000d72   0009     TBLRDPOSTINC                                                                                              
000d74   cff5     MOVFF     0xff5,0xbb                                                                                      
000d76   f0bb                                                                                                               
000d78   000a     TBLRDPOSTDEC                                                                                              
000d7a   cff5     MOVFF     0xff5,0xbc                                                                                      
000d7c   f0bc                                                                                                               
000d7e   0e02     MOVLW     0x2                            wCount._word = *(pSrc.wRom+1);              // Set data count    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000d80   0100     MOVLB     0x0                                                                                             
000d82   6af7     CLRF      0xf7,0x0                                                                                        
000d84   25bb     ADDWF     0xbb,0x0,0x1                                                                                    
000d86   6ef6     MOVWF     0xf6,0x0                                                                                        
000d88   51bc     MOVF      0xbc,0x0,0x1                                                                                    
000d8a   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000d8c   0009     TBLRDPOSTINC                                                                                              
000d8e   cff5     MOVFF     0xff5,0xbf                                                                                      
000d90   f0bf                                                                                                               
000d92   000a     TBLRDPOSTDEC                                                                                              
000d94   cff5     MOVFF     0xff5,0xc0                                                                                      
000d96   f0c0                                                                                                               
000d98   d01e     BRA       0xdd6                          break;                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                       case DSC_STR:                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000d9a   0100     MOVLB     0x0                            ctrl_trf_session_owner = MUID_USB9;                              C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000d9c   0e01     MOVLW     0x1                                                                                             
000d9e   6fba     MOVWF     0xba,0x1                                                                                        
000da0   0104     MOVLB     0x4                            pSrc.bRom = *(USB_SD_Ptr+SetupPkt.bDscIndex);                    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000da2   511a     MOVF      0x1a,0x0,0x1                                                                                    
000da4   6ef6     MOVWF     0xf6,0x0                                                                                        
000da6   6af7     CLRF      0xf7,0x0                                                                                        
000da8   90d8     BCF       0xd8,0x0,0x0                                                                                    
000daa   36f6     RLCF      0xf6,0x1,0x0                                                                                    
000dac   36f7     RLCF      0xf7,0x1,0x0                                                                                    
000dae   0e06     MOVLW     0x6                                                                                             
000db0   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
000db2   0e17     MOVLW     0x17                                                                                            
000db4   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000db6   0009     TBLRDPOSTINC                                                                                              
000db8   cff5     MOVFF     0xff5,0xbb                                                                                      
000dba   f0bb                                                                                                               
000dbc   000a     TBLRDPOSTDEC                                                                                              
000dbe   cff5     MOVFF     0xff5,0xbc                                                                                      
000dc0   f0bc                                                                                                               
000dc2   c0bb     MOVFF     0xbb,0xff6                     wCount._word = *pSrc.bRom;                  // Set data count    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000dc4   fff6                                                                                                               
000dc6   c0bc     MOVFF     0xbc,0xff7                                                                                      
000dc8   fff7                                                                                                               
000dca   0008     TBLRD                                                                                                     
000dcc   50f5     MOVF      0xf5,0x0,0x0                                                                                    
000dce   0100     MOVLB     0x0                                                                                             
000dd0   6fbf     MOVWF     0xbf,0x1                                                                                        
000dd2   6bc0     CLRF      0xc0,0x1                                                                                        
000dd4   d000     BRA       0xdd6                          break;                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                   }//end switch                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000dd6   0100     MOVLB     0x0                    usb_stat.ctrl_trf_mem = _ROM;                       // Set memory type   C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000dd8   83c2     BSF       0xc2,0x1,0x1                                                                                    
                                               }//end if                                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000dda   0012     RETURN    0x0            }//end USBStdGetDscHandler                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Function:        void USBStdSetCfgHandler(void)                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Overview:        This routine first disables all endpoints by clearing        C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                  UEP registers. It then configures (initializes) endpoints    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                  specified in the modifiable section.                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           void USBStdSetCfgHandler(void)                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000ddc   0100     MOVLB     0x0                ctrl_trf_session_owner = MUID_USB9;                                          C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000dde   0e01     MOVLW     0x1                                                                                             
000de0   6fba     MOVWF     0xba,0x1                                                                                        
000de2   0e0f     MOVLW     0xf                mDisableEP1to15();                          // See usbdrv.h                  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000de4   6ee6     MOVWF     0xe6,0x0                                                                                        
000de6   0e71     MOVLW     0x71                                                                                            
000de8   6ee6     MOVWF     0xe6,0x0                                                                                        
000dea   0e0f     MOVLW     0xf                                                                                             
000dec   6ee6     MOVWF     0xe6,0x0                                                                                        
000dee   ec86     CALL      0x150c,0x0                                                                                      
000df0   f00a                                                                                                               
000df2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000df4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000df6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000df8   0e01     MOVLW     0x1                ClearArray((byte*)&usb_alt_intf,MAX_NUM_INT);                                C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000dfa   6ee6     MOVWF     0xe6,0x0                                                                                        
000dfc   0ec4     MOVLW     0xc4                                                                                            
000dfe   6ee6     MOVWF     0xe6,0x0                                                                                        
000e00   0e00     MOVLW     0x0                                                                                             
000e02   6ee6     MOVWF     0xe6,0x0                                                                                        
000e04   ec86     CALL      0x150c,0x0                                                                                      
000e06   f00a                                                                                                               
000e08   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000e0a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000e0c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000e0e   c41a     MOVFF     0x41a,0xc3         usb_active_cfg = SetupPkt.bCfgValue;                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e10   f0c3                                                                                                               
000e12   0104     MOVLB     0x4                if(SetupPkt.bCfgValue == 0)                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e14   511a     MOVF      0x1a,0x0,0x1                                                                                    
000e16   e104     BNZ       0xe20                                                                                           
000e18   0100     MOVLB     0x0                    usb_device_state = ADDRESS_STATE;                                        C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e1a   0e05     MOVLW     0x5                                                                                             
000e1c   6fc1     MOVWF     0xc1,0x1                                                                                        
000e1e   d005     BRA       0xe2a              else                                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e20   0100     MOVLB     0x0                    usb_device_state = CONFIGURED_STATE;                                     C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e22   0e06     MOVLW     0x6                                                                                             
000e24   6fc1     MOVWF     0xc1,0x1                                                                                        
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                   /* Modifiable Section */                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                   #if defined(USB_USE_GEN)                // See autofiles\usbcfg.h        C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e26   ec9b     CALL      0x1536,0x0             USBGenInitEP();                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e28   f00a                                                                                                               
                                                   #endif                                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                   /* End modifiable section */                                             C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                               }//end if(SetupPkt.bcfgValue == 0)                                           C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e2a   0012     RETURN    0x0            }//end USBStdSetCfgHandler                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Function:        void USBStdGetStatusHandler(void)                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard GET_STATUS request         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           void USBStdGetStatusHandler(void)                                                C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e2c   0104     MOVLB     0x4                CtrlTrfData._byte0 = 0;                         // Initialize content        C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e2e   6b20     CLRF      0x20,0x1                                                                                        
000e30   6b21     CLRF      0x21,0x1           CtrlTrfData._byte1 = 0;                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e32   0104     MOVLB     0x4                switch(SetupPkt.Recipient)                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e34   5118     MOVF      0x18,0x0,0x1                                                                                    
000e36   0b1f     ANDLW     0x1f                                                                                            
000e38   0a02     XORLW     0x2                                                                                             
000e3a   e016     BZ        0xe68                                                                                           
000e3c   0a03     XORLW     0x3                                                                                             
000e3e   e010     BZ        0xe60                                                                                           
000e40   0a01     XORLW     0x1                                                                                             
000e42   e001     BZ        0xe46                                                                                           
000e44   d035     BRA       0xeb0                                                                                           
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                   case RCPT_DEV:                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e46   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e48   0e01     MOVLW     0x1                                                                                             
000e4a   6fba     MOVWF     0xba,0x1                                                                                        
                                                       /*                                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                        * _byte0: bit0: Self-Powered Status [0] Bus-Powered [1] Self-Powered C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                        *         bit1: RemoteWakeup        [0] Disabled    [1] Enabled     C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                        */                                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e4c   a480     BTFSS     0x80,0x2,0x0               if(self_power == 1)                     // self_power defined in io_cfg.h C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e4e   d002     BRA       0xe54                                                                                           
000e50   0104     MOVLB     0x4                            CtrlTrfData._byte0|=0b000000001;    // Set bit0                  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e52   8120     BSF       0x20,0x0,0x1                                                                                    
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e54   0100     MOVLB     0x0                        if(usb_stat.RemoteWakeup == 1)          // usb_stat defined in usbmmap.c C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e56   a1c2     BTFSS     0xc2,0x0,0x1                                                                                    
000e58   d002     BRA       0xe5e                                                                                           
000e5a   0104     MOVLB     0x4                            CtrlTrfData._byte0|=0b00000010;     // Set bit1                  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e5c   8320     BSF       0x20,0x1,0x1                                                                                    
000e5e   d028     BRA       0xeb0                      break;                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                   case RCPT_INTF:                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e60   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;     // No data to update         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e62   0e01     MOVLW     0x1                                                                                             
000e64   6fba     MOVWF     0xba,0x1                                                                                        
000e66   d024     BRA       0xeb0                      break;                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                   case RCPT_EP:                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e68   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e6a   0e01     MOVLW     0x1                                                                                             
000e6c   6fba     MOVWF     0xba,0x1                                                                                        
                                                       /*                                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                        * _byte0: bit0: Halt Status [0] Not Halted [1] Halted               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                        */                                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e6e   0104     MOVLB     0x4                        pDst.bRam = (byte*)&ep0Bo+(SetupPkt.EPNum*8)+(SetupPkt.EPDir*4);     C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e70   511c     MOVF      0x1c,0x0,0x1                                                                                    
000e72   0b0f     ANDLW     0xf                                                                                             
000e74   0d08     MULLW     0x8                                                                                             
000e76   50f3     MOVF      0xf3,0x0,0x0                                                                                    
000e78   6a11     CLRF      0x11,0x0                                                                                        
000e7a   0f00     ADDLW     0x0                                                                                             
000e7c   6e10     MOVWF     0x10,0x0                                                                                        
000e7e   0e04     MOVLW     0x4                                                                                             
000e80   2211     ADDWFC    0x11,0x1,0x0                                                                                    
000e82   511c     MOVF      0x1c,0x0,0x1                                                                                    
000e84   0b80     ANDLW     0x80                                                                                            
000e86   e001     BZ        0xe8a                                                                                           
000e88   0e01     MOVLW     0x1                                                                                             
000e8a   0d04     MULLW     0x4                                                                                             
000e8c   50f3     MOVF      0xf3,0x0,0x0                                                                                    
000e8e   0100     MOVLB     0x0                                                                                             
000e90   2410     ADDWF     0x10,0x0,0x0                                                                                    
000e92   6fbd     MOVWF     0xbd,0x1                                                                                        
000e94   0e00     MOVLW     0x0                                                                                             
000e96   2011     ADDWFC    0x11,0x0,0x0                                                                                    
000e98   6fbe     MOVWF     0xbe,0x1                                                                                        
000e9a   c0bd     MOVFF     0xbd,0xfe9                 if(*pDst.bRam & _BSTALL)    // Use _BSTALL as a bit mask             C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000e9c   ffe9                                                                                                               
000e9e   c0be     MOVFF     0xbe,0xfea                                                                                      
000ea0   ffea                                                                                                               
000ea2   50ef     MOVF      0xef,0x0,0x0                                                                                    
000ea4   0b04     ANDLW     0x4                                                                                             
000ea6   e003     BZ        0xeae                                                                                           
000ea8   0104     MOVLB     0x4                            CtrlTrfData._byte0=0x01;// Set bit0                              C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000eaa   0e01     MOVLW     0x1                                                                                             
000eac   6f20     MOVWF     0x20,0x1                                                                                        
000eae   d000     BRA       0xeb0                      break;                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                               }//end switch                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000eb0   0100     MOVLB     0x0                if(ctrl_trf_session_owner == MUID_USB9)                                      C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000eb2   05ba     DECF      0xba,0x0,0x1                                                                                    
000eb4   e10a     BNZ       0xeca                                                                                           
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000eb6   0100     MOVLB     0x0                    pSrc.bRam = (byte*)&CtrlTrfData;            // Set Source                C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000eb8   0e20     MOVLW     0x20                                                                                            
000eba   6fbb     MOVWF     0xbb,0x1                                                                                        
000ebc   0e04     MOVLW     0x4                                                                                             
000ebe   6fbc     MOVWF     0xbc,0x1                                                                                        
000ec0   0100     MOVLB     0x0                    usb_stat.ctrl_trf_mem = _RAM;               // Set memory type           C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000ec2   93c2     BCF       0xc2,0x1,0x1                                                                                    
000ec4   0100     MOVLB     0x0                    LSB(wCount) = 2;                            // Set data count            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000ec6   0e02     MOVLW     0x2                                                                                             
000ec8   6fbf     MOVWF     0xbf,0x1                                                                                        
                                               }//end if(...)                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000eca   0012     RETURN    0x0            }//end USBStdGetStatusHandler                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Function:        void USBStdFeatureReqHandler(void)                           C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard SET & CLEAR FEATURES       C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                  requests                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           void USBStdFeatureReqHandler(void)                                               C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000ecc   0104     MOVLB     0x4                if((SetupPkt.bFeature == DEVICE_REMOTE_WAKEUP)&&                             C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000ece   051a     DECF      0x1a,0x0,0x1                                                                                    
000ed0   e110     BNZ       0xef2                 (SetupPkt.Recipient == RCPT_DEV))                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000ed2   5118     MOVF      0x18,0x0,0x1                                                                                    
000ed4   0b1f     ANDLW     0x1f                                                                                            
000ed6   0900     IORLW     0x0                                                                                             
000ed8   e10c     BNZ       0xef2                                                                                           
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000eda   0100     MOVLB     0x0                    ctrl_trf_session_owner = MUID_USB9;                                      C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000edc   0e01     MOVLW     0x1                                                                                             
000ede   6fba     MOVWF     0xba,0x1                                                                                        
000ee0   0e03     MOVLW     0x3                    if(SetupPkt.bRequest == SET_FEATURE)                                     C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000ee2   0104     MOVLB     0x4                                                                                             
000ee4   5d19     SUBWF     0x19,0x0,0x1                                                                                    
000ee6   e103     BNZ       0xeee                                                                                           
000ee8   0100     MOVLB     0x0                        usb_stat.RemoteWakeup = 1;                                           C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000eea   81c2     BSF       0xc2,0x0,0x1                                                                                    
000eec   d002     BRA       0xef2                  else                                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000eee   0100     MOVLB     0x0                        usb_stat.RemoteWakeup = 0;                                           C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000ef0   91c2     BCF       0xc2,0x0,0x1                                                                                    
                                               }//end if                                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000ef2   0104     MOVLB     0x4                if((SetupPkt.bFeature == ENDPOINT_HALT)&&                                    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000ef4   511a     MOVF      0x1a,0x0,0x1                                                                                    
000ef6   e13a     BNZ       0xf6c                 (SetupPkt.Recipient == RCPT_EP)&&                                         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000ef8   5118     MOVF      0x18,0x0,0x1                                                                                    
000efa   0b1f     ANDLW     0x1f                                                                                            
000efc   0802     SUBLW     0x2                                                                                             
000efe   e136     BNZ       0xf6c                                                                                           
000f00   511c     MOVF      0x1c,0x0,0x1          (SetupPkt.EPNum != 0))                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000f02   0b0f     ANDLW     0xf                                                                                             
000f04   0900     IORLW     0x0                                                                                             
000f06   e032     BZ        0xf6c                                                                                           
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000f08   0100     MOVLB     0x0                    ctrl_trf_session_owner = MUID_USB9;                                      C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000f0a   0e01     MOVLW     0x1                                                                                             
000f0c   6fba     MOVWF     0xba,0x1                                                                                        
                                                   /* Must do address calculation here */                                   C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000f0e   0104     MOVLB     0x4                    pDst.bRam = (byte*)&ep0Bo+(SetupPkt.EPNum*8)+(SetupPkt.EPDir*4);         C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000f10   511c     MOVF      0x1c,0x0,0x1                                                                                    
000f12   0b0f     ANDLW     0xf                                                                                             
000f14   0d08     MULLW     0x8                                                                                             
000f16   50f3     MOVF      0xf3,0x0,0x0                                                                                    
000f18   6a11     CLRF      0x11,0x0                                                                                        
000f1a   0f00     ADDLW     0x0                                                                                             
000f1c   6e10     MOVWF     0x10,0x0                                                                                        
000f1e   0e04     MOVLW     0x4                                                                                             
000f20   2211     ADDWFC    0x11,0x1,0x0                                                                                    
000f22   511c     MOVF      0x1c,0x0,0x1                                                                                    
000f24   0b80     ANDLW     0x80                                                                                            
000f26   e001     BZ        0xf2a                                                                                           
000f28   0e01     MOVLW     0x1                                                                                             
000f2a   0d04     MULLW     0x4                                                                                             
000f2c   50f3     MOVF      0xf3,0x0,0x0                                                                                    
000f2e   0100     MOVLB     0x0                                                                                             
000f30   2410     ADDWF     0x10,0x0,0x0                                                                                    
000f32   6fbd     MOVWF     0xbd,0x1                                                                                        
000f34   0e00     MOVLW     0x0                                                                                             
000f36   2011     ADDWFC    0x11,0x0,0x0                                                                                    
000f38   6fbe     MOVWF     0xbe,0x1                                                                                        
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000f3a   0e03     MOVLW     0x3                    if(SetupPkt.bRequest == SET_FEATURE)                                     C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000f3c   0104     MOVLB     0x4                                                                                             
000f3e   5d19     SUBWF     0x19,0x0,0x1                                                                                    
000f40   e107     BNZ       0xf50                                                                                           
000f42   0e84     MOVLW     0x84                       *pDst.bRam = _USIE|_BSTALL;                                          C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000f44   c0bd     MOVFF     0xbd,0xfe9                                                                                      
000f46   ffe9                                                                                                               
000f48   c0be     MOVFF     0xbe,0xfea                                                                                      
000f4a   ffea                                                                                                               
000f4c   6eef     MOVWF     0xef,0x0                                                                                        
000f4e   d00e     BRA       0xf6c                  else                                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                   {                                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000f50   af1c     BTFSS     0x1c,0x7,0x1               if(SetupPkt.EPDir == 1) // IN                                        C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000f52   d006     BRA       0xf60                                                                                           
000f54   c0bd     MOVFF     0xbd,0xfe9                     *pDst.bRam = _UCPU;                                              C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000f56   ffe9                                                                                                               
000f58   c0be     MOVFF     0xbe,0xfea                                                                                      
000f5a   ffea                                                                                                               
000f5c   6aef     CLRF      0xef,0x0                                                                                        
000f5e   d006     BRA       0xf6c                      else                                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000f60   0e88     MOVLW     0x88                           *pDst.bRam = _USIE|_DAT0|_DTSEN;                                 C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000f62   c0bd     MOVFF     0xbd,0xfe9                                                                                      
000f64   ffe9                                                                                                               
000f66   c0be     MOVFF     0xbe,0xfea                                                                                      
000f68   ffea                                                                                                               
000f6a   6eef     MOVWF     0xef,0x0                                                                                        
                                                   }//end if                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                               }//end if                                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
000f6c   0012     RETURN    0x0            }//end USBStdFeatureReqHandler                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           /** EOF usb9.c ***************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usb9\usb9.c
                                           /*********************************************************************           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *********************************************************************           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * FileName:        usbdsc.c                                                     C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * Dependencies:    See INCLUDES section below                                   C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * Processor:       PIC18                                                        C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * Compiler:        C18 2.30.01+                                                 C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * Company:         Microchip Technology, Inc.                                   C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * Software License Agreement                                                    C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * civil liability for the breach of the terms and conditions of this            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * license.                                                                      C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            ********************************************************************/           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           /*********************************************************************           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * -usbdsc.c-                                                                    C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * This file contains the USB descriptor information. It is used                 C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * in conjunction with the usbdsc.h file. When a descriptor is added             C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * or removed from the main configuration descriptor, i.e. CFG01,                C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * the user must also change the descriptor structure defined in                 C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * the usbdsc.h file. The structure is used to calculate the                     C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * descriptor size, i.e. sizeof(CFG01).                                          C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * A typical configuration descriptor consists of:                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * At least one configuration descriptor (USB_CFG_DSC)                           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * One or more interface descriptors (USB_INTF_DSC)                              C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * One or more endpoint descriptors (USB_EP_DSC)                                 C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * Naming Convention:                                                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * To resolve ambiguity, the naming convention are as followed:                  C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * - USB_CFG_DSC type should be named cdxx, where xx is the                      C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *   configuration number. This number should match the actual                   C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *   index value of this configuration.                                          C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * - USB_INTF_DSC type should be named i<yy>a<zz>, where yy is the               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *   interface number and zz is the alternate interface number.                  C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * - USB_EP_DSC type should be named ep<##><d>_i<yy>a<zz>, where                 C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *   ## is the endpoint number and d is the direction of transfer.               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *   The interface name should also be listed as a suffix to identify            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *   which interface does the endpoint belong to.                                C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * Example:                                                                      C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * If a device has one configuration, two interfaces; interface 0                C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * has two endpoints (in and out), and interface 1 has one endpoint(in).         C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * Then the CFG01 structure in the usbdsc.h should be:                           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * #define CFG01 rom struct                            \                         C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * {   USB_CFG_DSC             cd01;                   \                         C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *     USB_INTF_DSC            i00a00;                 \                         C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep01o_i00a00;           \                         C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep01i_i00a00;           \                         C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *     USB_INTF_DSC            i01a00;                 \                         C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep02i_i01a00;           \                         C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * } cfg01                                                                       C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * Note the hierarchy of the descriptors above, it follows the USB               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * specification requirement. All endpoints belonging to an interface            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * should be listed immediately after that interface.                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * Filling in the descriptor values in the usbdsc.c file:                        C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * Most items should be self-explanatory, however, a few will be                 C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * explained for clarification.                                                  C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * [Configuration Descriptor(USB_CFG_DSC)]                                       C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * The configuration attribute must always have the _DEFAULT                     C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * definition at the minimum. Additional options can be ORed                     C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * to the _DEFAULT attribute. Available options are _SELF and _RWU.              C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * These definitions are defined in the usbdefs_std_dsc.h file. The              C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * _SELF tells the USB host that this device is self-powered. The                C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * _RWU tells the USB host that this device supports Remote Wakeup.              C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * [Endpoint Descriptor(USB_EP_DSC)]                                             C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * Assume the following example:                                                 C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * sizeof(USB_EP_DSC),DSC_EP,_EP01_OUT,_BULK,64,0x00                             C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * The first two parameters are self-explanatory. They specify the               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * length of this endpoint descriptor (7) and the descriptor type.               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * The next parameter identifies the endpoint, the definitions are               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * defined in usbdefs_std_dsc.h and has the following naming                     C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * convention:                                                                   C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * _EP<##>_<dir>                                                                 C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * where ## is the endpoint number and dir is the direction of                   C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * transfer. The dir has the value of either 'OUT' or 'IN'.                      C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * The next parameter identifies the type of the endpoint. Available             C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * options are _BULK, _INT, _ISO, and _CTRL. The _CTRL is not                    C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * typically used because the default control transfer endpoint is               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * not defined in the USB descriptors. When _ISO option is used,                 C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * addition options can be ORed to _ISO. Example:                                C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * _ISO|_AD|_FE                                                                  C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * This describes the endpoint as an isochronous pipe with adaptive              C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * and feedback attributes. See usbdefs_std_dsc.h and the USB                    C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * specification for details. The next parameter defines the size of             C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * the endpoint. The last parameter in the polling interval.                     C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * Adding a USB String                                                           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * A string descriptor array should have the following format:                   C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * rom struct{byte bLength;byte bDscType;word string[size];}sdxxx={              C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * sizeof(sdxxx),DSC_STR,<text>};                                                C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * The above structure provides a means for the C compiler to                    C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * calculate the length of string descriptor sdxxx, where xxx is the             C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * index number. The first two bytes of the descriptor are descriptor            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * length and type. The rest <text> are string texts which must be               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * in the unicode format. The unicode format is achieved by declaring            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * each character as a word type. The whole text string is declared              C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * as a word array with the number of characters equals to <size>.               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * <size> has to be manually counted and entered into the array                  C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * declaration. Let's study this through an example:                             C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * if the string is "USB" , then the string descriptor should be:                C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * (Using index 02)                                                              C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * rom struct{byte bLength;byte bDscType;word string[3];}sd002={                 C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * sizeof(sd002),DSC_STR,'U','S','B'};                                           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * A USB project may have multiple strings and the firmware supports             C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * the management of multiple strings through a look-up table.                   C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * The look-up table is defined as:                                              C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * rom const unsigned char *rom USB_SD_Ptr[]={&sd000,&sd001,&sd002};             C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * The above declaration has 3 strings, sd000, sd001, and sd002.                 C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * Strings can be removed or added. sd000 is a specialized string                C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * descriptor. It defines the language code, usually this is                     C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * US English (0x0409). The index of the string must match the index             C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * position of the USB_SD_Ptr array, &sd000 must be in position                  C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * USB_SD_Ptr[0], &sd001 must be in position USB_SD_Ptr[1] and so on.            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * The look-up table USB_SD_Ptr is used by the get string handler                C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * function in usb9.c.                                                           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * The look-up table scheme also applies to the configuration                    C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * descriptor. A USB device may have multiple configuration                      C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * descriptors, i.e. CFG01, CFG02, etc. To add a configuration                   C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * descriptor, user must implement a structure similar to CFG01.                 C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * The next step is to add the configuration descriptor name, i.e.               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * cfg01, cfg02,.., to the look-up table USB_CD_Ptr. USB_CD_Ptr[0]               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * is a dummy place holder since configuration 0 is the un-configured            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * state according to the definition in the USB specification.                   C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            ********************************************************************/           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           /*********************************************************************           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * Descriptor specific type definitions are defined in:                          C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * system\usb\usbdefs\usbdefs_std_dsc.h                                          C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * Configuration information is defined in:                                      C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            * autofiles\usbcfg.h                                                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                            ********************************************************************/           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           /** I N C L U D E S *************************************************/           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           #include "system\typedefs.h"                                                     C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           #include "system\usb\usb.h"                                                      C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           /** C O N S T A N T S ************************************************/          C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           #pragma romdata                                                                  C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           /* Device Descriptor */                                                          C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           rom USB_DEV_DSC device_dsc=                                                      C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               sizeof(USB_DEV_DSC),    // Size of this descriptor in bytes                  C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               DSC_DEV,                // DEVICE descriptor type                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               0x0200,                 // USB Spec Release Number in BCD format             C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               0x00,                   // Class Code                                        C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               0x00,                   // Subclass code                                     C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               0x00,                   // Protocol code                                     C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               EP0_BUFF_SIZE,          // Max packet size for EP0, see usbcfg.h             C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               0x04D8,                 // Vendor ID                                         C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               0x000C,                 // Product ID: PICDEM FS USB (DEMO Mode)             C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               0x0000,                 // Device release number in BCD format               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               0x01,                   // Manufacturer string index                         C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               0x02,                   // Product string index                              C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               0x00,                   // Device serial number string index                 C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               0x01                    // Number of possible configurations                 C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           };                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           /* Configuration 1 Descriptor */                                                 C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           CFG01=                                                                           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               /* Configuration Descriptor */                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               sizeof(USB_CFG_DSC),    // Size of this descriptor in bytes                  C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               DSC_CFG,                // CONFIGURATION descriptor type                     C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               sizeof(cfg01),          // Total length of data for this cfg                 C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               1,                      // Number of interfaces in this cfg                  C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               1,                      // Index value of this configuration                 C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               0,                      // Configuration string index                        C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               _DEFAULT,               // Attributes, see usbdefs_std_dsc.h                 C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               50,                     // Max power consumption (2X mA)                     C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               /* Interface Descriptor */                                                   C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               sizeof(USB_INTF_DSC),   // Size of this descriptor in bytes                  C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               DSC_INTF,               // INTERFACE descriptor type                         C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               0,                      // Interface Number                                  C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               0,                      // Alternate Setting Number                          C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               2,                      // Number of endpoints in this intf                  C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               0x00,                   // Class code                                        C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               0x00,                   // Subclass code                                     C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               0x00,                   // Protocol code                                     C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               0,                      // Interface string index                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               /* Endpoint Descriptors */                                                   C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP01_OUT,_INT,USBGEN_EP_SIZE,32,                  C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP01_IN,_INT,USBGEN_EP_SIZE,32                    C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           };                                                                               C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[1];}sd000={                    C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           sizeof(sd000),DSC_STR,0x0409};                                                   C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[25];}sd001={                   C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           sizeof(sd001),DSC_STR,                                                           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           'M','i','c','r','o','c','h','i','p',' ',                                         C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           'T','e','c','h','n','o','l','o','g','y',' ','I','n','c','.'};                    C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[33];}sd002={                   C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           sizeof(sd002),DSC_STR,                                                           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           'P','I','C','D','E','M',' ','F','S',' ','U','S','B',' ',                         C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           'D','e','m','o',' ','B','o','a','r','d',' ','(','C',')',                         C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           ' ','2','0','0','4'};                                                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           rom const unsigned char *rom USB_CD_Ptr[]={&cfg01,&cfg01};                       C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           rom const unsigned char *rom USB_SD_Ptr[]={&sd000,&sd001,&sd002};                C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           #pragma code                                                                     C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           /** EOF usbdsc.c ****************************************************/           C:\EC_Mouse_Week_2\PIC\autofiles\usbdsc.c
                                           /*********************************************************************           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *********************************************************************           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * FileName:        usbctrltrf.c                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Dependencies:    See INCLUDES section below                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Processor:       PIC18                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Compiler:        C18 2.30.01+                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Company:         Microchip Technology, Inc.                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Software License Agreement                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * civil liability for the breach of the terms and conditions of this            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * license.                                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Author               Date        Comment                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            ********************************************************************/           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /** I N C L U D E S **********************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           #include <p18cxxx.h>                                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           #include "system\typedefs.h"                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           #include "system\usb\usb.h"                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /** V A R I A B L E S ********************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           #pragma udata                                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           byte ctrl_trf_state;                // Control Transfer State                    C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           byte ctrl_trf_session_owner;        // Current transfer session owner            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           POINTER pSrc;                       // Data source pointer                       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           POINTER pDst;                       // Data destination pointer                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           WORD wCount;                        // Data counter                              C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfSetupHandler(void);                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfOutHandler(void);                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfInHandler(void);                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           #pragma code                                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlEPService(void)                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    USTAT is loaded with a valid endpoint address.               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        USBCtrlEPService checks for three transaction types that     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  it knows how to service and services them:                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. EP0 SETUP                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. EP0 OUT                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. EP0 IN                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  It ignores all other types (i.e. EP1, EP2, etc.)             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlEPService(void)                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000f6e   506c     MOVF      0x6c,0x0,0x0       if(USTAT == EP00_OUT)                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000f70   e002     BZ        0xf76                                                                                           
000f72   0e00     MOVLW     0x0                                                                                             
000f74   d001     BRA       0xf78                                                                                           
000f76   0e01     MOVLW     0x1                                                                                             
000f78   0900     IORLW     0x0                                                                                             
000f7a   e00b     BZ        0xf92                                                                                           
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000f7c   0104     MOVLB     0x4                    if(ep0Bo.Stat.PID == SETUP_TOKEN)           // EP0 SETUP                 C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000f7e   5100     MOVF      0x0,0x0,0x1                                                                                     
000f80   0b3c     ANDLW     0x3c                                                                                            
000f82   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000f84   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000f86   080d     SUBLW     0xd                                                                                             
000f88   e102     BNZ       0xf8e                                                                                           
000f8a   d80c     RCALL     0xfa4                      USBCtrlTrfSetupHandler();                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000f8c   d001     BRA       0xf90                  else                                        // EP0 OUT                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000f8e   d81c     RCALL     0xfc8                      USBCtrlTrfOutHandler();                                              C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000f90   d008     BRA       0xfa2              else if(USTAT == EP00_IN)                       // EP0 IN                    C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000f92   506c     MOVF      0x6c,0x0,0x0                                                                                    
000f94   e002     BZ        0xf9a                                                                                           
000f96   0e00     MOVLW     0x0                                                                                             
000f98   d001     BRA       0xf9c                                                                                           
000f9a   0e01     MOVLW     0x1                                                                                             
000f9c   0904     IORLW     0x4                                                                                             
000f9e   e001     BZ        0xfa2                                                                                           
000fa0   d823     RCALL     0xfe8                  USBCtrlTrfInHandler();                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fa2   0012     RETURN    0x0            }//end USBCtrlEPService                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfSetupHandler(void)                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    SetupPkt buffer is loaded with valid USB Setup Data          C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine is a task dispatcher and has 3 stages.          C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. It initializes the control transfer state machine.        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. It calls on each of the module that may know how to       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     service the Setup Request from the host.                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     Module Example: USB9, HID, CDC, MSD, ...                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     As new classes are added, ClassReqHandler table in        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     usbdsc.c should be updated to call all available          C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     class handlers.                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. Once each of the modules has had a chance to check if     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     it is responsible for servicing the request, stage 3      C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     then checks direction of the transfer to determine how    C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     to prepare EP0 for the control transfer.                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     Refer to USBCtrlEPServiceComplete() for more details.     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            Microchip USB Firmware has three different states for        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  the control transfer state machine:                          C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. WAIT_SETUP                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. CTRL_TRF_TX                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. CTRL_TRF_RX                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Refer to firmware manual to find out how one state           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  is transitioned to another.                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  A Control Transfer is composed of many USB transactions.     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  When transferring data over multiple transactions,           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  it is important to keep track of data source, data           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  destination, and data count. These three parameters are      C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  stored in pSrc,pDst, and wCount. A flag is used to           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  note if the data source is from ROM or RAM.                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fa4   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfSetupHandler(void)                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fa6   ffe6                                                                                                               
000fa8   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000faa   ffd9                                                                                                               
000fac   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               byte i;                                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 1 */                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fae   0100     MOVLB     0x0                ctrl_trf_state = WAIT_SETUP;                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fb0   6bb9     CLRF      0xb9,0x1                                                                                        
000fb2   6bba     CLRF      0xba,0x1           ctrl_trf_session_owner = MUID_NULL;     // Set owner to NULL                 C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fb4   6bbf     CLRF      0xbf,0x1           wCount._word = 0;                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fb6   6bc0     CLRF      0xc0,0x1                                                                                        
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 2 */                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fb8   ec31     CALL      0xc62,0x0          USBCheckStdRequest();                   // See system\usb9\usb9.c            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fba   f006                                                                                                               
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Modifiable Section */                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               // Insert other USB Device Class Request Handlers here                       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               /* End Modifiable Section */                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 3 */                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fbc   d8dd     RCALL     0x1178             USBCtrlEPServiceComplete();                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fbe   52e5     MOVF      0xe5,0x1,0x0   }//end USBCtrlTrfSetupHandler                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fc0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000fc2   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000fc4   ffd9                                                                                                               
000fc6   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfOutHandler(void)                              C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine handles an OUT transaction according to         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  which control transfer state is currently active.            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            Note that if the the control transfer was from               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  host to device, the session owner should be notified         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  at the end of each OUT transaction to service the            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  received data.                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfOutHandler(void)                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fc8   0e02     MOVLW     0x2                if(ctrl_trf_state == CTRL_TRF_RX)                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fca   0100     MOVLB     0x0                                                                                             
000fcc   5db9     SUBWF     0xb9,0x0,0x1                                                                                    
000fce   e10a     BNZ       0xfe4                                                                                           
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fd0   d896     RCALL     0x10fe                 USBCtrlTrfRxService();                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                   /*                                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                    * Don't have to worry about overwriting _KEEP bit                       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                    * because if _KEEP was set, TRNIF would not have been                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                    * generated in the first place.                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                    */                                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fd2   0104     MOVLB     0x4                    if(ep0Bo.Stat.DTS == 0)                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fd4   bd00     BTFSC     0x0,0x6,0x1                                                                                     
000fd6   d003     BRA       0xfde                                                                                           
000fd8   0ec8     MOVLW     0xc8                       ep0Bo.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fda   6f00     MOVWF     0x0,0x1                                                                                         
000fdc   d002     BRA       0xfe2                  else                                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fde   0e88     MOVLW     0x88                       ep0Bo.Stat._byte = _USIE|_DAT0|_DTSEN;                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fe0   6f00     MOVWF     0x0,0x1                                                                                         
                                               }                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fe2   d001     BRA       0xfe6              else    // CTRL_TRF_TX                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fe4   d90f     RCALL     0x1204                 USBPrepareForNextSetupTrf();                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fe6   0012     RETURN    0x0            }//end USBCtrlTrfOutHandler                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfInHandler(void)                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine handles an IN transaction according to          C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  which control transfer state is currently active.            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            A Set Address Request must not change the acutal address     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  of the device until the completion of the control            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer. The end of the control transfer for Set Address    C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Request is an IN transaction. Therefore it is necessary      C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  to service this unique situation when the condition is       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  right. Macro mUSBCheckAdrPendingState is defined in          C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  usb9.h and its function is to specifically service this      C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  event.                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfInHandler(void)                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fe8   0e04     MOVLW     0x4                mUSBCheckAdrPendingState();         // Must check if in ADR_PENDING_STATE    C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
000fea   0100     MOVLB     0x0                                                                                             
000fec   5dc1     SUBWF     0xc1,0x0,0x1                                                                                    
000fee   e10a     BNZ       0x1004                                                                                          
000ff0   c41a     MOVFF     0x41a,0xf6e                                                                                     
000ff2   ff6e                                                                                                               
000ff4   506e     MOVF      0x6e,0x0,0x0                                                                                    
000ff6   0800     SUBLW     0x0                                                                                             
000ff8   e203     BC        0x1000                                                                                          
000ffa   0e05     MOVLW     0x5                                                                                             
000ffc   6fc1     MOVWF     0xc1,0x1                                                                                        
000ffe   d002     BRA       0x1004                                                                                          
001000   0e03     MOVLW     0x3                                                                                             
001002   6fc1     MOVWF     0xc1,0x1                                                                                        
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001004   0100     MOVLB     0x0                if(ctrl_trf_state == CTRL_TRF_TX)                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001006   05b9     DECF      0xb9,0x0,0x1                                                                                    
001008   e10a     BNZ       0x101e                                                                                          
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00100a   d80b     RCALL     0x1022                 USBCtrlTrfTxService();                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00100c   0104     MOVLB     0x4                    if(ep0Bi.Stat.DTS == 0)                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00100e   bd04     BTFSC     0x4,0x6,0x1                                                                                     
001010   d003     BRA       0x1018                                                                                          
001012   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001014   6f04     MOVWF     0x4,0x1                                                                                         
001016   d002     BRA       0x101c                 else                                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001018   0e88     MOVLW     0x88                       ep0Bi.Stat._byte = _USIE|_DAT0|_DTSEN;                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00101a   6f04     MOVWF     0x4,0x1                                                                                         
                                               }                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00101c   d001     BRA       0x1020             else // CTRL_TRF_RX                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00101e   d8f2     RCALL     0x1204                 USBPrepareForNextSetupTrf();                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001020   0012     RETURN    0x0            }//end USBCtrlTrfInHandler                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfTxService(void)                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    pSrc, wCount, and usb_stat.ctrl_trf_mem are setup properly.  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine should be called from only two places.          C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  One from USBCtrlEPServiceComplete() and one from             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  USBCtrlTrfInHandler(). It takes care of managing a           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer over multiple USB transactions.                     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            This routine works with isochronous endpoint larger than     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  256 bytes and is shown here as an example of how to deal     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  with BC9 and BC8. In reality, a control endpoint can never   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  be larger than 64 bytes.                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001022   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfTxService(void)                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001024   ffe6                                                                                                               
001026   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001028   ffd9                                                                                                               
00102a   0e02     MOVLW     0x2                                                                                             
00102c   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               WORD byte_to_send;                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                * First, have to figure out how many byte of data to send.                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00102e   0100     MOVLB     0x0                if(wCount._word < EP0_BUFF_SIZE)                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001030   0e08     MOVLW     0x8                                                                                             
001032   5dbf     SUBWF     0xbf,0x0,0x1                                                                                    
001034   0e00     MOVLW     0x0                                                                                             
001036   59c0     SUBWFB    0xc0,0x0,0x1                                                                                    
001038   e205     BC        0x1044                                                                                          
00103a   c0bf     MOVFF     0xbf,0xfde             byte_to_send._word = wCount._word;                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00103c   ffde                                                                                                               
00103e   c0c0     MOVFF     0xc0,0xfdd                                                                                      
001040   ffdd                                                                                                               
001042   d003     BRA       0x104a             else                                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001044   0e08     MOVLW     0x8                    byte_to_send._word = EP0_BUFF_SIZE;                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001046   6ede     MOVWF     0xde,0x0                                                                                        
001048   6add     CLRF      0xdd,0x0                                                                                        
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                * Next, load the number of bytes to send to BC9..0 in buffer descriptor     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00104a   0104     MOVLB     0x4                ep0Bi.Stat.BC9 = 0;                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00104c   9304     BCF       0x4,0x1,0x1                                                                                     
00104e   9104     BCF       0x4,0x0,0x1        ep0Bi.Stat.BC8 = 0;                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001050   0e01     MOVLW     0x1                ep0Bi.Stat._byte |= MSB(byte_to_send);                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001052   50db     MOVF      0xdb,0x0,0x0                                                                                    
001054   1304     IORWF     0x4,0x1,0x1                                                                                     
001056   cfdf     MOVFF     0xfdf,0x405        ep0Bi.Cnt = LSB(byte_to_send);                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001058   f405                                                                                                               
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                * Subtract the number of bytes just about to be sent from the total.        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00105a   0e00     MOVLW     0x0                wCount._word = wCount._word - byte_to_send._word;                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00105c   50db     MOVF      0xdb,0x0,0x0                                                                                    
00105e   0100     MOVLB     0x0                                                                                             
001060   5fbf     SUBWF     0xbf,0x1,0x1                                                                                    
001062   0e01     MOVLW     0x1                                                                                             
001064   50db     MOVF      0xdb,0x0,0x0                                                                                    
001066   5bc0     SUBWFB    0xc0,0x1,0x1                                                                                    
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001068   0e20     MOVLW     0x20               pDst.bRam = (byte*)&CtrlTrfData;        // Set destination pointer           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00106a   6fbd     MOVWF     0xbd,0x1                                                                                        
00106c   0e04     MOVLW     0x4                                                                                             
00106e   6fbe     MOVWF     0xbe,0x1                                                                                        
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001070   0100     MOVLB     0x0                if(usb_stat.ctrl_trf_mem == _ROM)       // Determine type of memory source   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001072   a3c2     BTFSS     0xc2,0x1,0x1                                                                                    
001074   d01e     BRA       0x10b2                                                                                          
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001076   cfd9     MOVFF     0xfd9,0xfe9            while(byte_to_send._word)                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001078   ffe9                                                                                                               
00107a   cfda     MOVFF     0xfda,0xfea                                                                                     
00107c   ffea                                                                                                               
00107e   50ee     MOVF      0xee,0x0,0x0                                                                                    
001080   10ed     IORWF     0xed,0x0,0x0                                                                                    
001082   e016     BZ        0x10b0                                                                                          
0010ae   d7e3     BRA       0x1076                                                                                          
                                                   {                                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001084   c0bb     MOVFF     0xbb,0xff6                 *pDst.bRam = *pSrc.bRom;                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001086   fff6                                                                                                               
001088   c0bc     MOVFF     0xbc,0xff7                                                                                      
00108a   fff7                                                                                                               
00108c   0008     TBLRD                                                                                                     
00108e   50f5     MOVF      0xf5,0x0,0x0                                                                                    
001090   c0bd     MOVFF     0xbd,0xfe9                                                                                      
001092   ffe9                                                                                                               
001094   c0be     MOVFF     0xbe,0xfea                                                                                      
001096   ffea                                                                                                               
001098   6eef     MOVWF     0xef,0x0                                                                                        
00109a   0100     MOVLB     0x0                        pDst.bRam++;                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00109c   2bbd     INCF      0xbd,0x1,0x1                                                                                    
00109e   0e00     MOVLW     0x0                                                                                             
0010a0   23be     ADDWFC    0xbe,0x1,0x1                                                                                    
0010a2   2bbb     INCF      0xbb,0x1,0x1               pSrc.bRom++;                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0010a4   23bc     ADDWFC    0xbc,0x1,0x1                                                                                    
0010a6   06df     DECF      0xdf,0x1,0x0               byte_to_send._word--;                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0010a8   0e01     MOVLW     0x1                                                                                             
0010aa   e201     BC        0x10ae                                                                                          
0010ac   06db     DECF      0xdb,0x1,0x0                                                                                    
                                                   }//end while(byte_to_send._word)                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0010b0   d01c     BRA       0x10ea             else // RAM                                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0010b2   cfd9     MOVFF     0xfd9,0xfe9            while(byte_to_send._word)                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0010b4   ffe9                                                                                                               
0010b6   cfda     MOVFF     0xfda,0xfea                                                                                     
0010b8   ffea                                                                                                               
0010ba   50ee     MOVF      0xee,0x0,0x0                                                                                    
0010bc   10ed     IORWF     0xed,0x0,0x0                                                                                    
0010be   e015     BZ        0x10ea                                                                                          
0010e8   d7e4     BRA       0x10b2                                                                                          
                                                   {                                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0010c0   c0bb     MOVFF     0xbb,0xfe9                 *pDst.bRam = *pSrc.bRam;                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0010c2   ffe9                                                                                                               
0010c4   c0bc     MOVFF     0xbc,0xfea                                                                                      
0010c6   ffea                                                                                                               
0010c8   50ef     MOVF      0xef,0x0,0x0                                                                                    
0010ca   c0bd     MOVFF     0xbd,0xfe9                                                                                      
0010cc   ffe9                                                                                                               
0010ce   c0be     MOVFF     0xbe,0xfea                                                                                      
0010d0   ffea                                                                                                               
0010d2   6eef     MOVWF     0xef,0x0                                                                                        
0010d4   0100     MOVLB     0x0                        pDst.bRam++;                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0010d6   2bbd     INCF      0xbd,0x1,0x1                                                                                    
0010d8   0e00     MOVLW     0x0                                                                                             
0010da   23be     ADDWFC    0xbe,0x1,0x1                                                                                    
0010dc   2bbb     INCF      0xbb,0x1,0x1               pSrc.bRam++;                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0010de   23bc     ADDWFC    0xbc,0x1,0x1                                                                                    
0010e0   06df     DECF      0xdf,0x1,0x0               byte_to_send._word--;                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0010e2   0e01     MOVLW     0x1                                                                                             
0010e4   e201     BC        0x10e8                                                                                          
0010e6   06db     DECF      0xdb,0x1,0x0                                                                                    
                                                   }//end while(byte_to_send._word)                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               }//end if(usb_stat.ctrl_trf_mem == _ROM)                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0010ea   0e02     MOVLW     0x2            }//end USBCtrlTrfTxService                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0010ec   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
0010ee   e202     BC        0x10f4                                                                                          
0010f0   6ae1     CLRF      0xe1,0x0                                                                                        
0010f2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0010f4   6ee1     MOVWF     0xe1,0x0                                                                                        
0010f6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0010f8   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0010fa   ffd9                                                                                                               
0010fc   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfRxService(void)                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    pDst and wCount are setup properly.                          C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  pSrc is always &CtrlTrfData                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  usb_stat.ctrl_trf_mem is always _RAM.                        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  wCount should be set to 0 at the start of each control       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer.                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        *** This routine is only partially complete. Check for       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  new version of the firmware.                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0010fe   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfRxService(void)                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001100   ffe6                                                                                                               
001102   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001104   ffd9                                                                                                               
001106   0e02     MOVLW     0x2                                                                                             
001108   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               WORD byte_to_read;                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00110a   0e03     MOVLW     0x3                MSB(byte_to_read) = 0x03 & ep0Bo.Stat._byte;    // Filter out last 2 bits    C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00110c   0104     MOVLB     0x4                                                                                             
00110e   1500     ANDWF     0x0,0x0,0x1                                                                                     
001110   6ee7     MOVWF     0xe7,0x0                                                                                        
001112   0e01     MOVLW     0x1                                                                                             
001114   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
001116   ffdb                                                                                                               
001118   c401     MOVFF     0x401,0xfdf        LSB(byte_to_read) = ep0Bo.Cnt;                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00111a   ffdf                                                                                                               
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                * Accumulate total number of bytes read                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00111c   50de     MOVF      0xde,0x0,0x0       wCount._word = wCount._word + byte_to_read._word;                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00111e   0100     MOVLB     0x0                                                                                             
001120   27bf     ADDWF     0xbf,0x1,0x1                                                                                    
001122   50dd     MOVF      0xdd,0x0,0x0                                                                                    
001124   23c0     ADDWFC    0xc0,0x1,0x1                                                                                    
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001126   0e20     MOVLW     0x20               pSrc.bRam = (byte*)&CtrlTrfData;                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001128   6fbb     MOVWF     0xbb,0x1                                                                                        
00112a   0e04     MOVLW     0x4                                                                                             
00112c   6fbc     MOVWF     0xbc,0x1                                                                                        
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00112e   cfd9     MOVFF     0xfd9,0xfe9        while(byte_to_read._word)                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001130   ffe9                                                                                                               
001132   cfda     MOVFF     0xfda,0xfea                                                                                     
001134   ffea                                                                                                               
001136   50ee     MOVF      0xee,0x0,0x0                                                                                    
001138   10ed     IORWF     0xed,0x0,0x0                                                                                    
00113a   e014     BZ        0x1164                                                                                          
001162   d7e5     BRA       0x112e                                                                                          
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00113c   c0bb     MOVFF     0xbb,0xfe9             *pDst.bRam = *pSrc.bRam;                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00113e   ffe9                                                                                                               
001140   c0bc     MOVFF     0xbc,0xfea                                                                                      
001142   ffea                                                                                                               
001144   50ef     MOVF      0xef,0x0,0x0                                                                                    
001146   c0bd     MOVFF     0xbd,0xfe9                                                                                      
001148   ffe9                                                                                                               
00114a   c0be     MOVFF     0xbe,0xfea                                                                                      
00114c   ffea                                                                                                               
00114e   6eef     MOVWF     0xef,0x0                                                                                        
001150   2bbd     INCF      0xbd,0x1,0x1           pDst.bRam++;                                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001152   0e00     MOVLW     0x0                                                                                             
001154   23be     ADDWFC    0xbe,0x1,0x1                                                                                    
001156   2bbb     INCF      0xbb,0x1,0x1           pSrc.bRam++;                                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001158   23bc     ADDWFC    0xbc,0x1,0x1                                                                                    
00115a   06df     DECF      0xdf,0x1,0x0           byte_to_read._word--;                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00115c   0e01     MOVLW     0x1                                                                                             
00115e   e201     BC        0x1162                                                                                          
001160   06db     DECF      0xdb,0x1,0x0                                                                                    
                                               }//end while(byte_to_read._word)                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001164   0e02     MOVLW     0x2            }//end USBCtrlTrfRxService                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001166   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
001168   e202     BC        0x116e                                                                                          
00116a   6ae1     CLRF      0xe1,0x0                                                                                        
00116c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00116e   6ee1     MOVWF     0xe1,0x0                                                                                        
001170   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001172   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001174   ffd9                                                                                                               
001176   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlEPServiceComplete(void)                          C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine wrap up the ramaining tasks in servicing        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  a Setup Request. Its main task is to set the endpoint        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  controls appropriately for a given situation. See code       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  below.                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  There are three main scenarios:                              C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  a) There was no handler for the Request, in this case        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     a STALL should be sent out.                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  b) The host has requested a read control transfer,           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     endpoints are required to be setup in a specific way.     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  c) The host has requested a write control transfer, or       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     a control data stage is not required, endpoints are       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     required to be setup in a specific way.                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Packet processing is resumed by clearing PKTDIS bit.         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlEPServiceComplete(void)                                              C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001178   0100     MOVLB     0x0                if(ctrl_trf_session_owner == MUID_NULL)                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00117a   51ba     MOVF      0xba,0x0,0x1                                                                                    
00117c   e10c     BNZ       0x1196                                                                                          
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                   /*                                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                    * If no one knows how to service this request then stall.               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                    * Must also prepare EP0 to receive the next SETUP transaction.          C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                    */                                                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00117e   0104     MOVLB     0x4                    ep0Bo.Cnt = EP0_BUFF_SIZE;                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001180   0e08     MOVLW     0x8                                                                                             
001182   6f01     MOVWF     0x1,0x1                                                                                         
001184   0e18     MOVLW     0x18                   ep0Bo.ADR = (byte*)&SetupPkt;                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001186   6f02     MOVWF     0x2,0x1                                                                                         
001188   0e04     MOVLW     0x4                                                                                             
00118a   6f03     MOVWF     0x3,0x1                                                                                         
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00118c   0e84     MOVLW     0x84                   ep0Bo.Stat._byte = _USIE|_BSTALL;                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00118e   6f00     MOVWF     0x0,0x1                                                                                         
001190   0104     MOVLB     0x4                    ep0Bi.Stat._byte = _USIE|_BSTALL;                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001192   6f04     MOVWF     0x4,0x1                                                                                         
                                               }                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001194   d035     BRA       0x1200             else    // A module has claimed ownership of the control transfer session.   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001196   0104     MOVLB     0x4                    if(SetupPkt.DataDir == DEV_TO_HOST)                                      C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001198   af18     BTFSS     0x18,0x7,0x1                                                                                    
00119a   d022     BRA       0x11e0                                                                                          
                                                   {                                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00119c   0100     MOVLB     0x0                        if(SetupPkt.wLength < wCount._word)                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00119e   51bf     MOVF      0xbf,0x0,0x1                                                                                    
0011a0   0104     MOVLB     0x4                                                                                             
0011a2   5d1e     SUBWF     0x1e,0x0,0x1                                                                                    
0011a4   0100     MOVLB     0x0                                                                                             
0011a6   51c0     MOVF      0xc0,0x0,0x1                                                                                    
0011a8   0104     MOVLB     0x4                                                                                             
0011aa   591f     SUBWFB    0x1f,0x0,0x1                                                                                    
0011ac   e204     BC        0x11b6                                                                                          
0011ae   c41e     MOVFF     0x41e,0xbf                     wCount._word = SetupPkt.wLength;                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011b0   f0bf                                                                                                               
0011b2   c41f     MOVFF     0x41f,0xc0                                                                                      
0011b4   f0c0                                                                                                               
0011b6   df35     RCALL     0x1022                     USBCtrlTrfTxService();                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011b8   0100     MOVLB     0x0                        ctrl_trf_state = CTRL_TRF_TX;                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011ba   0e01     MOVLW     0x1                                                                                             
0011bc   6fb9     MOVWF     0xb9,0x1                                                                                        
                                                       /*                                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Control Read:                                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * <SETUP[0]><IN[1]><IN[0]>...<OUT[1]> | <SETUP[0]>                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 1. Prepare OUT EP to respond to early termination                 C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * NOTE:                                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * If something went wrong during the control transfer,              C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the last status stage may not be sent by the host.                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * When this happens, two different things could happen              C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * depending on the host.                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * a) The host could send out a RESET.                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * b) The host could send out a new SETUP transaction                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    without sending a RESET first.                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * To properly handle case (b), the OUT EP must be setup             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * to receive either a zero length OUT transaction, or a             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * new SETUP transaction.                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Since the SETUP transaction requires the DTS bit to be            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * DAT0 while the zero length OUT status requires the DTS            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * bit to be DAT1, the DTS bit check by the hardware should          C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * be disabled. This way the SIE could accept either of              C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the two transactions.                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Furthermore, the Cnt byte should be set to prepare for            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the SETUP data (8-byte or more), and the buffer address           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * should be pointed to SetupPkt.                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011be   0104     MOVLB     0x4                        ep0Bo.Cnt = EP0_BUFF_SIZE;                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011c0   0e08     MOVLW     0x8                                                                                             
0011c2   6f01     MOVWF     0x1,0x1                                                                                         
0011c4   0e18     MOVLW     0x18                       ep0Bo.ADR = (byte*)&SetupPkt;                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011c6   6f02     MOVWF     0x2,0x1                                                                                         
0011c8   0e04     MOVLW     0x4                                                                                             
0011ca   6f03     MOVWF     0x3,0x1                                                                                         
0011cc   0e80     MOVLW     0x80                       ep0Bo.Stat._byte = _USIE;           // Note: DTSEN is 0!             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011ce   6f00     MOVWF     0x0,0x1                                                                                         
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                       /*                                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 2. Prepare IN EP to transfer data, Cnt should have                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    been initialized by responsible request owner.                 C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011d0   0104     MOVLB     0x4                        ep0Bi.ADR = (byte*)&CtrlTrfData;                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011d2   0e20     MOVLW     0x20                                                                                            
0011d4   6f06     MOVWF     0x6,0x1                                                                                         
0011d6   0e04     MOVLW     0x4                                                                                             
0011d8   6f07     MOVWF     0x7,0x1                                                                                         
0011da   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011dc   6f04     MOVWF     0x4,0x1                                                                                         
                                                   }                                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011de   d010     BRA       0x1200                 else    // (SetupPkt.DataDir == HOST_TO_DEV)                             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                   {                                                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011e0   0100     MOVLB     0x0                        ctrl_trf_state = CTRL_TRF_RX;                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011e2   0e02     MOVLW     0x2                                                                                             
0011e4   6fb9     MOVWF     0xb9,0x1                                                                                        
                                                       /*                                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Control Write:                                                    C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * <SETUP[0]><OUT[1]><OUT[0]>...<IN[1]> | <SETUP[0]>                 C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 1. Prepare IN EP to respond to early termination                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    This is the same as a Zero Length Packet Response              C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    for control transfer without a data stage                      C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011e6   0104     MOVLB     0x4                        ep0Bi.Cnt = 0;                                                       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011e8   6b05     CLRF      0x5,0x1                                                                                         
0011ea   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011ec   6f04     MOVWF     0x4,0x1                                                                                         
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                       /*                                                                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 2. Prepare OUT EP to receive data.                                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011ee   0104     MOVLB     0x4                        ep0Bo.Cnt = EP0_BUFF_SIZE;                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011f0   0e08     MOVLW     0x8                                                                                             
0011f2   6f01     MOVWF     0x1,0x1                                                                                         
0011f4   0e20     MOVLW     0x20                       ep0Bo.ADR = (byte*)&CtrlTrfData;                                     C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011f6   6f02     MOVWF     0x2,0x1                                                                                         
0011f8   0e04     MOVLW     0x4                                                                                             
0011fa   6f03     MOVWF     0x3,0x1                                                                                         
0011fc   0ec8     MOVLW     0xc8                       ep0Bo.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011fe   6f00     MOVWF     0x0,0x1                                                                                         
                                                   }//end if(SetupPkt.DataDir == DEV_TO_HOST)                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               }//end if(ctrl_trf_session_owner == MUID_NULL)                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                * PKTDIS bit is set when a Setup Transaction is received.                   C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                * Clear to resume packet processing.                                        C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001200   986d     BCF       0x6d,0x4,0x0       UCONbits.PKTDIS = 0;                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001202   0012     RETURN    0x0            }//end USBCtrlEPServiceComplete                                                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBPrepareForNextSetupTrf(void)                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        The routine forces EP0 OUT to be ready for a new Setup       C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transaction, and forces EP0 IN to be owned by CPU.           C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBPrepareForNextSetupTrf(void)                                             C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001204   0100     MOVLB     0x0                ctrl_trf_state = WAIT_SETUP;            // See usbctrltrf.h                  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001206   6bb9     CLRF      0xb9,0x1                                                                                        
001208   0104     MOVLB     0x4                ep0Bo.Cnt = EP0_BUFF_SIZE;              // Defined in usbcfg.h               C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00120a   0e08     MOVLW     0x8                                                                                             
00120c   6f01     MOVWF     0x1,0x1                                                                                         
00120e   0e18     MOVLW     0x18               ep0Bo.ADR = (byte*)&SetupPkt;                                                C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001210   6f02     MOVWF     0x2,0x1                                                                                         
001212   0e04     MOVLW     0x4                                                                                             
001214   6f03     MOVWF     0x3,0x1                                                                                         
001216   0e88     MOVLW     0x88               ep0Bo.Stat._byte = _USIE|_DAT0|_DTSEN;  // EP0 buff dsc init, see usbmmap.h  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
001218   6f00     MOVWF     0x0,0x1                                                                                         
00121a   0104     MOVLB     0x4                ep0Bi.Stat._byte = _UCPU;               // EP0 IN buffer initialization      C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
00121c   6b04     CLRF      0x4,0x1                                                                                         
00121e   0012     RETURN    0x0            }//end USBPrepareForNextSetupTrf                                                 C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /** EOF usbctrltrf.c *********************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /*********************************************************************           C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *********************************************************************           C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * FileName:        user.c                                                       C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * Dependencies:    See INCLUDES section below                                   C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * Processor:       PIC18                                                        C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * Compiler:        C18 2.30.01+                                                 C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * Company:         Microchip Technology, Inc.                                   C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * Software License Agreement                                                    C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * civil liability for the breach of the terms and conditions of this            C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * license.                                                                      C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * Author               Date        Comment                                      C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\EC_Mouse_Week_2\PIC\user\user.c
                                            ********************************************************************/           C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                           /** I N C L U D E S **********************************************************/  C:\EC_Mouse_Week_2\PIC\user\user.c
                                           #include <p18cxxx.h>                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                           #include <usart.h>                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                           #include "system\typedefs.h"                                                     C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                           #include "system\usb\usb.h"                                                      C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                           #include "io_cfg.h"             // I/O pin mapping                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                           #include "user\user.h"                                                           C:\EC_Mouse_Week_2\PIC\user\user.c
                                           #include "user\temperature.h"                                                    C:\EC_Mouse_Week_2\PIC\user\user.c
                                           #include "def_ports.h"								// Port definitions                                C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                           /** V A R I A B L E S ********************************************************/  C:\EC_Mouse_Week_2\PIC\user\user.c
                                           #pragma udata                                                                    C:\EC_Mouse_Week_2\PIC\user\user.c
                                           byte old_sw2,old_sw3;                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                           byte counter;                                                                    C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                           DATA_PACKET dataPacket;                                                          C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                           /** S P I - P I N S ********************************************************/    C:\EC_Mouse_Week_2\PIC\user\user.c
                                           #define SW_CS_PIN PORTBbits.RB2 // Chip Select                                   C:\EC_Mouse_Week_2\PIC\user\user.c
                                           #define TRIS_SW_CS_PIN TRISBbits.TRISB2                                          C:\EC_Mouse_Week_2\PIC\user\user.c
                                           #define SW_DIO_PIN PORTBbits.RB7 // Data in-out                                  C:\EC_Mouse_Week_2\PIC\user\user.c
                                           #define TRIS_SW_DIO_PIN TRISBbits.TRISB7                                         C:\EC_Mouse_Week_2\PIC\user\user.c
                                           #define SW_SCK_PIN PORTBbits.RB6 // Clock                                        C:\EC_Mouse_Week_2\PIC\user\user.c
                                           #define TRIS_SW_SCK_PIN TRISBbits.TRISB6                                         C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                           void BlinkUSBStatus(void);                                                       C:\EC_Mouse_Week_2\PIC\user\user.c
                                           BOOL Switch2IsPressed(void);                                                     C:\EC_Mouse_Week_2\PIC\user\user.c
                                           BOOL Switch3IsPressed(void);                                                     C:\EC_Mouse_Week_2\PIC\user\user.c
                                           void ServiceRequests(void);                                                      C:\EC_Mouse_Week_2\PIC\user\user.c
                                           char ReadWithSPIHalfDuplex(char address);                                        C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                           // For board testing purpose only                                                C:\EC_Mouse_Week_2\PIC\user\user.c
                                           void PICDEMFSUSBDemoBoardTest(void);                                             C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\EC_Mouse_Week_2\PIC\user\user.c
                                           #pragma code                                                                     C:\EC_Mouse_Week_2\PIC\user\user.c
                                           void UserInit(void)                                                              C:\EC_Mouse_Week_2\PIC\user\user.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\user\user.c
000838   0ef0     MOVLW     0xf0               mInitAllLEDs();                                                              C:\EC_Mouse_Week_2\PIC\user\user.c
00083a   168c     ANDWF     0x8c,0x1,0x0                                                                                    
00083c   1695     ANDWF     0x95,0x1,0x0                                                                                    
00083e   8893     BSF       0x93,0x4,0x0       mInitAllSwitches();                                                          C:\EC_Mouse_Week_2\PIC\user\user.c
000840   8a93     BSF       0x93,0x5,0x0                                                                                    
000842   5081     MOVF      0x81,0x0,0x0       old_sw2 = sw2;                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
000844   0b10     ANDLW     0x10                                                                                            
000846   e001     BZ        0x84a                                                                                           
000848   0e01     MOVLW     0x1                                                                                             
00084a   0100     MOVLB     0x0                                                                                             
00084c   6f60     MOVWF     0x60,0x1                                                                                        
00084e   5081     MOVF      0x81,0x0,0x0       old_sw3 = sw3;                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
000850   0b20     ANDLW     0x20                                                                                            
000852   e001     BZ        0x856                                                                                           
000854   0e01     MOVLW     0x1                                                                                             
000856   6f61     MOVWF     0x61,0x1                                                                                        
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
000858   0012     RETURN    0x0            }//end UserInit                                                                  C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * Function:        void ProcessIO(void)                                         C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * Overview:        This function is a place holder for other user routines.     C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                  It is a mixture of both USB and non-USB tasks.               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\user\user.c
                                           void ProcessIO(void)                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\user\user.c
00085a   d8a6     RCALL     0x9a8              BlinkUSBStatus();                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
00085c   0e15     MOVLW     0x15           	ReadWithSPIHalfDuplex(0x15);                                                    C:\EC_Mouse_Week_2\PIC\user\user.c
00085e   6ee6     MOVWF     0xe6,0x0                                                                                        
000860   d852     RCALL     0x906                                                                                           
000862   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                               // User Application USB tasks                                                C:\EC_Mouse_Week_2\PIC\user\user.c
000864   0e06     MOVLW     0x6                if((usb_device_state < CONFIGURED_STATE)||(UCONbits.SUSPND==1)) return;      C:\EC_Mouse_Week_2\PIC\user\user.c
000866   0100     MOVLB     0x0                                                                                             
000868   5dc1     SUBWF     0xc1,0x0,0x1                                                                                    
00086a   e303     BNC       0x872                                                                                           
00086c   506d     MOVF      0x6d,0x0,0x0                                                                                    
00086e   0b02     ANDLW     0x2                                                                                             
000870   e001     BZ        0x874                                                                                           
000872   d001     BRA       0x876                                                                                           
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
000874   d801     RCALL     0x878              ServiceRequests();                                                           C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
000876   0012     RETURN    0x0            }//end ProcessIO                                                                 C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
000878   cfd9     MOVFF     0xfd9,0xfe6    void ServiceRequests(void)                                                       C:\EC_Mouse_Week_2\PIC\user\user.c
00087a   ffe6                                                                                                               
00087c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00087e   ffd9                                                                                                               
000880   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\user\user.c
                                               byte index;                                                                  C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
000882   0e40     MOVLW     0x40               if(USBGenRead((byte*)&dataPacket,sizeof(dataPacket)))                        C:\EC_Mouse_Week_2\PIC\user\user.c
000884   6ee6     MOVWF     0xe6,0x0                                                                                        
000886   0e63     MOVLW     0x63                                                                                            
000888   6ee6     MOVWF     0xe6,0x0                                                                                        
00088a   0e00     MOVLW     0x0                                                                                             
00088c   6ee6     MOVWF     0xe6,0x0                                                                                        
00088e   ecea     CALL      0x15d4,0x0                                                                                      
000890   f00a                                                                                                               
000892   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000894   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000896   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000898   0900     IORLW     0x0                                                                                             
00089a   e030     BZ        0x8fc                                                                                           
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
00089c   0100     MOVLB     0x0                    counter = 0;                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
00089e   6b62     CLRF      0x62,0x1                                                                                        
0008a0   5163     MOVF      0x63,0x0,0x1           switch(dataPacket.CMD)                                                   C:\EC_Mouse_Week_2\PIC\user\user.c
0008a2   0aee     XORLW     0xee                                                                                            
0008a4   e012     BZ        0x8ca                                                                                           
0008a6   0aee     XORLW     0xee                                                                                            
0008a8   e001     BZ        0x8ac                                                                                           
                                                   {                                                                        C:\EC_Mouse_Week_2\PIC\user\user.c
                                                       case READ_VERSION:                                                   C:\EC_Mouse_Week_2\PIC\user\user.c
                                                           //dataPacket._byte[1] is len                                     C:\EC_Mouse_Week_2\PIC\user\user.c
0008ac   5081     MOVF      0x81,0x0,0x0                   dataPacket._byte[2] = !PB4; // Switch 2 status                   C:\EC_Mouse_Week_2\PIC\user\user.c
0008ae   0b10     ANDLW     0x10                                                                                            
0008b0   0a10     XORLW     0x10                                                                                            
0008b2   e001     BZ        0x8b6                                                                                           
0008b4   0e01     MOVLW     0x1                                                                                             
0008b6   6f65     MOVWF     0x65,0x1                                                                                        
0008b8   5081     MOVF      0x81,0x0,0x0                   dataPacket._byte[3] = !PB5; // Switch 3 status                   C:\EC_Mouse_Week_2\PIC\user\user.c
0008ba   0b20     ANDLW     0x20                                                                                            
0008bc   0a20     XORLW     0x20                                                                                            
0008be   e001     BZ        0x8c2                                                                                           
0008c0   0e01     MOVLW     0x1                                                                                             
0008c2   6f66     MOVWF     0x66,0x1                                                                                        
0008c4   0e04     MOVLW     0x4                            counter=0x04;                                                    C:\EC_Mouse_Week_2\PIC\user\user.c
0008c6   6f62     MOVWF     0x62,0x1                                                                                        
0008c8   d009     BRA       0x8dc                          break;                                                           C:\EC_Mouse_Week_2\PIC\user\user.c
                                           			case READ_REGISTER:                                                           C:\EC_Mouse_Week_2\PIC\user\user.c
                                                           //dataPacket._byte[1] is len                                     C:\EC_Mouse_Week_2\PIC\user\user.c
0008ca   c065     MOVFF     0x65,0xfe6                     dataPacket._byte[3] = ReadWithSPIHalfDuplex(dataPacket._byte[2]); C:\EC_Mouse_Week_2\PIC\user\user.c
0008cc   ffe6                                                                                                               
0008ce   d81b     RCALL     0x906                                                                                           
0008d0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0008d2   0100     MOVLB     0x0                                                                                             
0008d4   6f66     MOVWF     0x66,0x1                                                                                        
0008d6   0e04     MOVLW     0x4                            counter=0x04;                                                    C:\EC_Mouse_Week_2\PIC\user\user.c
0008d8   6f62     MOVWF     0x62,0x1                                                                                        
0008da   d000     BRA       0x8dc                          break;                                                           C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                                       default:                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
0008aa   d018     BRA       0x8dc                          break;                                                           C:\EC_Mouse_Week_2\PIC\user\user.c
                                                   }//end switch()                                                          C:\EC_Mouse_Week_2\PIC\user\user.c
0008dc   5162     MOVF      0x62,0x0,0x1           if(counter != 0)                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
0008de   e00e     BZ        0x8fc                                                                                           
                                                   {                                                                        C:\EC_Mouse_Week_2\PIC\user\user.c
0008e0   0104     MOVLB     0x4                        if(!mUSBGenTxIsBusy())                                               C:\EC_Mouse_Week_2\PIC\user\user.c
0008e2   bf0c     BTFSC     0xc,0x7,0x1                                                                                     
0008e4   d00b     BRA       0x8fc                                                                                           
0008e6   c062     MOVFF     0x62,0xfe6                     USBGenWrite((byte*)&dataPacket,counter);                         C:\EC_Mouse_Week_2\PIC\user\user.c
0008e8   ffe6                                                                                                               
0008ea   0e63     MOVLW     0x63                                                                                            
0008ec   6ee6     MOVWF     0xe6,0x0                                                                                        
0008ee   0e00     MOVLW     0x0                                                                                             
0008f0   6ee6     MOVWF     0xe6,0x0                                                                                        
0008f2   ecb0     CALL      0x1560,0x0                                                                                      
0008f4   f00a                                                                                                               
0008f6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0008f8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0008fa   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                   }//end if                                                                C:\EC_Mouse_Week_2\PIC\user\user.c
                                               }//end if                                                                    C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
0008fc   52e5     MOVF      0xe5,0x1,0x0   }//end ServiceRequests                                                           C:\EC_Mouse_Week_2\PIC\user\user.c
0008fe   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000900   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000902   ffd9                                                                                                               
000904   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                           //****************************************************************************** C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
000906   cfd9     MOVFF     0xfd9,0xfe6    char ReadWithSPIHalfDuplex(char address)                                         C:\EC_Mouse_Week_2\PIC\user\user.c
000908   ffe6                                                                                                               
00090a   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00090c   ffd9                                                                                                               
00090e   0e02     MOVLW     0x2                                                                                             
000910   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\user\user.c
                                           	char Bit;                                                                       C:\EC_Mouse_Week_2\PIC\user\user.c
                                           	char input;                                                                     C:\EC_Mouse_Week_2\PIC\user\user.c
000912   9493     BCF       0x93,0x2,0x0   	TRIS_SW_CS_PIN = 0;					// Make the CS pin an output                            C:\EC_Mouse_Week_2\PIC\user\user.c
000914   9c93     BCF       0x93,0x6,0x0   	TRIS_SW_SCK_PIN = 0;				// Make the SCK pin an output                           C:\EC_Mouse_Week_2\PIC\user\user.c
000916   9e93     BCF       0x93,0x7,0x0   	TRIS_SW_DIO_PIN = 0; 				// Make the DIO pin an output                          C:\EC_Mouse_Week_2\PIC\user\user.c
000918   9481     BCF       0x81,0x2,0x0   	SW_CS_PIN = 0;						// Enable the mouse                                         C:\EC_Mouse_Week_2\PIC\user\user.c
00091a   0e01     MOVLW     0x1            	input = 0;                                                                      C:\EC_Mouse_Week_2\PIC\user\user.c
00091c   6adb     CLRF      0xdb,0x0                                                                                        
                                           	                                                                                C:\EC_Mouse_Week_2\PIC\user\user.c
00091e   0e06     MOVLW     0x6            	for(Bit=6; Bit>=0;Bit--)                                                        C:\EC_Mouse_Week_2\PIC\user\user.c
000920   6edf     MOVWF     0xdf,0x0                                                                                        
000922   cfdf     MOVFF     0xfdf,0x10                                                                                      
000924   f010                                                                                                               
000926   3410     RLCF      0x10,0x0,0x0                                                                                    
000928   e215     BC        0x954                                                                                           
000950   06df     DECF      0xdf,0x1,0x0                                                                                    
000952   d7e7     BRA       0x922                                                                                           
                                           	{                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
00092a   9c81     BCF       0x81,0x6,0x0   		SW_SCK_PIN = 0; 				// Clear the SCK pin                                       C:\EC_Mouse_Week_2\PIC\user\user.c
00092c   0000     NOP                      		Nop();							// Pause a little bit                                             C:\EC_Mouse_Week_2\PIC\user\user.c
00092e   0efe     MOVLW     0xfe           		SW_DIO_PIN = (address>>Bit)&1;		// Set the Data line with a	bit of the address C:\EC_Mouse_Week_2\PIC\user\user.c
000930   50db     MOVF      0xdb,0x0,0x0                                                                                    
000932   52df     MOVF      0xdf,0x1,0x0                                                                                    
000934   e006     BZ        0x942                                                                                           
000936   cfdf     MOVFF     0xfdf,0xff3                                                                                     
000938   fff3                                                                                                               
00093a   32e8     RRCF      0xe8,0x1,0x0                                                                                    
00093c   0b7f     ANDLW     0x7f                                                                                            
00093e   06f3     DECF      0xf3,0x1,0x0                                                                                    
000940   e1fc     BNZ       0x93a                                                                                           
000942   0b01     ANDLW     0x1                                                                                             
000944   b0e8     BTFSC     0xe8,0x0,0x0                                                                                    
000946   8e81     BSF       0x81,0x7,0x0                                                                                    
000948   a0e8     BTFSS     0xe8,0x0,0x0                                                                                    
00094a   9e81     BCF       0x81,0x7,0x0                                                                                    
00094c   8c81     BSF       0x81,0x6,0x0   		SW_SCK_PIN = 1; 				// Set the SCK pin                                         C:\EC_Mouse_Week_2\PIC\user\user.c
00094e   0000     NOP                      		Nop(); 							// Pause a little bit                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                           	}                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                           	                                                                                C:\EC_Mouse_Week_2\PIC\user\user.c
000954   8e93     BSF       0x93,0x7,0x0   	TRIS_SW_DIO_PIN = 1; 				// Make the DIO pin an input                           C:\EC_Mouse_Week_2\PIC\user\user.c
000956   0e07     MOVLW     0x7            	for(Bit=7; Bit>=0;Bit--)                                                        C:\EC_Mouse_Week_2\PIC\user\user.c
000958   6edf     MOVWF     0xdf,0x0                                                                                        
00095a   cfdf     MOVFF     0xfdf,0x10                                                                                      
00095c   f010                                                                                                               
00095e   3410     RLCF      0x10,0x0,0x0                                                                                    
000960   e213     BC        0x988                                                                                           
000984   06df     DECF      0xdf,0x1,0x0                                                                                    
000986   d7e9     BRA       0x95a                                                                                           
                                           	{                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
000962   9c81     BCF       0x81,0x6,0x0   		SW_SCK_PIN = 0; 				// Clear the SCK pin                                       C:\EC_Mouse_Week_2\PIC\user\user.c
000964   0000     NOP                      		Nop();							// Pause a little bit                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000966   5081     MOVF      0x81,0x0,0x0   		input = (input<<1) | SW_DIO_PIN; 	// Read data line                            C:\EC_Mouse_Week_2\PIC\user\user.c
000968   0b80     ANDLW     0x80                                                                                            
00096a   e001     BZ        0x96e                                                                                           
00096c   0e01     MOVLW     0x1                                                                                             
00096e   6e10     MOVWF     0x10,0x0                                                                                        
000970   0e01     MOVLW     0x1                                                                                             
000972   50db     MOVF      0xdb,0x0,0x0                                                                                    
000974   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
000976   1010     IORWF     0x10,0x0,0x0                                                                                    
000978   6ee7     MOVWF     0xe7,0x0                                                                                        
00097a   0e01     MOVLW     0x1                                                                                             
00097c   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
00097e   ffdb                                                                                                               
000980   8c81     BSF       0x81,0x6,0x0   		SW_SCK_PIN = 1; 				// Set the SCK pin                                         C:\EC_Mouse_Week_2\PIC\user\user.c
000982   0000     NOP                      		Nop(); 							// Pause a little bit                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                           	}                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                           	                                                                                C:\EC_Mouse_Week_2\PIC\user\user.c
000988   8481     BSF       0x81,0x2,0x0   	SW_CS_PIN = 1;						// Disable the mouse                                        C:\EC_Mouse_Week_2\PIC\user\user.c
00098a   0e01     MOVLW     0x1            	return(input);						// Return the received data                                 C:\EC_Mouse_Week_2\PIC\user\user.c
00098c   50db     MOVF      0xdb,0x0,0x0                                                                                    
00098e   d000     BRA       0x990                                                                                           
000990   6e10     MOVWF     0x10,0x0       }                                                                                C:\EC_Mouse_Week_2\PIC\user\user.c
000992   0e02     MOVLW     0x2                                                                                             
000994   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
000996   e202     BC        0x99c                                                                                           
000998   6ae1     CLRF      0xe1,0x0                                                                                        
00099a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00099c   6ee1     MOVWF     0xe1,0x0                                                                                        
00099e   5010     MOVF      0x10,0x0,0x0                                                                                    
0009a0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0009a2   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0009a4   ffd9                                                                                                               
0009a6   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * Function:        void BlinkUSBStatus(void)                                    C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * Overview:        BlinkUSBStatus turns on and off LEDs corresponding to        C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                  the USB device state.                                        C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\user.c
                                            * Note:            mLED macros can be found in io_cfg.h                         C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                  usb_device_state is declared in usbmmap.c and is modified    C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *                  in usbdrv.c, usbctrltrf.c, and usb9.c                        C:\EC_Mouse_Week_2\PIC\user\user.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\user\user.c
                                           void BlinkUSBStatus(void)                                                        C:\EC_Mouse_Week_2\PIC\user\user.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\user\user.c
                                               static word led_count=0;                                                     C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
0009a8   0100     MOVLB     0x0                if(led_count == 0)led_count = 10000U;                                        C:\EC_Mouse_Week_2\PIC\user\user.c
0009aa   51c7     MOVF      0xc7,0x0,0x1                                                                                    
0009ac   11c8     IORWF     0xc8,0x0,0x1                                                                                    
0009ae   e104     BNZ       0x9b8                                                                                           
0009b0   0e10     MOVLW     0x10                                                                                            
0009b2   6fc7     MOVWF     0xc7,0x1                                                                                        
0009b4   0e27     MOVLW     0x27                                                                                            
0009b6   6fc8     MOVWF     0xc8,0x1                                                                                        
0009b8   07c7     DECF      0xc7,0x1,0x1       led_count--;                                                                 C:\EC_Mouse_Week_2\PIC\user\user.c
0009ba   0e00     MOVLW     0x0                                                                                             
0009bc   5bc8     SUBWFB    0xc8,0x1,0x1                                                                                    
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                               #define mLED_Both_Off()         {mLED_1_Off();mLED_2_Off();}                 C:\EC_Mouse_Week_2\PIC\user\user.c
                                               #define mLED_Both_On()          {mLED_1_On();mLED_2_On();}                   C:\EC_Mouse_Week_2\PIC\user\user.c
                                               #define mLED_Only_1_On()        {mLED_1_On();mLED_2_Off();}                  C:\EC_Mouse_Week_2\PIC\user\user.c
                                               #define mLED_Only_2_On()        {mLED_1_Off();mLED_2_On();}                  C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
0009be   a26d     BTFSS     0x6d,0x1,0x0       if(UCONbits.SUSPND == 1)                                                     C:\EC_Mouse_Week_2\PIC\user\user.c
0009c0   d00b     BRA       0x9d8                                                                                           
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
0009c2   51c7     MOVF      0xc7,0x0,0x1           if(led_count==0)                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
0009c4   11c8     IORWF     0xc8,0x0,0x1                                                                                    
0009c6   e107     BNZ       0x9d6                                                                                           
                                                   {                                                                        C:\EC_Mouse_Week_2\PIC\user\user.c
0009c8   708c     BTG       0x8c,0x0,0x0               mLED_1_Toggle();                                                     C:\EC_Mouse_Week_2\PIC\user\user.c
0009ca   508c     MOVF      0x8c,0x0,0x0               mLED_2 = mLED_1;        // Both blink at the same time               C:\EC_Mouse_Week_2\PIC\user\user.c
0009cc   0b01     ANDLW     0x1                                                                                             
0009ce   e002     BZ        0x9d4                                                                                           
0009d0   828c     BSF       0x8c,0x1,0x0                                                                                    
0009d2   d001     BRA       0x9d6                                                                                           
0009d4   928c     BCF       0x8c,0x1,0x0                                                                                    
                                                   }//end if                                                                C:\EC_Mouse_Week_2\PIC\user\user.c
                                               }                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
0009d6   d030     BRA       0xa38              else                                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
0009d8   0100     MOVLB     0x0                    if(usb_device_state == DETACHED_STATE)                                   C:\EC_Mouse_Week_2\PIC\user\user.c
0009da   51c1     MOVF      0xc1,0x0,0x1                                                                                    
0009dc   e104     BNZ       0x9e6                                                                                           
                                                   {                                                                        C:\EC_Mouse_Week_2\PIC\user\user.c
0009de   908c     BCF       0x8c,0x0,0x0               mLED_Both_Off();                                                     C:\EC_Mouse_Week_2\PIC\user\user.c
0009e0   928c     BCF       0x8c,0x1,0x0                                                                                    
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
0009e2   d85e     RCALL     0xaa0                      PICDEMFSUSBDemoBoardTest();                                          C:\EC_Mouse_Week_2\PIC\user\user.c
                                                   }                                                                        C:\EC_Mouse_Week_2\PIC\user\user.c
0009e4   d029     BRA       0xa38                  else if(usb_device_state == ATTACHED_STATE)                              C:\EC_Mouse_Week_2\PIC\user\user.c
0009e6   05c1     DECF      0xc1,0x0,0x1                                                                                    
0009e8   e103     BNZ       0x9f0                                                                                           
                                                   {                                                                        C:\EC_Mouse_Week_2\PIC\user\user.c
0009ea   808c     BSF       0x8c,0x0,0x0               mLED_Both_On();                                                      C:\EC_Mouse_Week_2\PIC\user\user.c
0009ec   828c     BSF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        C:\EC_Mouse_Week_2\PIC\user\user.c
0009ee   d024     BRA       0xa38                  else if(usb_device_state == POWERED_STATE)                               C:\EC_Mouse_Week_2\PIC\user\user.c
0009f0   0e02     MOVLW     0x2                                                                                             
0009f2   5dc1     SUBWF     0xc1,0x0,0x1                                                                                    
0009f4   e103     BNZ       0x9fc                                                                                           
                                                   {                                                                        C:\EC_Mouse_Week_2\PIC\user\user.c
0009f6   808c     BSF       0x8c,0x0,0x0               mLED_Only_1_On();                                                    C:\EC_Mouse_Week_2\PIC\user\user.c
0009f8   928c     BCF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        C:\EC_Mouse_Week_2\PIC\user\user.c
0009fa   d01e     BRA       0xa38                  else if(usb_device_state == DEFAULT_STATE)                               C:\EC_Mouse_Week_2\PIC\user\user.c
0009fc   0e03     MOVLW     0x3                                                                                             
0009fe   5dc1     SUBWF     0xc1,0x0,0x1                                                                                    
000a00   e103     BNZ       0xa08                                                                                           
                                                   {                                                                        C:\EC_Mouse_Week_2\PIC\user\user.c
000a02   908c     BCF       0x8c,0x0,0x0               mLED_Only_2_On();                                                    C:\EC_Mouse_Week_2\PIC\user\user.c
000a04   828c     BSF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        C:\EC_Mouse_Week_2\PIC\user\user.c
000a06   d018     BRA       0xa38                  else if(usb_device_state == ADDRESS_STATE)                               C:\EC_Mouse_Week_2\PIC\user\user.c
000a08   0e05     MOVLW     0x5                                                                                             
000a0a   5dc1     SUBWF     0xc1,0x0,0x1                                                                                    
000a0c   e107     BNZ       0xa1c                                                                                           
                                                   {                                                                        C:\EC_Mouse_Week_2\PIC\user\user.c
000a0e   0100     MOVLB     0x0                        if(led_count == 0)                                                   C:\EC_Mouse_Week_2\PIC\user\user.c
000a10   51c7     MOVF      0xc7,0x0,0x1                                                                                    
000a12   11c8     IORWF     0xc8,0x0,0x1                                                                                    
000a14   e102     BNZ       0xa1a                                                                                           
                                                       {                                                                    C:\EC_Mouse_Week_2\PIC\user\user.c
000a16   708c     BTG       0x8c,0x0,0x0                   mLED_1_Toggle();                                                 C:\EC_Mouse_Week_2\PIC\user\user.c
000a18   928c     BCF       0x8c,0x1,0x0                   mLED_2_Off();                                                    C:\EC_Mouse_Week_2\PIC\user\user.c
                                                       }//end if                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                                   }                                                                        C:\EC_Mouse_Week_2\PIC\user\user.c
000a1a   d00e     BRA       0xa38                  else if(usb_device_state == CONFIGURED_STATE)                            C:\EC_Mouse_Week_2\PIC\user\user.c
000a1c   0e06     MOVLW     0x6                                                                                             
000a1e   5dc1     SUBWF     0xc1,0x0,0x1                                                                                    
000a20   e10b     BNZ       0xa38                                                                                           
                                                   {                                                                        C:\EC_Mouse_Week_2\PIC\user\user.c
000a22   0100     MOVLB     0x0                        if(led_count==0)                                                     C:\EC_Mouse_Week_2\PIC\user\user.c
000a24   51c7     MOVF      0xc7,0x0,0x1                                                                                    
000a26   11c8     IORWF     0xc8,0x0,0x1                                                                                    
000a28   e107     BNZ       0xa38                                                                                           
                                                       {                                                                    C:\EC_Mouse_Week_2\PIC\user\user.c
000a2a   708c     BTG       0x8c,0x0,0x0                   mLED_1_Toggle();                                                 C:\EC_Mouse_Week_2\PIC\user\user.c
000a2c   508c     MOVF      0x8c,0x0,0x0                   mLED_2 = !mLED_1;       // Alternate blink                       C:\EC_Mouse_Week_2\PIC\user\user.c
000a2e   0b01     ANDLW     0x1                                                                                             
000a30   e002     BZ        0xa36                                                                                           
000a32   928c     BCF       0x8c,0x1,0x0                                                                                    
000a34   d001     BRA       0xa38                                                                                           
000a36   828c     BSF       0x8c,0x1,0x0                                                                                    
                                                       }//end if                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                                   }//end if(...)                                                           C:\EC_Mouse_Week_2\PIC\user\user.c
                                               }//end if(UCONbits.SUSPND...)                                                C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
000a38   0012     RETURN    0x0            }//end BlinkUSBStatus                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                           BOOL Switch2IsPressed(void)                                                      C:\EC_Mouse_Week_2\PIC\user\user.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\user\user.c
000a3a   5081     MOVF      0x81,0x0,0x0       if(sw2 != old_sw2)                                                           C:\EC_Mouse_Week_2\PIC\user\user.c
000a3c   0b10     ANDLW     0x10                                                                                            
000a3e   e001     BZ        0xa42                                                                                           
000a40   0e01     MOVLW     0x1                                                                                             
000a42   0100     MOVLB     0x0                                                                                             
000a44   5d60     SUBWF     0x60,0x0,0x1                                                                                    
000a46   e009     BZ        0xa5a                                                                                           
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
000a48   5081     MOVF      0x81,0x0,0x0           old_sw2 = sw2;                  // Save new value                        C:\EC_Mouse_Week_2\PIC\user\user.c
000a4a   0b10     ANDLW     0x10                                                                                            
000a4c   e001     BZ        0xa50                                                                                           
000a4e   0e01     MOVLW     0x1                                                                                             
000a50   6f60     MOVWF     0x60,0x1                                                                                        
000a52   b881     BTFSC     0x81,0x4,0x0           if(sw2 == 0)                    // If pressed                            C:\EC_Mouse_Week_2\PIC\user\user.c
000a54   d002     BRA       0xa5a                                                                                           
000a56   0e01     MOVLW     0x1                        return TRUE;                // Was pressed                           C:\EC_Mouse_Week_2\PIC\user\user.c
000a58   d002     BRA       0xa5e                                                                                           
                                               }//end if                                                                    C:\EC_Mouse_Week_2\PIC\user\user.c
000a5a   0e00     MOVLW     0x0                return FALSE;                       // Was not pressed                       C:\EC_Mouse_Week_2\PIC\user\user.c
000a5c   d000     BRA       0xa5e                                                                                           
000a5e   0012     RETURN    0x0            }//end Switch2IsPressed                                                          C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                           BOOL Switch3IsPressed(void)                                                      C:\EC_Mouse_Week_2\PIC\user\user.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\user\user.c
000a60   5081     MOVF      0x81,0x0,0x0       if(sw3 != old_sw3)                                                           C:\EC_Mouse_Week_2\PIC\user\user.c
000a62   0b20     ANDLW     0x20                                                                                            
000a64   e001     BZ        0xa68                                                                                           
000a66   0e01     MOVLW     0x1                                                                                             
000a68   0100     MOVLB     0x0                                                                                             
000a6a   5d61     SUBWF     0x61,0x0,0x1                                                                                    
000a6c   e009     BZ        0xa80                                                                                           
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
000a6e   5081     MOVF      0x81,0x0,0x0           old_sw3 = sw3;                  // Save new value                        C:\EC_Mouse_Week_2\PIC\user\user.c
000a70   0b20     ANDLW     0x20                                                                                            
000a72   e001     BZ        0xa76                                                                                           
000a74   0e01     MOVLW     0x1                                                                                             
000a76   6f61     MOVWF     0x61,0x1                                                                                        
000a78   ba81     BTFSC     0x81,0x5,0x0           if(sw3 == 0)                    // If pressed                            C:\EC_Mouse_Week_2\PIC\user\user.c
000a7a   d002     BRA       0xa80                                                                                           
000a7c   0e01     MOVLW     0x1                        return TRUE;                // Was pressed                           C:\EC_Mouse_Week_2\PIC\user\user.c
000a7e   d002     BRA       0xa84                                                                                           
                                               }//end if                                                                    C:\EC_Mouse_Week_2\PIC\user\user.c
000a80   0e00     MOVLW     0x0                return FALSE;                       // Was not pressed                       C:\EC_Mouse_Week_2\PIC\user\user.c
000a82   d000     BRA       0xa84                                                                                           
000a84   0012     RETURN    0x0            }//end Switch3IsPressed                                                          C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
000a86   cfd9     MOVFF     0xfd9,0xfe6    void TXbyte(byte data)                                                           C:\EC_Mouse_Week_2\PIC\user\user.c
000a88   ffe6                                                                                                               
000a8a   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000a8c   ffd9                                                                                                               
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\user\user.c
000a8e   a2ac     BTFSS     0xac,0x1,0x0       while(TXSTAbits.TRMT==0);                                                    C:\EC_Mouse_Week_2\PIC\user\user.c
000a90   d7fe     BRA       0xa8e                                                                                           
000a92   0efe     MOVLW     0xfe               TXREG = data;                                                                C:\EC_Mouse_Week_2\PIC\user\user.c
000a94   50db     MOVF      0xdb,0x0,0x0                                                                                    
000a96   6ead     MOVWF     0xad,0x0                                                                                        
000a98   52e5     MOVF      0xe5,0x1,0x0   }//end TXbyte                                                                    C:\EC_Mouse_Week_2\PIC\user\user.c
000a9a   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000a9c   ffd9                                                                                                               
000a9e   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
000aa0   cfd9     MOVFF     0xfd9,0xfe6    void PICDEMFSUSBDemoBoardTest(void)                                              C:\EC_Mouse_Week_2\PIC\user\user.c
000aa2   ffe6                                                                                                               
000aa4   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000aa6   ffd9                                                                                                               
000aa8   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\user\user.c
                                               byte temp;                                                                   C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                               //PICDEM FS USB Demo Board Test Procedure:                                   C:\EC_Mouse_Week_2\PIC\user\user.c
000aaa   dfc7     RCALL     0xa3a              if(Switch2IsPressed())                                                       C:\EC_Mouse_Week_2\PIC\user\user.c
000aac   0900     IORLW     0x0                                                                                             
000aae   e101     BNZ       0xab2                                                                                           
000ab0   d0d3     BRA       0xc58                                                                                           
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                                   //LEDs and push buttons testing                                          C:\EC_Mouse_Week_2\PIC\user\user.c
000ab2   808c     BSF       0x8c,0x0,0x0           mLED_1_On();                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000ab4   dfc2     RCALL     0xa3a                  while(!Switch2IsPressed());                                              C:\EC_Mouse_Week_2\PIC\user\user.c
000ab6   0900     IORLW     0x0                                                                                             
000ab8   e101     BNZ       0xabc                                                                                           
000aba   d7fc     BRA       0xab4                                                                                           
000abc   908c     BCF       0x8c,0x0,0x0           mLED_1_Off();                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
000abe   828c     BSF       0x8c,0x1,0x0           mLED_2_On();                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000ac0   dfcf     RCALL     0xa60                  while(!Switch3IsPressed());                                              C:\EC_Mouse_Week_2\PIC\user\user.c
000ac2   0900     IORLW     0x0                                                                                             
000ac4   e101     BNZ       0xac8                                                                                           
000ac6   d7fc     BRA       0xac0                                                                                           
000ac8   928c     BCF       0x8c,0x1,0x0           mLED_2_Off();                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
000aca   848c     BSF       0x8c,0x2,0x0           mLED_3_On();                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000acc   dfc9     RCALL     0xa60                  while(!Switch3IsPressed());                                              C:\EC_Mouse_Week_2\PIC\user\user.c
000ace   0900     IORLW     0x0                                                                                             
000ad0   e101     BNZ       0xad4                                                                                           
000ad2   d7fc     BRA       0xacc                                                                                           
000ad4   948c     BCF       0x8c,0x2,0x0           mLED_3_Off();                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
000ad6   868c     BSF       0x8c,0x3,0x0           mLED_4_On();                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000ad8   dfc3     RCALL     0xa60                  while(!Switch3IsPressed());                                              C:\EC_Mouse_Week_2\PIC\user\user.c
000ada   0900     IORLW     0x0                                                                                             
000adc   e101     BNZ       0xae0                                                                                           
000ade   d7fc     BRA       0xad8                                                                                           
000ae0   968c     BCF       0x8c,0x3,0x0           mLED_4_Off();                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                                   //RS-232 Setup                                                           C:\EC_Mouse_Week_2\PIC\user\user.c
000ae2   6ac6     CLRF      0xc6,0x0               SSPCON1 = 0;        // Make sure SPI is disabled                         C:\EC_Mouse_Week_2\PIC\user\user.c
000ae4   8e94     BSF       0x94,0x7,0x0           TRISCbits.TRISC7=1; // RX                                                C:\EC_Mouse_Week_2\PIC\user\user.c
000ae6   9c94     BCF       0x94,0x6,0x0           TRISCbits.TRISC6=0; // TX                                                C:\EC_Mouse_Week_2\PIC\user\user.c
000ae8   0e71     MOVLW     0x71                   SPBRG = 0x71;                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
000aea   6eaf     MOVWF     0xaf,0x0                                                                                        
000aec   0e02     MOVLW     0x2                    SPBRGH = 0x02;      // 0x0271 for 48MHz -> 19200 baud                    C:\EC_Mouse_Week_2\PIC\user\user.c
000aee   6eb0     MOVWF     0xb0,0x0                                                                                        
000af0   0e24     MOVLW     0x24                   TXSTA = 0x24;       // TX enable BRGH=1                                  C:\EC_Mouse_Week_2\PIC\user\user.c
000af2   6eac     MOVWF     0xac,0x0                                                                                        
000af4   0e90     MOVLW     0x90                   RCSTA = 0x90;       // continuous RX                                     C:\EC_Mouse_Week_2\PIC\user\user.c
000af6   6eab     MOVWF     0xab,0x0                                                                                        
000af8   0e08     MOVLW     0x8                    BAUDCON = 0x08;     // BRG16 = 1                                         C:\EC_Mouse_Week_2\PIC\user\user.c
000afa   6eb8     MOVWF     0xb8,0x0                                                                                        
000afc   50ae     MOVF      0xae,0x0,0x0           temp = RCREG;       // Empty buffer                                      C:\EC_Mouse_Week_2\PIC\user\user.c
000afe   6edf     MOVWF     0xdf,0x0                                                                                        
000b00   50ae     MOVF      0xae,0x0,0x0           temp = RCREG;       // Empty buffer                                      C:\EC_Mouse_Week_2\PIC\user\user.c
000b02   6edf     MOVWF     0xdf,0x0                                                                                        
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                                   //RS-232 Tx & Rx Tests                                                   C:\EC_Mouse_Week_2\PIC\user\user.c
000b04   dfad     RCALL     0xa60                  while(!Switch3IsPressed());                                              C:\EC_Mouse_Week_2\PIC\user\user.c
000b06   0900     IORLW     0x0                                                                                             
000b08   e101     BNZ       0xb0c                                                                                           
000b0a   d7fc     BRA       0xb04                                                                                           
000b0c   0e52     MOVLW     0x52                   TXbyte('R');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000b0e   6ee6     MOVWF     0xe6,0x0                                                                                        
000b10   dfba     RCALL     0xa86                                                                                           
000b12   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b14   0e53     MOVLW     0x53                   TXbyte('S');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000b16   6ee6     MOVWF     0xe6,0x0                                                                                        
000b18   dfb6     RCALL     0xa86                                                                                           
000b1a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b1c   0e2d     MOVLW     0x2d                   TXbyte('-');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000b1e   6ee6     MOVWF     0xe6,0x0                                                                                        
000b20   dfb2     RCALL     0xa86                                                                                           
000b22   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b24   0e32     MOVLW     0x32                   TXbyte('2');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000b26   6ee6     MOVWF     0xe6,0x0                                                                                        
000b28   dfae     RCALL     0xa86                                                                                           
000b2a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b2c   0e33     MOVLW     0x33                   TXbyte('3');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000b2e   6ee6     MOVWF     0xe6,0x0                                                                                        
000b30   dfaa     RCALL     0xa86                                                                                           
000b32   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b34   0e32     MOVLW     0x32                   TXbyte('2');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000b36   6ee6     MOVWF     0xe6,0x0                                                                                        
000b38   dfa6     RCALL     0xa86                                                                                           
000b3a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b3c   0e20     MOVLW     0x20                   TXbyte(' ');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000b3e   6ee6     MOVWF     0xe6,0x0                                                                                        
000b40   dfa2     RCALL     0xa86                                                                                           
000b42   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b44   0e54     MOVLW     0x54                   TXbyte('T');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000b46   6ee6     MOVWF     0xe6,0x0                                                                                        
000b48   df9e     RCALL     0xa86                                                                                           
000b4a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b4c   0e58     MOVLW     0x58                   TXbyte('X');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000b4e   6ee6     MOVWF     0xe6,0x0                                                                                        
000b50   df9a     RCALL     0xa86                                                                                           
000b52   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b54   0e20     MOVLW     0x20                   TXbyte(' ');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000b56   6ee6     MOVWF     0xe6,0x0                                                                                        
000b58   df96     RCALL     0xa86                                                                                           
000b5a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b5c   0e54     MOVLW     0x54                   TXbyte('T');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000b5e   6ee6     MOVWF     0xe6,0x0                                                                                        
000b60   df92     RCALL     0xa86                                                                                           
000b62   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b64   0e65     MOVLW     0x65                   TXbyte('e');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000b66   6ee6     MOVWF     0xe6,0x0                                                                                        
000b68   df8e     RCALL     0xa86                                                                                           
000b6a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b6c   0e73     MOVLW     0x73                   TXbyte('s');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000b6e   6ee6     MOVWF     0xe6,0x0                                                                                        
000b70   df8a     RCALL     0xa86                                                                                           
000b72   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b74   0e74     MOVLW     0x74                   TXbyte('t');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000b76   6ee6     MOVWF     0xe6,0x0                                                                                        
000b78   df86     RCALL     0xa86                                                                                           
000b7a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b7c   0e20     MOVLW     0x20                   TXbyte(' ');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000b7e   6ee6     MOVWF     0xe6,0x0                                                                                        
000b80   df82     RCALL     0xa86                                                                                           
000b82   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b84   0e4f     MOVLW     0x4f                   TXbyte('O');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000b86   6ee6     MOVWF     0xe6,0x0                                                                                        
000b88   df7e     RCALL     0xa86                                                                                           
000b8a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b8c   0e4b     MOVLW     0x4b                   TXbyte('K');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000b8e   6ee6     MOVWF     0xe6,0x0                                                                                        
000b90   df7a     RCALL     0xa86                                                                                           
000b92   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b94   0e2c     MOVLW     0x2c                   TXbyte(',');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000b96   6ee6     MOVWF     0xe6,0x0                                                                                        
000b98   df76     RCALL     0xa86                                                                                           
000b9a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b9c   0e20     MOVLW     0x20                   TXbyte(' ');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000b9e   6ee6     MOVWF     0xe6,0x0                                                                                        
000ba0   df72     RCALL     0xa86                                                                                           
000ba2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000ba4   0e50     MOVLW     0x50                   TXbyte('P');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000ba6   6ee6     MOVWF     0xe6,0x0                                                                                        
000ba8   df6e     RCALL     0xa86                                                                                           
000baa   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bac   0e72     MOVLW     0x72                   TXbyte('r');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000bae   6ee6     MOVWF     0xe6,0x0                                                                                        
000bb0   df6a     RCALL     0xa86                                                                                           
000bb2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bb4   0e65     MOVLW     0x65                   TXbyte('e');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000bb6   6ee6     MOVWF     0xe6,0x0                                                                                        
000bb8   df66     RCALL     0xa86                                                                                           
000bba   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bbc   0e73     MOVLW     0x73                   TXbyte('s');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000bbe   6ee6     MOVWF     0xe6,0x0                                                                                        
000bc0   df62     RCALL     0xa86                                                                                           
000bc2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bc4   0e73     MOVLW     0x73                   TXbyte('s');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000bc6   6ee6     MOVWF     0xe6,0x0                                                                                        
000bc8   df5e     RCALL     0xa86                                                                                           
000bca   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bcc   0e20     MOVLW     0x20                   TXbyte(' ');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000bce   6ee6     MOVWF     0xe6,0x0                                                                                        
000bd0   df5a     RCALL     0xa86                                                                                           
000bd2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bd4   0e22     MOVLW     0x22                   TXbyte('"');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000bd6   6ee6     MOVWF     0xe6,0x0                                                                                        
000bd8   df56     RCALL     0xa86                                                                                           
000bda   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bdc   0e72     MOVLW     0x72                   TXbyte('r');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000bde   6ee6     MOVWF     0xe6,0x0                                                                                        
000be0   df52     RCALL     0xa86                                                                                           
000be2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000be4   0e22     MOVLW     0x22                   TXbyte('"');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000be6   6ee6     MOVWF     0xe6,0x0                                                                                        
000be8   df4e     RCALL     0xa86                                                                                           
000bea   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bec   0e2c     MOVLW     0x2c                   TXbyte(',');                                                             C:\EC_Mouse_Week_2\PIC\user\user.c
000bee   6ee6     MOVWF     0xe6,0x0                                                                                        
000bf0   df4a     RCALL     0xa86                                                                                           
000bf2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bf4   aa9e     BTFSS     0x9e,0x5,0x0           while(PIR1bits.RCIF==0);        //Wait for data from RS232               C:\EC_Mouse_Week_2\PIC\user\user.c
000bf6   d7fe     BRA       0xbf4                                                                                           
000bf8   0e72     MOVLW     0x72                   if(RCREG == 'r')                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
000bfa   5cae     SUBWF     0xae,0x0,0x0                                                                                    
000bfc   e12c     BNZ       0xc56                                                                                           
                                                   {                                                                        C:\EC_Mouse_Week_2\PIC\user\user.c
000bfe   0e20     MOVLW     0x20                       TXbyte(' ');                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
000c00   6ee6     MOVWF     0xe6,0x0                                                                                        
000c02   df41     RCALL     0xa86                                                                                           
000c04   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c06   0e52     MOVLW     0x52                       TXbyte('R');                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
000c08   6ee6     MOVWF     0xe6,0x0                                                                                        
000c0a   df3d     RCALL     0xa86                                                                                           
000c0c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c0e   0e58     MOVLW     0x58                       TXbyte('X');                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
000c10   6ee6     MOVWF     0xe6,0x0                                                                                        
000c12   df39     RCALL     0xa86                                                                                           
000c14   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c16   0e20     MOVLW     0x20                       TXbyte(' ');                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
000c18   6ee6     MOVWF     0xe6,0x0                                                                                        
000c1a   df35     RCALL     0xa86                                                                                           
000c1c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c1e   0e54     MOVLW     0x54                       TXbyte('T');                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
000c20   6ee6     MOVWF     0xe6,0x0                                                                                        
000c22   df31     RCALL     0xa86                                                                                           
000c24   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c26   0e65     MOVLW     0x65                       TXbyte('e');                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
000c28   6ee6     MOVWF     0xe6,0x0                                                                                        
000c2a   df2d     RCALL     0xa86                                                                                           
000c2c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c2e   0e73     MOVLW     0x73                       TXbyte('s');                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
000c30   6ee6     MOVWF     0xe6,0x0                                                                                        
000c32   df29     RCALL     0xa86                                                                                           
000c34   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c36   0e74     MOVLW     0x74                       TXbyte('t');                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
000c38   6ee6     MOVWF     0xe6,0x0                                                                                        
000c3a   df25     RCALL     0xa86                                                                                           
000c3c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c3e   0e20     MOVLW     0x20                       TXbyte(' ');                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
000c40   6ee6     MOVWF     0xe6,0x0                                                                                        
000c42   df21     RCALL     0xa86                                                                                           
000c44   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c46   0e4f     MOVLW     0x4f                       TXbyte('O');                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
000c48   6ee6     MOVWF     0xe6,0x0                                                                                        
000c4a   df1d     RCALL     0xa86                                                                                           
000c4c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c4e   0e4b     MOVLW     0x4b                       TXbyte('K');                                                         C:\EC_Mouse_Week_2\PIC\user\user.c
000c50   6ee6     MOVWF     0xe6,0x0                                                                                        
000c52   df19     RCALL     0xa86                                                                                           
000c54   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                   }//end if                                                                C:\EC_Mouse_Week_2\PIC\user\user.c
000c56   ddf0     RCALL     0x838                  UserInit();                     //Re-initialize default user fw          C:\EC_Mouse_Week_2\PIC\user\user.c
                                                   //Test phase 1 done                                                      C:\EC_Mouse_Week_2\PIC\user\user.c
                                               }//end if                                                                    C:\EC_Mouse_Week_2\PIC\user\user.c
000c58   52e5     MOVF      0xe5,0x1,0x0   }//end PICDEMFSUSBDemoBoardTest()                                                C:\EC_Mouse_Week_2\PIC\user\user.c
000c5a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c5c   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000c5e   ffd9                                                                                                               
000c60   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\user.c
                                           /** EOF user.c ***************************************************************/  C:\EC_Mouse_Week_2\PIC\user\user.c
                                           /*********************************************************************           C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                Thermo Sensor with SPI(TM) Interface                           C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *********************************************************************           C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * FileName:        temperature.c                                                C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Dependencies:    See INCLUDES section below                                   C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Processor:       PIC18                                                        C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Compiler:        C18 2.30.01+                                                 C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Company:         Microchip Technology, Inc.                                   C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Software License Agreement                                                    C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * civil liability for the breach of the terms and conditions of this            C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * license.                                                                      C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Author               Date        Comment                                      C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            ********************************************************************/           C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           /** I N C L U D E S **********************************************************/  C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           #include <p18cxxx.h>                                                             C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           #include "system\typedefs.h"                                                     C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           #include <spi.h>                                                                 C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           #include "io_cfg.h"                                                              C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           #include "user\temperature.h"                                                    C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           /** V A R I A B L E S ********************************************************/  C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           #pragma udata                                                                    C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           WORD temperature;           // Raw data format                                   C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           char tempString[10];        // Buffer for storing data in ASCII format           C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           #pragma code                                                                     C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Function:        void InitTempSensor(void)                                    C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Overview:        Initializes SPI interface & chip select line                 C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           void InitTempSensor(void)                                                        C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\user\temperature.c
001220   848a     BSF       0x8a,0x2,0x0       cs_temp_sensor = 1;                                                          C:\EC_Mouse_Week_2\PIC\user\temperature.c
001222   9493     BCF       0x93,0x2,0x0       tris_cs_temp_sensor = OUTPUT_PIN;                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
001224   6ae6     CLRF      0xe6,0x0           OpenSPI(SPI_FOSC_64, MODE_11, SMPMID);                                       C:\EC_Mouse_Week_2\PIC\user\temperature.c
001226   0e03     MOVLW     0x3                                                                                             
001228   6ee6     MOVWF     0xe6,0x0                                                                                        
00122a   0e02     MOVLW     0x2                                                                                             
00122c   6ee6     MOVWF     0xe6,0x0                                                                                        
00122e   ec0a     CALL      0x1814,0x0                                                                                      
001230   f00c                                                                                                               
001232   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001234   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001236   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                               // Initialize readable values - default to room temperature                  C:\EC_Mouse_Week_2\PIC\user\temperature.c
001238   0100     MOVLB     0x0                temperature._word = 0x0C87;       // 25 degree celsius                       C:\EC_Mouse_Week_2\PIC\user\temperature.c
00123a   0e87     MOVLW     0x87                                                                                            
00123c   6fa3     MOVWF     0xa3,0x1                                                                                        
00123e   0e0c     MOVLW     0xc                                                                                             
001240   6fa4     MOVWF     0xa4,0x1                                                                                        
001242   ef34     GOTO      0x1268             UpdateCelsiusASCII();                                                        C:\EC_Mouse_Week_2\PIC\user\temperature.c
001244   f009                                                                                                               
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           }//end InitTempSensor                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Function:        void AcquireTemperature(void)                                C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Overview:        None                                                         C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           BOOL AcquireTemperature(void)                                                    C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\user\temperature.c
001246   948a     BCF       0x8a,0x2,0x0       cs_temp_sensor = 0;                                                          C:\EC_Mouse_Week_2\PIC\user\temperature.c
001248   ec67     CALL      0x18ce,0x0         MSB(temperature) = ReadSPI();                                                C:\EC_Mouse_Week_2\PIC\user\temperature.c
00124a   f00c                                                                                                               
00124c   0100     MOVLB     0x0                                                                                             
00124e   6fa4     MOVWF     0xa4,0x1                                                                                        
001250   ec67     CALL      0x18ce,0x0         LSB(temperature) = ReadSPI();                                                C:\EC_Mouse_Week_2\PIC\user\temperature.c
001252   f00c                                                                                                               
001254   0100     MOVLB     0x0                                                                                             
001256   6fa3     MOVWF     0xa3,0x1                                                                                        
001258   848a     BSF       0x8a,0x2,0x0       cs_temp_sensor = 1;                                                          C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
00125a   b5a3     BTFSC     0xa3,0x2,0x1       if(temperature.LowB.b2 == 0)                                                 C:\EC_Mouse_Week_2\PIC\user\temperature.c
00125c   d002     BRA       0x1262                                                                                          
00125e   0e00     MOVLW     0x0                    return FAIL;                                                             C:\EC_Mouse_Week_2\PIC\user\temperature.c
001260   d002     BRA       0x1266                                                                                          
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
001262   0e01     MOVLW     0x1                return OK;                                                                   C:\EC_Mouse_Week_2\PIC\user\temperature.c
001264   d000     BRA       0x1266                                                                                          
001266   0012     RETURN    0x0            }//end AcquireTemperature                                                        C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Function:        void UpdateCelsiusASCII(void)                                C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Overview:        This routine converts data output to ASCII string            C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\user\temperature.c
001268   cfd9     MOVFF     0xfd9,0xfe6    void UpdateCelsiusASCII(void)                                                    C:\EC_Mouse_Week_2\PIC\user\temperature.c
00126a   ffe6                                                                                                               
00126c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00126e   ffd9                                                                                                               
001270   0e03     MOVLW     0x3                                                                                             
001272   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                               WORD temp;                                                                   C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                               byte i;                                                                      C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
001274   c0a3     MOVFF     0xa3,0x10          temp._word = temperature._word >> 3;                                         C:\EC_Mouse_Week_2\PIC\user\temperature.c
001276   f010                                                                                                               
001278   c0a4     MOVFF     0xa4,0x11                                                                                       
00127a   f011                                                                                                               
00127c   90d8     BCF       0xd8,0x0,0x0                                                                                    
00127e   3211     RRCF      0x11,0x1,0x0                                                                                    
001280   3210     RRCF      0x10,0x1,0x0                                                                                    
001282   04e8     DECF      0xe8,0x0,0x0                                                                                    
001284   e1fb     BNZ       0x127c                                                                                          
001286   c010     MOVFF     0x10,0xfde                                                                                      
001288   ffde                                                                                                               
00128a   c011     MOVFF     0x11,0xfdd                                                                                      
00128c   ffdd                                                                                                               
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
00128e   50d9     MOVF      0xd9,0x0,0x0       if(temp.HighB.b4 == 0)                                                       C:\EC_Mouse_Week_2\PIC\user\temperature.c
001290   0f01     ADDLW     0x1                                                                                             
001292   6ee9     MOVWF     0xe9,0x0                                                                                        
001294   cfda     MOVFF     0xfda,0xfea                                                                                     
001296   ffea                                                                                                               
001298   50ef     MOVF      0xef,0x0,0x0                                                                                    
00129a   0b10     ANDLW     0x10                                                                                            
00129c   e108     BNZ       0x12ae                                                                                          
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
00129e   0e01     MOVLW     0x1                    temp.HighB._byte &= 0b00011111;                                          C:\EC_Mouse_Week_2\PIC\user\temperature.c
0012a0   9adb     BCF       0xdb,0x5,0x0                                                                                    
0012a2   9cdb     BCF       0xdb,0x6,0x0                                                                                    
0012a4   9edb     BCF       0xdb,0x7,0x0                                                                                    
0012a6   0100     MOVLB     0x0                    tempString[0] = '+';                                                     C:\EC_Mouse_Week_2\PIC\user\temperature.c
0012a8   0e2b     MOVLW     0x2b                                                                                            
0012aa   6fa5     MOVWF     0xa5,0x1                                                                                        
                                               }                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
0012ac   d016     BRA       0x12da             else                                                                         C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
0012ae   0e01     MOVLW     0x1                    temp.HighB._byte |= 0b11100000;                                          C:\EC_Mouse_Week_2\PIC\user\temperature.c
0012b0   8adb     BSF       0xdb,0x5,0x0                                                                                    
0012b2   8cdb     BSF       0xdb,0x6,0x0                                                                                    
0012b4   8edb     BSF       0xdb,0x7,0x0                                                                                    
0012b6   0100     MOVLB     0x0                    tempString[0] = '-';                                                     C:\EC_Mouse_Week_2\PIC\user\temperature.c
0012b8   0e2d     MOVLW     0x2d                                                                                            
0012ba   6fa5     MOVWF     0xa5,0x1                                                                                        
0012bc   cfde     MOVFF     0xfde,0x10             temp._word = temp._word ^ 0xFFFF;   // Negate                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
0012be   f010                                                                                                               
0012c0   cfdd     MOVFF     0xfdd,0x11                                                                                      
0012c2   f011                                                                                                               
0012c4   0eff     MOVLW     0xff                                                                                            
0012c6   1a10     XORWF     0x10,0x1,0x0                                                                                    
0012c8   1a11     XORWF     0x11,0x1,0x0                                                                                    
0012ca   c010     MOVFF     0x10,0xfde                                                                                      
0012cc   ffde                                                                                                               
0012ce   c011     MOVFF     0x11,0xfdd                                                                                      
0012d0   ffdd                                                                                                               
0012d2   2adf     INCF      0xdf,0x1,0x0           temp._word++;                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
0012d4   0e01     MOVLW     0x1                                                                                             
0012d6   e301     BNC       0x12da                                                                                          
0012d8   2adb     INCF      0xdb,0x1,0x0                                                                                    
                                               }//end if                                                                    C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
0012da   cfde     MOVFF     0xfde,0x10         temp._word = (temp._word*10U) >> 4;     // Turn into celsius xx.x            C:\EC_Mouse_Week_2\PIC\user\temperature.c
0012dc   f010                                                                                                               
0012de   cfdd     MOVFF     0xfdd,0x11                                                                                      
0012e0   f011                                                                                                               
0012e2   0e0a     MOVLW     0xa                                                                                             
0012e4   0211     MULWF     0x11,0x0                                                                                        
0012e6   cff3     MOVFF     0xff3,0x11                                                                                      
0012e8   f011                                                                                                               
0012ea   0210     MULWF     0x10,0x0                                                                                        
0012ec   cff3     MOVFF     0xff3,0x10                                                                                      
0012ee   f010                                                                                                               
0012f0   50f4     MOVF      0xf4,0x0,0x0                                                                                    
0012f2   2611     ADDWF     0x11,0x1,0x0                                                                                    
0012f4   0e04     MOVLW     0x4                                                                                             
0012f6   90d8     BCF       0xd8,0x0,0x0                                                                                    
0012f8   3211     RRCF      0x11,0x1,0x0                                                                                    
0012fa   3210     RRCF      0x10,0x1,0x0                                                                                    
0012fc   04e8     DECF      0xe8,0x0,0x0                                                                                    
0012fe   e1fb     BNZ       0x12f6                                                                                          
001300   c010     MOVFF     0x10,0xfde                                                                                      
001302   ffde                                                                                                               
001304   c011     MOVFF     0x11,0xfdd                                                                                      
001306   ffdd                                                                                                               
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                               /* Populate string */                                                        C:\EC_Mouse_Week_2\PIC\user\temperature.c
001308   0e04     MOVLW     0x4                for(i=4;i>0;i--)                                                             C:\EC_Mouse_Week_2\PIC\user\temperature.c
00130a   6ef3     MOVWF     0xf3,0x0                                                                                        
00130c   0e02     MOVLW     0x2                                                                                             
00130e   cff3     MOVFF     0xff3,0xfdb                                                                                     
001310   ffdb                                                                                                               
001312   50db     MOVF      0xdb,0x0,0x0                                                                                    
001314   0800     SUBLW     0x0                                                                                             
001316   e233     BC        0x137e                                                                                          
001378   0e02     MOVLW     0x2                                                                                             
00137a   06db     DECF      0xdb,0x1,0x0                                                                                    
00137c   d7ca     BRA       0x1312                                                                                          
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
001318   cfde     MOVFF     0xfde,0x10             tempString[i] = (((char)(temp._word % 10)) & 0x0F) | 0x30;               C:\EC_Mouse_Week_2\PIC\user\temperature.c
00131a   f010                                                                                                               
00131c   cfdd     MOVFF     0xfdd,0x11                                                                                      
00131e   f011                                                                                                               
001320   0e0a     MOVLW     0xa                                                                                             
001322   6e0b     MOVWF     0xb,0x0                                                                                         
001324   6a0c     CLRF      0xc,0x0                                                                                         
001326   c010     MOVFF     0x10,0x6                                                                                        
001328   f006                                                                                                               
00132a   c011     MOVFF     0x11,0x7                                                                                        
00132c   f007                                                                                                               
00132e   ec3c     CALL      0x1878,0x0                                                                                      
001330   f00c                                                                                                               
001332   c002     MOVFF     0x2,0x10                                                                                        
001334   f010                                                                                                               
001336   c003     MOVFF     0x3,0x11                                                                                        
001338   f011                                                                                                               
00133a   0e0f     MOVLW     0xf                                                                                             
00133c   1410     ANDWF     0x10,0x0,0x0                                                                                    
00133e   0930     IORLW     0x30                                                                                            
001340   6ee6     MOVWF     0xe6,0x0                                                                                        
001342   0e02     MOVLW     0x2                                                                                             
001344   50db     MOVF      0xdb,0x0,0x0                                                                                    
001346   6aea     CLRF      0xea,0x0                                                                                        
001348   0fa5     ADDLW     0xa5                                                                                            
00134a   6ee9     MOVWF     0xe9,0x0                                                                                        
00134c   0e00     MOVLW     0x0                                                                                             
00134e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001350   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001352   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001354   6eef     MOVWF     0xef,0x0                                                                                        
001356   cfd9     MOVFF     0xfd9,0xfe9            temp._word /= 10;                                                        C:\EC_Mouse_Week_2\PIC\user\temperature.c
001358   ffe9                                                                                                               
00135a   cfda     MOVFF     0xfda,0xfea                                                                                     
00135c   ffea                                                                                                               
00135e   0e0a     MOVLW     0xa                                                                                             
001360   6e0b     MOVWF     0xb,0x0                                                                                         
001362   6a0c     CLRF      0xc,0x0                                                                                         
001364   cfee     MOVFF     0xfee,0x6                                                                                       
001366   f006                                                                                                               
001368   cfed     MOVFF     0xfed,0x7                                                                                       
00136a   f007                                                                                                               
00136c   ec3c     CALL      0x1878,0x0                                                                                      
00136e   f00c                                                                                                               
001370   c006     MOVFF     0x6,0xfee                                                                                       
001372   ffee                                                                                                               
001374   c007     MOVFF     0x7,0xfed                                                                                       
001376   ffed                                                                                                               
                                               }//end for                                                                   C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                               /* Turn leading zeros into spaces */                                         C:\EC_Mouse_Week_2\PIC\user\temperature.c
00137e   0e30     MOVLW     0x30               if(tempString[1] == '0')                                                     C:\EC_Mouse_Week_2\PIC\user\temperature.c
001380   0100     MOVLB     0x0                                                                                             
001382   5da6     SUBWF     0xa6,0x0,0x1                                                                                    
001384   e107     BNZ       0x1394                                                                                          
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
001386   0e20     MOVLW     0x20                   tempString[1] = ' ';                                                     C:\EC_Mouse_Week_2\PIC\user\temperature.c
001388   6fa6     MOVWF     0xa6,0x1                                                                                        
00138a   0e30     MOVLW     0x30                   if(tempString[2] == '0')                                                 C:\EC_Mouse_Week_2\PIC\user\temperature.c
00138c   5da7     SUBWF     0xa7,0x0,0x1                                                                                    
00138e   e102     BNZ       0x1394                                                                                          
001390   0e20     MOVLW     0x20                       tempString[2] = ' ';                                                 C:\EC_Mouse_Week_2\PIC\user\temperature.c
001392   6fa7     MOVWF     0xa7,0x1                                                                                        
                                               }//end if                                                                    C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                               /* Adjust decimal digit */                                                   C:\EC_Mouse_Week_2\PIC\user\temperature.c
001394   c0a9     MOVFF     0xa9,0xaa          tempString[5] = tempString[4];                                               C:\EC_Mouse_Week_2\PIC\user\temperature.c
001396   f0aa                                                                                                               
001398   0e2e     MOVLW     0x2e               tempString[4]='.';                                                           C:\EC_Mouse_Week_2\PIC\user\temperature.c
00139a   6fa9     MOVWF     0xa9,0x1                                                                                        
00139c   0ef8     MOVLW     0xf8               tempString[6]=0xF8;     // Degree symbol                                     C:\EC_Mouse_Week_2\PIC\user\temperature.c
00139e   6fab     MOVWF     0xab,0x1                                                                                        
0013a0   0e43     MOVLW     0x43               tempString[7]='C';                                                           C:\EC_Mouse_Week_2\PIC\user\temperature.c
0013a2   6fac     MOVWF     0xac,0x1                                                                                        
0013a4   0e0d     MOVLW     0xd                tempString[8]='\r';                                                          C:\EC_Mouse_Week_2\PIC\user\temperature.c
0013a6   6fad     MOVWF     0xad,0x1                                                                                        
0013a8   6bae     CLRF      0xae,0x1           tempString[9]=0x00;     // Null-Terminated                                   C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
0013aa   0e03     MOVLW     0x3            }//end UpdateCelsiusASCII                                                        C:\EC_Mouse_Week_2\PIC\user\temperature.c
0013ac   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
0013ae   e202     BC        0x13b4                                                                                          
0013b0   6ae1     CLRF      0xe1,0x0                                                                                        
0013b2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0013b4   6ee1     MOVWF     0xe1,0x0                                                                                        
0013b6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0013b8   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0013ba   ffd9                                                                                                               
0013bc   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           /** EOF temperature.c ********************************************************/  C:\EC_Mouse_Week_2\PIC\user\temperature.c
                                           /*********************************************************************           C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *             Microchip USB C18 Firmware -  Generic                             C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *********************************************************************           C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * FileName:        usbgen.c                                                     C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Dependencies:    See INCLUDES section below                                   C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Processor:       PIC18                                                        C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Compiler:        C18 2.30.01+                                                 C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Company:         Microchip Technology, Inc.                                   C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Software License Agreement                                                    C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * civil liability for the breach of the terms and conditions of this            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * license.                                                                      C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Author               Date        Comment                                      C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            ********************************************************************/           C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           /** I N C L U D E S **********************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           #include <p18cxxx.h>                                                             C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           #include "system\typedefs.h"                                                     C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           #include "system\usb\usb.h"                                                      C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           #ifdef USB_USE_GEN                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           /** V A R I A B L E S ********************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           #pragma udata                                                                    C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           byte usbgen_rx_len;                                                              C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           #pragma code                                                                     C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           /** U S E R  A P I ***********************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Function:        void USBGenInitEP(void)                                      C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * PreCondition:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Input:           None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Overview:        USBGenInitEP initializes generic endpoints, buffer           C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  descriptors, internal state-machine, and variables.          C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  It should be called after the USB host has sent out a        C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  SET_CONFIGURATION request.                                   C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  See USBStdSetCfgHandler() in usb9.c for examples.            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           void USBGenInitEP(void)                                                          C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
001536   0100     MOVLB     0x0                usbgen_rx_len = 0;                                                           C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
001538   6bc9     CLRF      0xc9,0x1                                                                                        
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
00153a   0e1e     MOVLW     0x1e               USBGEN_UEP = EP_OUT_IN|HSHK_EN;             // Enable 2 data pipes           C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
00153c   6e71     MOVWF     0x71,0x0                                                                                        
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                               /*                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                * Do not have to init Cnt of IN pipes here.                                 C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                * Reason:  Number of bytes to send to the host                              C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                *          varies from one transaction to                                   C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                *          another. Cnt should equal the exact                              C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                *          number of bytes to transmit for                                  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                *          a given IN transaction.                                          C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                *          This number of bytes will only                                   C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                *          be known right before the data is                                C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                *          sent.                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                */                                                                          C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
00153e   0104     MOVLB     0x4                USBGEN_BD_OUT.Cnt = sizeof(usbgen_out);     // Set buffer size               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
001540   0e40     MOVLW     0x40                                                                                            
001542   6f09     MOVWF     0x9,0x1                                                                                         
001544   0e28     MOVLW     0x28               USBGEN_BD_OUT.ADR = (byte*)&usbgen_out;     // Set buffer address            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
001546   6f0a     MOVWF     0xa,0x1                                                                                         
001548   0e04     MOVLW     0x4                                                                                             
00154a   6f0b     MOVWF     0xb,0x1                                                                                         
00154c   0e88     MOVLW     0x88               USBGEN_BD_OUT.Stat._byte = _USIE|_DAT0|_DTSEN;// Set status                  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
00154e   6f08     MOVWF     0x8,0x1                                                                                         
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
001550   0104     MOVLB     0x4                USBGEN_BD_IN.ADR = (byte*)&usbgen_in;      // Set buffer address             C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
001552   0e68     MOVLW     0x68                                                                                            
001554   6f0e     MOVWF     0xe,0x1                                                                                         
001556   0e04     MOVLW     0x4                                                                                             
001558   6f0f     MOVWF     0xf,0x1                                                                                         
00155a   0e40     MOVLW     0x40               USBGEN_BD_IN.Stat._byte = _UCPU|_DAT1;      // Set buffer status             C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
00155c   6f0c     MOVWF     0xc,0x1                                                                                         
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
00155e   0012     RETURN    0x0            }//end USBGenInitEP                                                              C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Function:        void USBGenWrite(byte *buffer, byte len)                     C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * PreCondition:    mUSBGenTxIsBusy() must return false.                         C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  Value of 'len' must be equal to or smaller than              C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  USBGEN_EP_SIZE                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  For an interrupt/bulk endpoint, the largest buffer size is   C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  64 bytes.                                                    C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Input:           buffer  : Pointer to the starting location of data bytes     C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  len     : Number of bytes to be transferred                  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Output:          None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Side Effects:    None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Overview:        Use this macro to transfer data located in data memory.      C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  Remember: mUSBGenTxIsBusy() must return false before user    C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  can call this function.                                      C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  Unexpected behavior will occur if this function is called    C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  when mUSBGenTxIsBusy() != 0                                  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  Typical Usage:                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  if(!mUSBGenTxIsBusy())                                       C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                      USBGenWrite(buffer, 3);                                  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Note:            None                                                         C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
001560   cfd9     MOVFF     0xfd9,0xfe6    void USBGenWrite(byte *buffer, byte len)                                         C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
001562   ffe6                                                                                                               
001564   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001566   ffd9                                                                                                               
001568   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           	byte i;                                                                         C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           	                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                               /*                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                * Value of len should be equal to or smaller than USBGEN_EP_SIZE.           C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                * This check forces the value of len to meet the precondition.              C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                */                                                                          C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
00156a   0efc     MOVLW     0xfc           	if(len > USBGEN_EP_SIZE)                                                        C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
00156c   50db     MOVF      0xdb,0x0,0x0                                                                                    
00156e   0840     SUBLW     0x40                                                                                            
001570   e205     BC        0x157c                                                                                          
001572   0e40     MOVLW     0x40           	    len = USBGEN_EP_SIZE;                                                       C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
001574   6ef3     MOVWF     0xf3,0x0                                                                                        
001576   0efc     MOVLW     0xfc                                                                                            
001578   cff3     MOVFF     0xff3,0xfdb                                                                                     
00157a   ffdb                                                                                                               
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                              /*                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                               * Copy data from user's buffer to dual-ram buffer                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                               */                                                                           C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
00157c   6adf     CLRF      0xdf,0x0           for (i = 0; i < len; i++)                                                    C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
00157e   0efc     MOVLW     0xfc                                                                                            
001580   50db     MOVF      0xdb,0x0,0x0                                                                                    
001582   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
001584   e219     BC        0x15b8                                                                                          
0015b4   2adf     INCF      0xdf,0x1,0x0                                                                                    
0015b6   d7e3     BRA       0x157e                                                                                          
001586   50df     MOVF      0xdf,0x0,0x0       	usbgen_in[i] = buffer[i];                                                   C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
001588   6ee7     MOVWF     0xe7,0x0                                                                                        
00158a   0efd     MOVLW     0xfd                                                                                            
00158c   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00158e   ffe9                                                                                                               
001590   0efe     MOVLW     0xfe                                                                                            
001592   cfdb     MOVFF     0xfdb,0xfea                                                                                     
001594   ffea                                                                                                               
001596   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001598   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00159a   0e00     MOVLW     0x0                                                                                             
00159c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00159e   50ef     MOVF      0xef,0x0,0x0                                                                                    
0015a0   6ee6     MOVWF     0xe6,0x0                                                                                        
0015a2   50df     MOVF      0xdf,0x0,0x0                                                                                    
0015a4   6aea     CLRF      0xea,0x0                                                                                        
0015a6   0f68     ADDLW     0x68                                                                                            
0015a8   6ee9     MOVWF     0xe9,0x0                                                                                        
0015aa   0e04     MOVLW     0x4                                                                                             
0015ac   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0015ae   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0015b0   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0015b2   6eef     MOVWF     0xef,0x0                                                                                        
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
0015b8   0efc     MOVLW     0xfc               USBGEN_BD_IN.Cnt = len;                                                      C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
0015ba   cfdb     MOVFF     0xfdb,0x40d                                                                                     
0015bc   f40d                                                                                                               
0015be   0e40     MOVLW     0x40               mUSBBufferReady(USBGEN_BD_IN);                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
0015c0   0104     MOVLB     0x4                                                                                             
0015c2   170c     ANDWF     0xc,0x1,0x1                                                                                     
0015c4   7d0c     BTG       0xc,0x6,0x1                                                                                     
0015c6   0e88     MOVLW     0x88                                                                                            
0015c8   130c     IORWF     0xc,0x1,0x1                                                                                     
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
0015ca   52e5     MOVF      0xe5,0x1,0x0   }//end USBGenWrite                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
0015cc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0015ce   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0015d0   ffd9                                                                                                               
0015d2   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           /******************************************************************************  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Function:        byte USBGenRead(byte *buffer, byte len)                      C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * PreCondition:    Value of input argument 'len' should be smaller than the     C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  maximum endpoint size responsible for receiving report       C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  data from USB host for HID class.                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  Input argument 'buffer' should point to a buffer area that   C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  is bigger or equal to the size specified by 'len'.           C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Input:           buffer  : Pointer to where received bytes are to be stored   C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  len     : The number of bytes expected.                      C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Output:          The number of bytes copied to buffer.                        C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Side Effects:    Publicly accessible variable usbgen_rx_len is updated        C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  with the number of bytes copied to buffer.                   C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  Once USBGenRead is called, subsequent retrieval of           C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  usbgen_rx_len can be done by calling macro                   C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  mUSBGenGetRxLength().                                        C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Overview:        USBGenRead copies a string of bytes received through         C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  the OUT endpoint to a user's specified location.             C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  It is a non-blocking function. It does not wait              C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  for data if there is no data available. Instead it returns   C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  '0' to notify the caller that there is no data available.    C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            * Note:            If the actual number of bytes received is larger than the    C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  number of bytes expected (len), only the expected number     C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  of bytes specified will be copied to buffer.                 C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  If the actual number of bytes received is smaller than the   C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  number of bytes expected (len), only the actual number       C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *                  of bytes received will be copied to buffer.                  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                            *****************************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
0015d4   cfd9     MOVFF     0xfd9,0xfe6    byte USBGenRead(byte *buffer, byte len)                                          C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
0015d6   ffe6                                                                                                               
0015d8   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0015da   ffd9                                                                                                               
                                           {                                                                                C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
0015dc   0100     MOVLB     0x0                usbgen_rx_len = 0;                                                           C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
0015de   6bc9     CLRF      0xc9,0x1                                                                                        
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
0015e0   0104     MOVLB     0x4                if(!mUSBGenRxIsBusy())                                                       C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
0015e2   bf08     BTFSC     0x8,0x7,0x1                                                                                     
0015e4   d030     BRA       0x1646                                                                                          
                                               {                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                   /*                                                                       C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                    * Adjust the expected number of bytes to equal                          C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                    * the actual number of bytes received.                                  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                    */                                                                      C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
0015e6   0efc     MOVLW     0xfc                   if(len > USBGEN_BD_OUT.Cnt)                                              C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
0015e8   cfdb     MOVFF     0xfdb,0x10                                                                                      
0015ea   f010                                                                                                               
0015ec   5109     MOVF      0x9,0x0,0x1                                                                                     
0015ee   80d8     BSF       0xd8,0x0,0x0                                                                                    
0015f0   5410     SUBFWB    0x10,0x0,0x0                                                                                    
0015f2   e203     BC        0x15fa                                                                                          
0015f4   0efc     MOVLW     0xfc                       len = USBGEN_BD_OUT.Cnt;                                             C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
0015f6   c409     MOVFF     0x409,0xfdb                                                                                     
0015f8   ffdb                                                                                                               
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                   /*                                                                       C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                    * Copy data from dual-ram buffer to user's buffer                       C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                    */                                                                      C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
0015fa   0100     MOVLB     0x0                    for(usbgen_rx_len = 0; usbgen_rx_len < len; usbgen_rx_len++)             C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
0015fc   6bc9     CLRF      0xc9,0x1                                                                                        
0015fe   0efc     MOVLW     0xfc                                                                                            
001600   50db     MOVF      0xdb,0x0,0x0                                                                                    
001602   5dc9     SUBWF     0xc9,0x0,0x1                                                                                    
001604   e219     BC        0x1638                                                                                          
001634   2bc9     INCF      0xc9,0x1,0x1                                                                                    
001636   d7e3     BRA       0x15fe                                                                                          
001606   51c9     MOVF      0xc9,0x0,0x1               buffer[usbgen_rx_len] = usbgen_out[usbgen_rx_len];                   C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
001608   6aea     CLRF      0xea,0x0                                                                                        
00160a   0f28     ADDLW     0x28                                                                                            
00160c   6ee9     MOVWF     0xe9,0x0                                                                                        
00160e   0e04     MOVLW     0x4                                                                                             
001610   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001612   50ef     MOVF      0xef,0x0,0x0                                                                                    
001614   6ee6     MOVWF     0xe6,0x0                                                                                        
001616   51c9     MOVF      0xc9,0x0,0x1                                                                                    
001618   6ee7     MOVWF     0xe7,0x0                                                                                        
00161a   0efd     MOVLW     0xfd                                                                                            
00161c   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00161e   ffe9                                                                                                               
001620   0efe     MOVLW     0xfe                                                                                            
001622   cfdb     MOVFF     0xfdb,0xfea                                                                                     
001624   ffea                                                                                                               
001626   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001628   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00162a   0e00     MOVLW     0x0                                                                                             
00162c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00162e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001630   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001632   6eef     MOVWF     0xef,0x0                                                                                        
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                   /*                                                                       C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                    * Prepare dual-ram buffer for next OUT transaction                      C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                    */                                                                      C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
001638   0104     MOVLB     0x4                    USBGEN_BD_OUT.Cnt = sizeof(usbgen_out);                                  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
00163a   0e40     MOVLW     0x40                                                                                            
00163c   6f09     MOVWF     0x9,0x1                                                                                         
00163e   1708     ANDWF     0x8,0x1,0x1            mUSBBufferReady(USBGEN_BD_OUT);                                          C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
001640   7d08     BTG       0x8,0x6,0x1                                                                                     
001642   0e88     MOVLW     0x88                                                                                            
001644   1308     IORWF     0x8,0x1,0x1                                                                                     
                                               }//end if                                                                    C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
001646   0100     MOVLB     0x0                return usbgen_rx_len;                                                        C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
001648   51c9     MOVF      0xc9,0x0,0x1                                                                                    
00164a   d000     BRA       0x164c                                                                                          
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
00164c   52e5     MOVF      0xe5,0x1,0x0   }//end USBGenRead                                                                C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
00164e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001650   ffd9                                                                                                               
001652   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           #endif //def USB_USE_GEN                                                         C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                                                                                            C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                           /** EOF usbgen.c *************************************************************/  C:\EC_Mouse_Week_2\PIC\system\usb\class\generic\usbgen.c
                                                   LIST P=18F4550                                                           C:\MCC18\src\traditional\proc\p18F4550.asm
                                                   LIST                                                                     C:\MCC18\src\traditional\proc\p18F4550.asm
                                                   END                                                                      C:\MCC18\src\traditional\proc\p18F4550.asm
                                           /*** Unsigned Integer Division: 16-bit by 16-bit                                 C:\MCC18\src\traditional\math\fxd1616u.c
                                            ***                                                                             C:\MCC18\src\traditional\math\fxd1616u.c
                                            *** Optimized: Dec. 21, 2000                                                    C:\MCC18\src\traditional\math\fxd1616u.c
                                            ***        by: Daniel R. Madill, Quanser Consulting Inc.                        C:\MCC18\src\traditional\math\fxd1616u.c
                                            ***       for: Saved (for the worst case) at least 5*16 = 80 instruction cycles C:\MCC18\src\traditional\math\fxd1616u.c
                                            ***            over the code supplied with MCC18 v1.00.12                       C:\MCC18\src\traditional\math\fxd1616u.c
                                            ***/                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                           void FXD1616U (/*unsigned arg0, unsigned arg1*/)                                 C:\MCC18\src\traditional\math\fxd1616u.c
                                           {                                                                                C:\MCC18\src\traditional\math\fxd1616u.c
                                             // use INDF1 for the counter...                                                C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                                 _asm                                                                       C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                               // REM = 0                                                                   C:\MCC18\src\traditional\math\fxd1616u.c
001878   6a03     CLRF      0x3,0x0            clrf __REMB0, 0                                                              C:\MCC18\src\traditional\math\fxd1616u.c
00187a   6a02     CLRF      0x2,0x0            clrf __REMB1, 0                                                              C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                               // INDF1 = 16                                                                C:\MCC18\src\traditional\math\fxd1616u.c
00187c   0e10     MOVLW     0x10               movlw 16                                                                     C:\MCC18\src\traditional\math\fxd1616u.c
00187e   6ee7     MOVWF     0xe7,0x0           movwf INDF1, 0                                                               C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                               // Clear the carry                                                           C:\MCC18\src\traditional\math\fxd1616u.c
001880   90d8     BCF       0xd8,0x0,0x0   	bcf STATUS, 0, 0                                                                C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                           loop:                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                           	//AARG16 <<= 1; Carry is always clear at this point.                            C:\MCC18\src\traditional\math\fxd1616u.c
001882   3606     RLCF      0x6,0x1,0x0    	rlcf __AARGB1, 1, 0                                                             C:\MCC18\src\traditional\math\fxd1616u.c
001884   3607     RLCF      0x7,0x1,0x0    	rlcf __AARGB0, 1, 0                                                             C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                           	//PROD = (PROD << 1) | (AARG16 >> 16)                                           C:\MCC18\src\traditional\math\fxd1616u.c
001886   3602     RLCF      0x2,0x1,0x0    	rlcf __REMB1, 1, 0                                                              C:\MCC18\src\traditional\math\fxd1616u.c
001888   3603     RLCF      0x3,0x1,0x0    	rlcf __REMB0, 1, 0                                                              C:\MCC18\src\traditional\math\fxd1616u.c
                                           	                                                                                C:\MCC18\src\traditional\math\fxd1616u.c
                                           	//if (PROD >= BARG16)                                                           C:\MCC18\src\traditional\math\fxd1616u.c
00188a   500b     MOVF      0xb,0x0,0x0    	movf __BARGB1, 0, 0                                                             C:\MCC18\src\traditional\math\fxd1616u.c
00188c   5c02     SUBWF     0x2,0x0,0x0    	subwf __REMB1, 0, 0                                                             C:\MCC18\src\traditional\math\fxd1616u.c
00188e   500c     MOVF      0xc,0x0,0x0    	movf __BARGB0, 0, 0                                                             C:\MCC18\src\traditional\math\fxd1616u.c
001890   5803     SUBWFB    0x3,0x0,0x0    	subwfb __REMB0, 0, 0                                                            C:\MCC18\src\traditional\math\fxd1616u.c
001892   e305     BNC       0x189e         	bnc endloop                                                                     C:\MCC18\src\traditional\math\fxd1616u.c
                                               //{                                                                          C:\MCC18\src\traditional\math\fxd1616u.c
                                           	    //PROD -= BARG16;                                                           C:\MCC18\src\traditional\math\fxd1616u.c
001894   500b     MOVF      0xb,0x0,0x0    	    movf __BARGB1, 0, 0                                                         C:\MCC18\src\traditional\math\fxd1616u.c
001896   5e02     SUBWF     0x2,0x1,0x0    	    subwf __REMB1, 1, 0                                                         C:\MCC18\src\traditional\math\fxd1616u.c
001898   500c     MOVF      0xc,0x0,0x0    	    movf __BARGB0, 0, 0                                                         C:\MCC18\src\traditional\math\fxd1616u.c
00189a   5a03     SUBWFB    0x3,0x1,0x0    	    subwfb __REMB0, 1, 0                                                        C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                           	    //++AARG16; Since AARG16 was shift to the left above, the increment will    C:\MCC18\src\traditional\math\fxd1616u.c
                                                   //          simply set the LSbit. Using incf also clears the carry, which C:\MCC18\src\traditional\math\fxd1616u.c
                                                   //          means we don't have to clear the carry at the top of the loop. C:\MCC18\src\traditional\math\fxd1616u.c
00189c   2a06     INCF      0x6,0x1,0x0            incf __AARGB1, 1, 0                                                      C:\MCC18\src\traditional\math\fxd1616u.c
                                               //}                                                                          C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                           endloop:                                                                         C:\MCC18\src\traditional\math\fxd1616u.c
00189e   2ee7     DECFSZ    0xe7,0x1,0x0       decfsz INDF1, 1, 0    // does not affect the carry bit                       C:\MCC18\src\traditional\math\fxd1616u.c
0018a0   d7f0     BRA       0x1882             bra loop                                                                     C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                             _endasm                                                                        C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                             /* result in AARG already... */                                                C:\MCC18\src\traditional\math\fxd1616u.c
0018a2   0012     RETURN    0x0            }                                                                                C:\MCC18\src\traditional\math\fxd1616u.c
                                           #include <p18cxxx.h>                                                             C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           #include <spi.h>                                                                 C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           /********************************************************************            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           *   Function Name:  OpenSPI                                         *            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           *   Return Value:   void                                            *            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           *   Parameters:     SSP peripheral setup bytes                      *            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           *   Description:    This function sets up the SSP module on a       *            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           *                   PIC18Cxxx device for use with a Microchip SPI   *            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           *                   EEPROM device or SPI bus device.                *            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           ********************************************************************/            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           #if defined (SPI_V1)                                                             C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
001814   cfd9     MOVFF     0xfd9,0xfe6    void OpenSPI( unsigned char sync_mode, unsigned char bus_mode, unsigned char smp_phase) C:\MCC18\src\pmc_common\SPI\spi_open.c
001816   ffe6                                                                                                               
001818   cfda     MOVFF     0xfda,0xfe6                                                                                     
00181a   ffe6                                                                                                               
00181c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00181e   ffd9                                                                                                               
001820   cfe2     MOVFF     0xfe2,0xfda                                                                                     
001822   ffda                                                                                                               
                                           {                                                                                C:\MCC18\src\pmc_common\SPI\spi_open.c
001824   0e3f     MOVLW     0x3f             SSPSTAT &= 0x3F;                // power on state                              C:\MCC18\src\pmc_common\SPI\spi_open.c
001826   16c7     ANDWF     0xc7,0x1,0x0                                                                                    
001828   6ac6     CLRF      0xc6,0x0         SSPCON1 = 0x00;                 // power on state                              C:\MCC18\src\pmc_common\SPI\spi_open.c
00182a   0efd     MOVLW     0xfd             SSPCON1 |= sync_mode;           // select serial mode                          C:\MCC18\src\pmc_common\SPI\spi_open.c
00182c   50db     MOVF      0xdb,0x0,0x0                                                                                    
00182e   12c6     IORWF     0xc6,0x1,0x0                                                                                    
001830   0efb     MOVLW     0xfb             SSPSTAT |= smp_phase;           // select data input sample phase              C:\MCC18\src\pmc_common\SPI\spi_open.c
001832   50db     MOVF      0xdb,0x0,0x0                                                                                    
001834   12c7     IORWF     0xc7,0x1,0x0                                                                                    
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
001836   0efc     MOVLW     0xfc             switch( bus_mode )                                                             C:\MCC18\src\pmc_common\SPI\spi_open.c
001838   50db     MOVF      0xdb,0x0,0x0                                                                                    
00183a   0a03     XORLW     0x3                                                                                             
00183c   e009     BZ        0x1850                                                                                          
00183e   0a01     XORLW     0x1                                                                                             
001840   e004     BZ        0x184a                                                                                          
001842   0a02     XORLW     0x2                                                                                             
001844   e106     BNZ       0x1852                                                                                          
                                             {                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 0:                       // SPI bus mode 0,0                            C:\MCC18\src\pmc_common\SPI\spi_open.c
001846   8cc7     BSF       0xc7,0x6,0x0         SSPSTATbits.CKE = 1;        // data transmitted on falling edge            C:\MCC18\src\pmc_common\SPI\spi_open.c
001848   d004     BRA       0x1852               break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 2:                       // SPI bus mode 1,0                            C:\MCC18\src\pmc_common\SPI\spi_open.c
00184a   8cc7     BSF       0xc7,0x6,0x0         SSPSTATbits.CKE = 1;        // data transmitted on rising edge             C:\MCC18\src\pmc_common\SPI\spi_open.c
00184c   88c6     BSF       0xc6,0x4,0x0         SSPCON1bits.CKP = 1;        // clock idle state high                       C:\MCC18\src\pmc_common\SPI\spi_open.c
00184e   d001     BRA       0x1852               break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 3:                       // SPI bus mode 1,1                            C:\MCC18\src\pmc_common\SPI\spi_open.c
001850   88c6     BSF       0xc6,0x4,0x0         SSPCON1bits.CKP = 1;        // clock idle state high                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               default:                      // default SPI bus mode 0,1                    C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             }                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
001852   0efd     MOVLW     0xfd             switch( sync_mode )                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
001854   50db     MOVF      0xdb,0x0,0x0                                                                                    
001856   0a05     XORLW     0x5                                                                                             
001858   e003     BZ        0x1860                                                                                          
00185a   0a01     XORLW     0x1                                                                                             
00185c   e103     BNZ       0x1864                                                                                          
                                             {                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 4:                       // slave mode w /SS enable                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#if defined SPI_IO_V1                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC3 = 1;       // define clock pin as input	                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 	TRISAbits.TRISA5 = 1;       // define /SS1 pin as input                   C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V2 || defined SPI_IO_V4                                 C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISFbits.TRISF7 = 1;       // define /SS pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC3 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V3                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
00185e   8a92     BSF       0x92,0x5,0x0   		TRISAbits.TRISA5 = 1;       // define /SS pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISBbits.TRISB1 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V5	                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC6 = 1;       // define /SS pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V6                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC3 = 1;       // define clock pin as input	                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 	TRISAbits.TRISA5 = 1;       // define /SS1 pin as input                   C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               	ANSEL &= 0b11101111;                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		break;                                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           case 5:                       // slave mode w/o /SS enable                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#if defined (SPI_IO_V1) || defined (SPI_IO_V6) || defined (SPI_IO_V2) || defined (SPI_IO_V4) C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC3 = 1;       // define clock pin as input	                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V3                                                      C:\MCC18\src\pmc_common\SPI\spi_open.c
001860   8293     BSF       0x93,0x1,0x0   	 	TRISBbits.TRISB1 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V5	                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
001862   d001     BRA       0x1866         		break;                                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	default:                      // master mode, define clock pin as output        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #if defined (SPI_IO_V1) || defined (SPI_IO_V6) || defined (SPI_IO_V2) || defined (SPI_IO_V4) C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC3 = 0;       // define clock pin as input	                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V3                                                      C:\MCC18\src\pmc_common\SPI\spi_open.c
001864   9293     BCF       0x93,0x1,0x0   	 	TRISBbits.TRISB1 = 0;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V5	                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 0;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	                                                                                C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 break;                                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             }                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#if defined SPI_IO_V3                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
001866   8093     BSF       0x93,0x0,0x0   	 	TRISBbits.TRISB0 = 1;       // define SDI pin as input	                       C:\MCC18\src\pmc_common\SPI\spi_open.c
001868   9e94     BCF       0x94,0x7,0x0         	TRISCbits.TRISC7 = 0;       // define SDO pin as output                   C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V5                                                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC4 = 1;       // define SDI pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC7 = 0;       // define SDO pin as output                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#else                                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC4 = 1;       // define SDI pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 0;       // define SDO pin as output                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
00186a   8ac6     BSF       0xc6,0x5,0x0   	SSPCON1 |= SSPENB;              // enable synchronous serial port               C:\MCC18\src\pmc_common\SPI\spi_open.c
00186c   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\MCC18\src\pmc_common\SPI\spi_open.c
00186e   cfe5     MOVFF     0xfe5,0xfda                                                                                     
001870   ffda                                                                                                               
001872   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001874   ffd9                                                                                                               
001876   0012     RETURN    0x0                                                                                             
                                           #endif                                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           #if defined (SPI_V4)                                                             C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           void OpenSPI( unsigned char sync_mode, unsigned char bus_mode, unsigned char smp_phase) C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           {                                                                                C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             SSPSTAT &= 0x3F;                // power on state                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             SSPCON = 0x00;                 // power on state                               C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             SSPCON |= sync_mode;           // select serial mode                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             SSPSTAT |= smp_phase;           // select data input sample phase              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             switch( bus_mode )                                                             C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             {                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 0:                       // SPI bus mode 0,0                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 SSPSTATbits.CKE = 1;        // data transmitted on falling edge            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 2:                       // SPI bus mode 1,0                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 SSPSTATbits.CKE = 1;        // data transmitted on rising edge             C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 SSPCONbits.CKP = 1;        // clock idle state high                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 3:                       // SPI bus mode 1,1                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 SSPCONbits.CKP = 1;        // clock idle state high                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               default:                      // default SPI bus mode 0,1                    C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             }                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             switch( sync_mode )                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             {                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 4:                       // slave mode w /SS enable                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#if defined SPI_IO_V1                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC3 = 1;       // define clock pin as input	                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 	TRISAbits.TRISA5 = 1;       // define /SS1 pin as input                   C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V2 || defined SPI_IO_V4                                 C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISFbits.TRISF7 = 1;       // define /SS pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC3 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V3                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISAbits.TRISA5 = 1;       // define /SS pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISBbits.TRISB1 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V5	                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC6 = 1;       // define /SS pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V6                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC3 = 1;       // define clock pin as input	                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 	TRISAbits.TRISA5 = 1;       // define /SS1 pin as input                   C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               	ANSEL &= 0b11101111;                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		break;                                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           case 5:                       // slave mode w/o /SS enable                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#if defined (SPI_IO_V1) || defined (SPI_IO_V6) || defined (SPI_IO_V2) || defined (SPI_IO_V4) C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC3 = 1;       // define clock pin as input	                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V3                                                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISBbits.TRISB1 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V5	                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		break;                                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	default:                      // master mode, define clock pin as output        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #if defined (SPI_IO_V1) || defined (SPI_IO_V6) || defined (SPI_IO_V2) || defined (SPI_IO_V4) C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC3 = 0;       // define clock pin as input	                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V3                                                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISBbits.TRISB1 = 0;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V5	                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 0;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	                                                                                C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 break;                                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             }                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#if defined SPI_IO_V3                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISBbits.TRISB0 = 1;       // define SDI pin as input	                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 	TRISCbits.TRISC7 = 0;       // define SDO pin as output                   C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V5                                                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC4 = 1;       // define SDI pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC7 = 0;       // define SDO pin as output                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#else                                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC4 = 1;       // define SDI pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 0;       // define SDO pin as output                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	SSPCON |= SSPENB;              // enable synchronous serial port                C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           }                                                                                C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           #endif                                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           #include <p18cxxx.h>                                                             C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           #include <spi.h>                                                                 C:\MCC18\src\pmc_common\SPI\spi_read.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           /********************************************************************            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           *     Function Name:    ReadSPI                                     *            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           *     Return Value:     contents of SSPBUF register                 *            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           *     Parameters:       void                                        *            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           *     Description:      Read single byte from SPI bus.              *            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           ********************************************************************/            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           #if defined (SPI_V1) || defined (SPI_V4)                                         C:\MCC18\src\pmc_common\SPI\spi_read.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           unsigned char ReadSPI( void )                                                    C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           {                                                                                C:\MCC18\src\pmc_common\SPI\spi_read.c
0018ce   6ac9     CLRF      0xc9,0x0         SSPBUF = 0x00;                  // initiate bus cycle                          C:\MCC18\src\pmc_common\SPI\spi_read.c
0018d0   a0c7     BTFSS     0xc7,0x0,0x0     while ( !SSPSTATbits.BF );      // wait until cycle complete                   C:\MCC18\src\pmc_common\SPI\spi_read.c
0018d2   d7fe     BRA       0x18d0                                                                                          
0018d4   50c9     MOVF      0xc9,0x0,0x0     return ( SSPBUF );              // return with byte read                       C:\MCC18\src\pmc_common\SPI\spi_read.c
0018d6   0012     RETURN    0x0            }                                                                                C:\MCC18\src\pmc_common\SPI\spi_read.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           #endif                                                                           C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           ;	RCS Header $Id: aarg.asm,v 1.3 2006/01/12 23:16:38 rhinec Exp $                C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                           ;******************************************************************************* C:\MCC18\src\traditional\math\aarg.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\src\traditional\math\aarg.asm
                                           ;******************************************************************************* C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                           __REMB3                                                                          C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB7		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __REMB2                                                                          C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB6		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __REMB1                                                                          C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB5		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __REMB0                                                                          C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB4		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB3		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB2		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB1		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB0		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                           __AEXP		RES 1       ; 8 bit biased exponent for argument A                       C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                           	GLOBAL	__AARGB0, __AARGB1, __AARGB2, __AARGB3                                   C:\MCC18\src\traditional\math\aarg.asm
                                                   GLOBAL  __AARGB4, __AARGB5, __AARGB6, __AARGB7                           C:\MCC18\src\traditional\math\aarg.asm
                                           	GLOBAL  __AEXP                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           	GLOBAL  __REMB3, __REMB2, __REMB1, __REMB0                                      C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                                   END                                                                      C:\MCC18\src\traditional\math\aarg.asm
                                           ;	RCS Header $Id: barg.asm,v 1.3 2006/01/12 23:16:38 rhinec Exp $                C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                           ;******************************************************************************* C:\MCC18\src\traditional\math\barg.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\src\traditional\math\barg.asm
                                           ;******************************************************************************* C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                           __BARGB3		RES 1                                                                  C:\MCC18\src\traditional\math\barg.asm
                                           __BARGB2		RES 1                                                                  C:\MCC18\src\traditional\math\barg.asm
                                           __BARGB1		RES 1                                                                  C:\MCC18\src\traditional\math\barg.asm
                                           __BARGB0		RES 1       ; most significant byte of argument B                      C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                           __BEXP		RES 1       ; 8 bit biased exponent for argument B                       C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                                   GLOBAL  __BARGB3, __BARGB2, __BARGB1, __BARGB0                           C:\MCC18\src\traditional\math\barg.asm
                                                   GLOBAL  __BEXP                                                           C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                                   END                                                                      C:\MCC18\src\traditional\math\barg.asm
                                           ;	RCS Header $Id: cmath18.asm,v 1.5 2006/01/12 23:16:38 rhinec Exp $             C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\math\cmath18.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\math\cmath18.asm
                                           ;******************************************************************************* C:\MCC18\src\traditional\math\cmath18.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\src\traditional\math\cmath18.asm
                                           ;******************************************************************************* C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\math\cmath18.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\math\cmath18.asm
                                           SIGN		RES 1       ; save location for sign in MSB                                C:\MCC18\src\traditional\math\cmath18.asm
                                           __FPFLAGSbits                                                                    C:\MCC18\src\traditional\math\cmath18.asm
                                           __FPFLAGS		RES 1       ; floating point library exception flags                  C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\math\cmath18.asm
                                                   GLOBAL  SIGN, __FPFLAGS, __FPFLAGSbits                                   C:\MCC18\src\traditional\math\cmath18.asm
                                           	                                                                                C:\MCC18\src\traditional\math\cmath18.asm
                                                   END                                                                      C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\stdclib\__init.c
                                           /** @name __init                                                                 C:\MCC18\src\traditional\stdclib\__init.c
                                            * The {\bf __init} is called if the linker can not find a                       C:\MCC18\src\traditional\stdclib\__init.c
                                            * user defined version for it                                                   C:\MCC18\src\traditional\stdclib\__init.c
                                            */                                                                              C:\MCC18\src\traditional\stdclib\__init.c
                                                                                                                            C:\MCC18\src\traditional\stdclib\__init.c
                                           void __init (void)                                                               C:\MCC18\src\traditional\stdclib\__init.c
                                           {                                                                                C:\MCC18\src\traditional\stdclib\__init.c
0018d8   0012     RETURN    0x0            }                                                                                C:\MCC18\src\traditional\stdclib\__init.c
                                                                                                                            C:\MCC18\src\traditional\stdclib\__init.c
