MP2COD 4.15, COFF to COD File Converter
Copyright (c) 2007 Microchip Technology Inc.
Listing File Generated: Wed Nov 02 11:46:19 2016


Address  Value    Disassembly              Source                                                                           File
-------  -------  -----------------------  -------------------------------------------------------------------------------  -----
                                           /* $Id: c018i.c,v 1.7 2006/11/15 22:53:12 moshtaa Exp $ */                       C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* Copyright (c)1999 Microchip Technology */                                     C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* MPLAB-C18 startup code, including initialized data */                         C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* external reference to __init() function */                                    C:\MCC18\src\traditional\startup\c018i.c
                                           extern void __init (void);                                                       C:\MCC18\src\traditional\startup\c018i.c
                                           /* external reference to the user's main routine */                              C:\MCC18\src\traditional\startup\c018i.c
                                           extern void main (void);                                                         C:\MCC18\src\traditional\startup\c018i.c
                                           /* prototype for the startup function */                                         C:\MCC18\src\traditional\startup\c018i.c
                                           void _entry (void);                                                              C:\MCC18\src\traditional\startup\c018i.c
                                           void _startup (void);                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* prototype for the initialized data setup */                                   C:\MCC18\src\traditional\startup\c018i.c
                                           void _do_cinit (void);                                                           C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           extern volatile near unsigned long short TBLPTR;                                 C:\MCC18\src\traditional\startup\c018i.c
                                           extern near unsigned FSR0;                                                       C:\MCC18\src\traditional\startup\c018i.c
                                           extern near char __FPFLAGS;                                                      C:\MCC18\src\traditional\startup\c018i.c
                                           #define RND 6                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           #pragma code _entry_scn=0x000000                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           void                                                                             C:\MCC18\src\traditional\startup\c018i.c
                                           _entry (void)                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
000000   ef53     GOTO      0x1aa6         _asm goto _startup _endasm                                                       C:\MCC18\src\traditional\startup\c018i.c
000002   f00d                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
000004   0012     RETURN    0x0            }                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                           #pragma code _startup_scn                                                        C:\MCC18\src\traditional\startup\c018i.c
                                           void                                                                             C:\MCC18\src\traditional\startup\c018i.c
                                           _startup (void)                                                                  C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                             _asm                                                                           C:\MCC18\src\traditional\startup\c018i.c
                                               // Initialize the stack pointer                                              C:\MCC18\src\traditional\startup\c018i.c
001aa6   ee13     LFSR      0x1,0x300          lfsr 1, _stack                                                               C:\MCC18\src\traditional\startup\c018i.c
001aa8   f000                                                                                                               
001aaa   ee23     LFSR      0x2,0x300          lfsr 2, _stack                                                               C:\MCC18\src\traditional\startup\c018i.c
001aac   f000                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
001aae   6af8     CLRF      0xf8,0x0           clrf TBLPTRU, 0 // 1st silicon doesn't do this on POR                        C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
001ab0   9c0f     BCF       0xf,0x6,0x0        bcf __FPFLAGS,RND,0 // Initialize rounding flag for floating point libs      C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                               _endasm                                                                      C:\MCC18\src\traditional\startup\c018i.c
001ab2   ec87     CALL      0x190e,0x0         _do_cinit ();                                                                C:\MCC18\src\traditional\startup\c018i.c
001ab4   f00c                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           loop:                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             // If user defined __init is not found, the one in clib.lib will be used       C:\MCC18\src\traditional\startup\c018i.c
001ab6   ec6d     CALL      0x1ada,0x0       __init ();                                                                     C:\MCC18\src\traditional\startup\c018i.c
001ab8   f00d                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             // Call the user's main routine                                                C:\MCC18\src\traditional\startup\c018i.c
001aba   eceb     CALL      0x19d6,0x0       main ();                                                                       C:\MCC18\src\traditional\startup\c018i.c
001abc   f00c                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
001abe   d7fb     BRA       0x1ab6           goto loop;                                                                     C:\MCC18\src\traditional\startup\c018i.c
001ac0   0012     RETURN    0x0            }                               /* end _startup() */                             C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* MPLAB-C18 initialized data memory support */                                  C:\MCC18\src\traditional\startup\c018i.c
                                           /* The linker will populate the _cinit table */                                  C:\MCC18\src\traditional\startup\c018i.c
                                           extern far rom struct                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                             unsigned short num_init;                                                       C:\MCC18\src\traditional\startup\c018i.c
                                             struct _init_entry                                                             C:\MCC18\src\traditional\startup\c018i.c
                                             {                                                                              C:\MCC18\src\traditional\startup\c018i.c
                                               unsigned long from;                                                          C:\MCC18\src\traditional\startup\c018i.c
                                               unsigned long to;                                                            C:\MCC18\src\traditional\startup\c018i.c
                                               unsigned long size;                                                          C:\MCC18\src\traditional\startup\c018i.c
                                             }                                                                              C:\MCC18\src\traditional\startup\c018i.c
                                             entries[];                                                                     C:\MCC18\src\traditional\startup\c018i.c
                                           }                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                           _cinit;                                                                          C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           #pragma code _cinit_scn                                                          C:\MCC18\src\traditional\startup\c018i.c
                                           void                                                                             C:\MCC18\src\traditional\startup\c018i.c
                                           _do_cinit (void)                                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                             /* we'll make the assumption in the following code that these statics          C:\MCC18\src\traditional\startup\c018i.c
                                              * will be allocated into the same bank.                                       C:\MCC18\src\traditional\startup\c018i.c
                                              */                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             static short long prom;                                                        C:\MCC18\src\traditional\startup\c018i.c
                                             static unsigned short curr_byte;                                               C:\MCC18\src\traditional\startup\c018i.c
                                             static unsigned short curr_entry;                                              C:\MCC18\src\traditional\startup\c018i.c
                                             static short long data_ptr;                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             // Initialized data...                                                         C:\MCC18\src\traditional\startup\c018i.c
00190e   0e2a     MOVLW     0x2a             TBLPTR = (short long)&_cinit;                                                  C:\MCC18\src\traditional\startup\c018i.c
001910   6ef6     MOVWF     0xf6,0x0                                                                                        
001912   0e08     MOVLW     0x8                                                                                             
001914   6ef7     MOVWF     0xf7,0x0                                                                                        
001916   0e00     MOVLW     0x0                                                                                             
001918   6ef8     MOVWF     0xf8,0x0                                                                                        
                                             _asm                                                                           C:\MCC18\src\traditional\startup\c018i.c
00191a   0100     MOVLB     0x0                movlb data_ptr                                                               C:\MCC18\src\traditional\startup\c018i.c
00191c   0009     TBLRDPOSTINC                 tblrdpostinc                                                                 C:\MCC18\src\traditional\startup\c018i.c
00191e   50f5     MOVF      0xf5,0x0,0x0       movf TABLAT, 0, 0                                                            C:\MCC18\src\traditional\startup\c018i.c
001920   6fb4     MOVWF     0xb4,0x1           movwf curr_entry, 1                                                          C:\MCC18\src\traditional\startup\c018i.c
001922   0009     TBLRDPOSTINC                 tblrdpostinc                                                                 C:\MCC18\src\traditional\startup\c018i.c
001924   50f5     MOVF      0xf5,0x0,0x0       movf TABLAT, 0, 0                                                            C:\MCC18\src\traditional\startup\c018i.c
001926   6fb5     MOVWF     0xb5,0x1           movwf curr_entry+1, 1                                                        C:\MCC18\src\traditional\startup\c018i.c
                                             _endasm                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                               //while (curr_entry)                                                         C:\MCC18\src\traditional\startup\c018i.c
                                               //{                                                                          C:\MCC18\src\traditional\startup\c018i.c
                                               test:                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                               _asm                                                                         C:\MCC18\src\traditional\startup\c018i.c
001928   e103     BNZ       0x1930              bnz 3                                                                       C:\MCC18\src\traditional\startup\c018i.c
00192a   67b4     TSTFSZ    0xb4,0x1           tstfsz curr_entry, 1                                                         C:\MCC18\src\traditional\startup\c018i.c
00192c   d001     BRA       0x1930             bra 1                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                               _endasm                                                                      C:\MCC18\src\traditional\startup\c018i.c
00192e   d03d     BRA       0x19aa             goto done;                                                                   C:\MCC18\src\traditional\startup\c018i.c
                                                 /* Count down so we only have to look up the data in _cinit                C:\MCC18\src\traditional\startup\c018i.c
                                                  * once.                                                                   C:\MCC18\src\traditional\startup\c018i.c
                                                  *                                                                         C:\MCC18\src\traditional\startup\c018i.c
                                                  * At this point we know that TBLPTR points to the top of the current      C:\MCC18\src\traditional\startup\c018i.c
                                                  * entry in _cinit, so we can just start reading the from, to, and         C:\MCC18\src\traditional\startup\c018i.c
                                                  * size values.                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                  */                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                                 _asm                                                                       C:\MCC18\src\traditional\startup\c018i.c
                                           	/* read the source address */                                                   C:\MCC18\src\traditional\startup\c018i.c
001930   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001932   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
001934   6faf     MOVWF     0xaf,0x1       	movwf prom, 1                                                                   C:\MCC18\src\traditional\startup\c018i.c
001936   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001938   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
00193a   6fb0     MOVWF     0xb0,0x1       	movwf prom+1, 1                                                                 C:\MCC18\src\traditional\startup\c018i.c
00193c   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
00193e   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
001940   6fb1     MOVWF     0xb1,0x1       	movwf prom+2, 1                                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           	/* skip a byte since it's stored as a 32bit int */                              C:\MCC18\src\traditional\startup\c018i.c
001942   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                           	/* read the destination address directly into FSR0 */                           C:\MCC18\src\traditional\startup\c018i.c
001944   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001946   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
001948   6ee9     MOVWF     0xe9,0x0       	movwf FSR0L, 0                                                                  C:\MCC18\src\traditional\startup\c018i.c
00194a   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
00194c   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
00194e   6eea     MOVWF     0xea,0x0       	movwf FSR0H, 0                                                                  C:\MCC18\src\traditional\startup\c018i.c
                                           	/* skip two bytes since it's stored as a 32bit int */                           C:\MCC18\src\traditional\startup\c018i.c
001950   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001952   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                           	/* read the destination address directly into FSR0 */                           C:\MCC18\src\traditional\startup\c018i.c
001954   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001956   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
001958   6fb2     MOVWF     0xb2,0x1       	movwf curr_byte, 1                                                              C:\MCC18\src\traditional\startup\c018i.c
00195a   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
00195c   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
00195e   6fb3     MOVWF     0xb3,0x1       	movwf curr_byte+1, 1                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           	/* skip two bytes since it's stored as a 32bit int */                           C:\MCC18\src\traditional\startup\c018i.c
001960   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001962   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                 _endasm                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                 //prom = data_ptr->from;                                                   C:\MCC18\src\traditional\startup\c018i.c
                                                 //FSR0 = data_ptr->to;                                                     C:\MCC18\src\traditional\startup\c018i.c
                                                 //curr_byte = (unsigned short) data_ptr->size;                             C:\MCC18\src\traditional\startup\c018i.c
                                                 /* the table pointer now points to the next entry. Save it                 C:\MCC18\src\traditional\startup\c018i.c
                                                  * off since we'll be using the table pointer to do the copying            C:\MCC18\src\traditional\startup\c018i.c
                                                  * for the entry.                                                          C:\MCC18\src\traditional\startup\c018i.c
                                                  */                                                                        C:\MCC18\src\traditional\startup\c018i.c
001964   cff6     MOVFF     0xff6,0xb6           data_ptr = TBLPTR;                                                         C:\MCC18\src\traditional\startup\c018i.c
001966   f0b6                                                                                                               
001968   cff7     MOVFF     0xff7,0xb7                                                                                      
00196a   f0b7                                                                                                               
00196c   cff8     MOVFF     0xff8,0xb8                                                                                      
00196e   f0b8                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                 /* now assign the source address to the table pointer */                   C:\MCC18\src\traditional\startup\c018i.c
001970   c0af     MOVFF     0xaf,0xff6           TBLPTR = prom;                                                             C:\MCC18\src\traditional\startup\c018i.c
001972   fff6                                                                                                               
001974   c0b0     MOVFF     0xb0,0xff7                                                                                      
001976   fff7                                                                                                               
001978   c0b1     MOVFF     0xb1,0xff8                                                                                      
00197a   fff8                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                 /* do the copy loop */                                                     C:\MCC18\src\traditional\startup\c018i.c
                                                 _asm                                                                       C:\MCC18\src\traditional\startup\c018i.c
                                                   // determine if we have any more bytes to copy                           C:\MCC18\src\traditional\startup\c018i.c
00197c   0100     MOVLB     0x0            	movlb curr_byte                                                                 C:\MCC18\src\traditional\startup\c018i.c
00197e   53b2     MOVF      0xb2,0x1,0x1   	movf curr_byte, 1, 1                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           copy_loop:                                                                       C:\MCC18\src\traditional\startup\c018i.c
001980   e102     BNZ       0x1986         	bnz 2 // copy_one_byte                                                          C:\MCC18\src\traditional\startup\c018i.c
001982   53b3     MOVF      0xb3,0x1,0x1   	movf curr_byte + 1, 1, 1                                                        C:\MCC18\src\traditional\startup\c018i.c
001984   e007     BZ        0x1994         	bz 7 // done_copying                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           copy_one_byte:                                                                   C:\MCC18\src\traditional\startup\c018i.c
001986   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
001988   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
00198a   6eee     MOVWF     0xee,0x0       	movwf POSTINC0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           	// decrement byte counter                                                       C:\MCC18\src\traditional\startup\c018i.c
00198c   07b2     DECF      0xb2,0x1,0x1   	decf curr_byte, 1, 1                                                            C:\MCC18\src\traditional\startup\c018i.c
00198e   e2f8     BC        0x1980         	bc -8 // copy_loop                                                              C:\MCC18\src\traditional\startup\c018i.c
001990   07b3     DECF      0xb3,0x1,0x1           decf curr_byte + 1, 1, 1                                                 C:\MCC18\src\traditional\startup\c018i.c
001992   d7f9     BRA       0x1986         	bra -7 // copy_one_byte                                                         C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           done_copying:                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                 _endasm                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                 /* restore the table pointer for the next entry */                         C:\MCC18\src\traditional\startup\c018i.c
001994   c0b6     MOVFF     0xb6,0xff6           TBLPTR = data_ptr;                                                         C:\MCC18\src\traditional\startup\c018i.c
001996   fff6                                                                                                               
001998   c0b7     MOVFF     0xb7,0xff7                                                                                      
00199a   fff7                                                                                                               
00199c   c0b8     MOVFF     0xb8,0xff8                                                                                      
00199e   fff8                                                                                                               
                                                 /* next entry... */                                                        C:\MCC18\src\traditional\startup\c018i.c
0019a0   0100     MOVLB     0x0                  curr_entry--;                                                              C:\MCC18\src\traditional\startup\c018i.c
0019a2   07b4     DECF      0xb4,0x1,0x1                                                                                    
0019a4   0e00     MOVLW     0x0                                                                                             
0019a6   5bb5     SUBWFB    0xb5,0x1,0x1                                                                                    
0019a8   d7bf     BRA       0x1928               goto test;                                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           done:                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           ;                                                                                C:\MCC18\src\traditional\startup\c018i.c
0019aa   0012     RETURN    0x0            }                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                           /*********************************************************************           F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                Microchip USB C18 Firmware Version 1.0                         F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *********************************************************************           F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * FileName:        main.c                                                       F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Dependencies:    See INCLUDES section below                                   F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Processor:       PIC18                                                        F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Compiler:        C18 2.30.01+                                                 F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Company:         Microchip Technology, Inc.                                   F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Software License Agreement                                                    F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * The software supplied herewith by Microchip Technology Incorporated           F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * supplied to you, the Company’s customer, for use solely and                   F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * software is owned by the Company and/or its supplier, and is                  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * protected under applicable copyright laws. All rights are reserved.           F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Any use in violation of the foregoing restrictions may subject the            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * user to criminal sanctions under applicable laws, as well as to               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * civil liability for the breach of the terms and conditions of this            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * license.                                                                      F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Author               Date        Comment                                      F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            ********************************************************************/           F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           /** I N C L U D E S **********************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           #include <p18cxxx.h>                                                             F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           #include "system\typedefs.h"                        // Required                  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           #include "system\usb\usb.h"                         // Required                  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           #include "io_cfg.h"                                 // Required                  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           #include "system\usb\usb_compile_time_validation.h" // Optional                  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           #include "user\user.h"                              // Modifiable                F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           #include <portb.h>									// For interruptions                                  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           #include "def_ports.h"								// Port definitions                                F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           #include "def_interruptions.h"						// Interruption definitions                  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           void int_routine(void);                                                          F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           /** V A R I A B L E S ********************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           #pragma udata                                                                    F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           static void InitializeSystem(void);                                              F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           void USBTasks(void);                                                             F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           /** V E C T O R  R E M A P P I N G *******************************************/  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           extern void _startup (void);        // See c018i.c in your C18 compiler dir      F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           #pragma code _RESET_INTERRUPT_VECTOR = 0x000800                                  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           void _reset (void)                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\main.c
000800   ef53     GOTO      0x1aa6             _asm goto _startup _endasm                                                   F:\ecom\EC_Mouse_Week_6\PIC\main.c
000802   f00d                                                                                                               
000804   0012     RETURN    0x0            }                                                                                F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           #pragma code                                                                     F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           #pragma code _LOW_INTERRUPT_VECTOR = 0x000818                                    F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           void _low_ISR (void)                                                             F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                               ;                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
000818   0012     RETURN    0x0            }                                                                                F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           // HIGH PRIORITY INTERRUPTS VECTOR                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           #pragma code high_interrupt_vector = 0x808                                       F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           void high_interrupt (void)                                                       F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\main.c
000808   efd6     GOTO      0x19ac         	_asm goto int_routine _endasm                                                   F:\ecom\EC_Mouse_Week_6\PIC\main.c
00080a   f00c                                                                                                               
00080c   0012     RETURN    0x0            }                                                                                F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           #pragma code                                                                     F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           #pragma interrupt int_routine                                                    F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019ac   cfda     MOVFF     0xfda,0xfe4    void int_routine (void)                                                          F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019ae   ffe4                                                                                                               
0019b0   cfe2     MOVFF     0xfe2,0xfda                                                                                     
0019b2   ffda                                                                                                               
0019b4   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           	// Lights LED D3 and D4, which is connected to bit 2 and 3 of  port D (PD2 and PD3),  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           	// only when both switches 2 and 3, connected bits 4 and 5 of port B (PB4 and PB5) are pressed. F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019b6   5081     MOVF      0x81,0x0,0x0   	if(!PB4 && !PB5 ) {                                                             F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019b8   0b10     ANDLW     0x10                                                                                            
0019ba   e106     BNZ       0x19c8                                                                                          
0019bc   5081     MOVF      0x81,0x0,0x0                                                                                    
0019be   0b20     ANDLW     0x20                                                                                            
0019c0   e103     BNZ       0x19c8                                                                                          
0019c2   8483     BSF       0x83,0x2,0x0   		PD2 = 1;                                                                       F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019c4   8683     BSF       0x83,0x3,0x0   		PD3 = 1;                                                                       F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           	}                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019c6   d002     BRA       0x19cc         	else {                                                                          F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019c8   9483     BCF       0x83,0x2,0x0   		PD2 = 0;                                                                       F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019ca   9683     BCF       0x83,0x3,0x0   		PD3 = 0;                                                                       F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           	}                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019cc   90f2     BCF       0xf2,0x0,0x0   	RBIF = 0; // Clear the interrupt flag for port B.                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019ce   52e5     MOVF      0xe5,0x1,0x0   }                                                                                F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019d0   cfe5     MOVFF     0xfe5,0xfda                                                                                     
0019d2   ffda                                                                                                               
0019d4   0011     RETFIE    0x1                                                                                             
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           #pragma code                                                                     F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           /** D E C L A R A T I O N S **************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           #pragma code                                                                     F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Function:        void main(void)                                              F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Overview:        Main program entry point.                                    F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           void main(void)                                                                  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019d6   d806     RCALL     0x19e4             InitializeSystem();                                                          F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           	//DDRB = PINPUT;				// Port B is an input port                                  F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019d8   8ef2     BSF       0xf2,0x7,0x0   	GINTEN  = ENABLE;			// General interrupt enable                                 F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019e0   d7fc     BRA       0x19da             while(1)                                                                     F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019da   d816     RCALL     0x1a08                 USBTasks();         // USB Tasks                                         F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019dc   ec2d     CALL      0x85a,0x0              ProcessIO();        // See user\user.c & .h                              F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019de   f004                                                                                                               
                                               } //end while                                                                F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019e2   0012     RETURN    0x0            } //end main                                                                     F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Function:        static void InitializeSystem(void)                           F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Overview:        InitializeSystem is a centralize initialization routine.     F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                  All required USB initialization routines are called from     F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                  here.                                                        F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                  User application initialization routine should also be       F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                  called from here.                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           static void InitializeSystem(void)                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019e4   0e0f     MOVLW     0xf                ADCON1 |= 0x0F;                 // Default all pins to digital               F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019e6   12c1     IORWF     0xc1,0x1,0x0                                                                                    
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                               #if defined(USE_USB_BUS_SENSE_IO)                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019e8   8292     BSF       0x92,0x1,0x0       tris_usb_bus_sense = INPUT_PIN; // See io_cfg.h                              F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                               #endif                                                                       F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                               #if defined(USE_SELF_POWER_SENSE_IO)                                         F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019ea   8492     BSF       0x92,0x2,0x0       tris_self_power = INPUT_PIN;                                                 F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                               #endif                                                                       F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019ec   0e14     MOVLW     0x14               mInitializeUSBDriver();         // See usbdrv.h                              F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019ee   6e6f     MOVWF     0x6f,0x0                                                                                        
0019f0   0100     MOVLB     0x0                                                                                             
0019f2   6bc1     CLRF      0xc1,0x1                                                                                        
0019f4   0100     MOVLB     0x0                                                                                             
0019f6   6bc2     CLRF      0xc2,0x1                                                                                        
0019f8   0100     MOVLB     0x0                                                                                             
0019fa   6bc3     CLRF      0xc3,0x1                                                                                        
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019fc   ec1c     CALL      0x838,0x0          UserInit();                     // See user.c & .h                           F:\ecom\EC_Mouse_Week_6\PIC\main.c
0019fe   f004                                                                                                               
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
001a00   86f2     BSF       0xf2,0x3,0x0   	RBIE = 1; //int dos RB ligadas                                                  F:\ecom\EC_Mouse_Week_6\PIC\main.c
001a02   80f2     BSF       0xf2,0x0,0x0   	RBIF = 1; //Clear RB flag                                                       F:\ecom\EC_Mouse_Week_6\PIC\main.c
001a04   80f1     BSF       0xf1,0x0,0x0   	RBIP = 1; //int dos RB altas                                                    F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
001a06   0012     RETURN    0x0            }//end InitializeSystem                                                          F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Function:        void USBTasks(void)                                          F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * PreCondition:    InitializeSystem has been called.                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Overview:        Service loop for USB tasks.                                  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           void USBTasks(void)                                                              F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                               /*                                                                           F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                * Servicing Hardware                                                        F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                */                                                                          F:\ecom\EC_Mouse_Week_6\PIC\main.c
001a08   ece0     CALL      0x15c0,0x0         USBCheckBusStatus();                    // Must use polling method           F:\ecom\EC_Mouse_Week_6\PIC\main.c
001a0a   f00a                                                                                                               
001a0c   be6f     BTFSC     0x6f,0x7,0x0       if(UCFGbits.UTEYE!=1)                                                        F:\ecom\EC_Mouse_Week_6\PIC\main.c
001a0e   d002     BRA       0x1a14                                                                                          
001a10   ec01     CALL      0x1602,0x0             USBDriverService();                 // Interrupt or polling method       F:\ecom\EC_Mouse_Week_6\PIC\main.c
001a12   f00b                                                                                                               
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
001a14   0012     RETURN    0x0            }// end USBTasks                                                                 F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           /** EOF main.c ***************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\main.c
                                           /*********************************************************************           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                Microchip USB C18 Firmware Version 1.0                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *********************************************************************           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * FileName:        usbmmap.c                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * Dependencies:    See INCLUDES section below                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * Processor:       PIC18                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * Compiler:        C18 2.30.01+                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * Company:         Microchip Technology, Inc.                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * Software License Agreement                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * The software supplied herewith by Microchip Technology Incorporated           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * supplied to you, the Company’s customer, for use solely and                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * software is owned by the Company and/or its supplier, and is                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * protected under applicable copyright laws. All rights are reserved.           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * Any use in violation of the foregoing restrictions may subject the            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * user to criminal sanctions under applicable laws, as well as to               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * civil liability for the breach of the terms and conditions of this            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * license.                                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * Author               Date        Comment                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            ********************************************************************/           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * -usbmmap.c-                                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * USB Memory Map                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * This file is the USB memory manager; it serves as a compile-time memory       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * allocator for the USB endpoints. It uses the compile time options passed      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * from usbcfg.h to instantiate endpoints and endpoint buffer.                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * Each endpoint requires to have a set of Buffer Descriptor registers(BDT).     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * A BDT is 4-byte long and has a specific RAM location for each endpoint.       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * The BDT for endpoint 0 out is located at address 0x400 to 0x403.              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * The BDT for endpoint 0 in is located at address 0x404 to 0x407.               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * The BDT for endpoint 1 out is located at address 0x408 to 0x40B.              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * and so on... The above allocation assumes the Ping-Pong Buffer Mode 0 is      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * used. These locations are already hard-wired in the silicon. The point        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * of doing instantiation, i.e. volatile far BDT ep0Bo;, is to provide the       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * C compiler a way to address each variable directly. This is very important    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * because when a register can be accessed directly, it saves execution time     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * and reduces program size.                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * Endpoints are defined using the endpoint number and the direction             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * of transfer. For simplicity, usbmmap.c only uses the endpoint number          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * in the BDT register allocation scheme. This means if the usbcfg.h states      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * that the MAX_EP_NUMBER is number 1, then four BDTs will be                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * instantiated: one each for endpoint0 in and endpoint0 out, which must         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * always be instantiated for control transfer by default, and one each sets     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * for endpoint1 in and endpoint1 out. The naming convention for instantiating   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * BDT is                                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * ep<#>B<d>                                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * where # is the endpoint number, and d is the direction of                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * transfer, which could be either <i> or <o>.                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * The USB memory manager uses MAX_EP_NUMBER, as defined in usbcfg.h, to define  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * the endpoints to be instantiated. This represents the highest endpoint        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * number to be allocated, not how many endpoints are used. Since the BDTs for   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * endpoints have hardware-assigned addresses in Bank 4, setting this value too  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * high may lead to inefficient use of data RAM. For example, if an application  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * uses only endpoints EP0 and EP4, then the MAX_EP_NUMBER is 4, and not 2.      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * The in-between endpoint BDTs in this example (EP1, EP2, and EP3) go unused,   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * and the 24 bytes of memory associated with them are wasted. It does not make  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * much sense to skip endpoints, but the final decision lies with the user.      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * The next step is to assign the instantiated BDTs to different                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * USB functions. The firmware framework fundamentally assumes that every USB    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * function should know which endpoint it is using, i.e., the default control    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * transfer should know that it is using endpoint 0 in and endpoint 0 out.       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * A HID class can choose which endpoint it wants to use, but once chosen, it    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * should always know the number of the endpoint.                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * The assignment of endpoints to USB functions is managed centrally             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * in usbcfg.h. This helps prevent the mistake of having more                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * than one USB function using the same endpoint. The "Endpoint Allocation"      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * section in usbcfg.h provides examples for how to map USB endpoints to USB     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * functions.                                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * Quite a few things can be mapped in that section. There is no                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * one correct way to do the mapping and the user has the choice to              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * choose a method that is most suitable to the application.                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * Typically, however, a user will want to map the following for a given         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * USB interface function:                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * 1. The USB interface ID                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * 2. The endpoint control registers (UEPn)                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * 3. The BDT registers (ep<#>B<d>)                                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * 4. The endpoint size                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * Example: Assume a USB device class "foo", which uses one out endpoint         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *          of size 64-byte and one in endpoint of size 64-byte, then:           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * #define FOO_INTF_ID          0x00                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * #define FOO_UEP              UEP1                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * #define FOO_BD_OUT           ep1Bo                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * #define FOO_BD_IN            ep1Bi                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * #define FOO_EP_SIZE          64                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * The mapping above has chosen class "foo" to use endpoint 1.                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * The names are arbitrary and can be anything other than FOO_??????.            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * For abstraction, the code for class "foo" should use the abstract             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * definitions of FOO_BD_OUT,FOO_BD_IN, and not ep1Bo or ep1Bi.                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * Note that the endpoint size defined in the usbcfg.h file is again             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * used in the usbmmap.c file. This shows that the relationship between          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * the two files are tightly related.                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * The endpoint buffer for each USB function must be located in the              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * dual-port RAM area and has to come after all the BDTs have been               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * instantiated. An example declaration is:                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * volatile far unsigned char[FOO_EP_SIZE] data;                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * The 'volatile' keyword tells the compiler not to perform any code             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * optimization on this variable because its content could be modified           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * by the hardware. The 'far' keyword tells the compiler that this variable      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * is not located in the Access RAM area (0x000 - 0x05F).                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * For the variable to be globally accessible by other files, it should be       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * declared in the header file usbmmap.h as an extern definition, such as        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * extern volatile far unsigned char[FOO_EP_SIZE] data;                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * Conclusion:                                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * In a short summary, the dependencies between usbcfg and usbmmap can           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * be shown as:                                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * usbcfg[MAX_EP_NUMBER] -> usbmmap                                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * usbmmap[ep<#>B<d>] -> usbcfg                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * usbcfg[EP size] -> usbmmap                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * usbcfg[abstract ep definitions] -> usb9/hid/cdc/etc class code                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * usbmmap[endpoint buffer variable] -> usb9/hid/cdc/etc class code              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * Data mapping provides a means for direct addressing of BDT and endpoint       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * buffer. This means less usage of pointers, which equates to a faster and      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * smaller program code.                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           /** I N C L U D E S **********************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #include "system\typedefs.h"                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #include "system\usb\usb.h"                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           /** U S B  G L O B A L  V A R I A B L E S ************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #pragma udata                                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           byte usb_device_state;          // Device States: DETACHED, ATTACHED, ...        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           USB_DEVICE_STATUS usb_stat;     // Global USB flags                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           byte usb_active_cfg;            // Value of current configuration                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           byte usb_alt_intf[MAX_NUM_INT]; // Array to keep track of the current alternate  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                           // setting for each interface ID                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           /** U S B  F I X E D  L O C A T I O N  V A R I A B L E S *********************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #pragma udata usbram4=0x400     //See Linker Script,usb4:0x400-0x4FF(256-byte)   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * Section A: Buffer Descriptor Table                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * - 0x400 - 0x4FF(max)                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * - MAX_EP_NUMBER is defined in autofiles\usbcfg.h                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * - BDT data type is defined in system\usb\usbmmap.h                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #if(0 <= MAX_EP_NUMBER)                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep0Bo;         //Endpoint #0 BD Out                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep0Bi;         //Endpoint #0 BD In                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #endif                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #if(1 <= MAX_EP_NUMBER)                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep1Bo;         //Endpoint #1 BD Out                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep1Bi;         //Endpoint #1 BD In                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #endif                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #if(2 <= MAX_EP_NUMBER)                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep2Bo;         //Endpoint #2 BD Out                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep2Bi;         //Endpoint #2 BD In                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #endif                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #if(3 <= MAX_EP_NUMBER)                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep3Bo;         //Endpoint #3 BD Out                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep3Bi;         //Endpoint #3 BD In                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #endif                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #if(4 <= MAX_EP_NUMBER)                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep4Bo;         //Endpoint #4 BD Out                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep4Bi;         //Endpoint #4 BD In                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #endif                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #if(5 <= MAX_EP_NUMBER)                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep5Bo;         //Endpoint #5 BD Out                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep5Bi;         //Endpoint #5 BD In                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #endif                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #if(6 <= MAX_EP_NUMBER)                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep6Bo;         //Endpoint #6 BD Out                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep6Bi;         //Endpoint #6 BD In                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #endif                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #if(7 <= MAX_EP_NUMBER)                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep7Bo;         //Endpoint #7 BD Out                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep7Bi;         //Endpoint #7 BD In                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #endif                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #if(8 <= MAX_EP_NUMBER)                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep8Bo;         //Endpoint #8 BD Out                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep8Bi;         //Endpoint #8 BD In                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #endif                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #if(9 <= MAX_EP_NUMBER)                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep9Bo;         //Endpoint #9 BD Out                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep9Bi;         //Endpoint #9 BD In                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #endif                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #if(10 <= MAX_EP_NUMBER)                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep10Bo;        //Endpoint #10 BD Out                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep10Bi;        //Endpoint #10 BD In                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #endif                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #if(11 <= MAX_EP_NUMBER)                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep11Bo;        //Endpoint #11 BD Out                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep11Bi;        //Endpoint #11 BD In                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #endif                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #if(12 <= MAX_EP_NUMBER)                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep12Bo;        //Endpoint #12 BD Out                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep12Bi;        //Endpoint #12 BD In                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #endif                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #if(13 <= MAX_EP_NUMBER)                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep13Bo;        //Endpoint #13 BD Out                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep13Bi;        //Endpoint #13 BD In                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #endif                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #if(14 <= MAX_EP_NUMBER)                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep14Bo;        //Endpoint #14 BD Out                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep14Bi;        //Endpoint #14 BD In                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #endif                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #if(15 <= MAX_EP_NUMBER)                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep15Bo;        //Endpoint #15 BD Out                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far BDT ep15Bi;        //Endpoint #15 BD In                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #endif                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * Section B: EP0 Buffer Space                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            ******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * - Two buffer areas are defined:                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *   A. CTRL_TRF_SETUP                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *      - Size = EP0_BUFF_SIZE as defined in autofiles\usbcfg.h                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *      - Detailed data structure allows direct adddressing of bits and bytes.   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *   B. CTRL_TRF_DATA                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *      - Size = EP0_BUFF_SIZE as defined in autofiles\usbcfg.h                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *      - Data structure allows direct adddressing of the first 8 bytes.         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * - Both data types are defined in system\usb\usbdefs\usbdefs_ep0_buff.h        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far CTRL_TRF_SETUP SetupPkt;                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far CTRL_TRF_DATA CtrlTrfData;                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            * Section C: Buffer                                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            ******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far byte usbgen_out[USBGEN_EP_SIZE];                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           volatile far byte usbgen_in[USBGEN_EP_SIZE];                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           #pragma udata                                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           /** EOF usbmmap.c ************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbmmap.c
                                           /*********************************************************************           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                Microchip USB C18 Firmware Version 1.0                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *********************************************************************           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * FileName:        usbdrv.c                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Dependencies:    See INCLUDES section below                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Processor:       PIC18                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Compiler:        C18 2.30.01+                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Company:         Microchip Technology, Inc.                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Software License Agreement                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * The software supplied herewith by Microchip Technology Incorporated           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * supplied to you, the Company’s customer, for use solely and                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * software is owned by the Company and/or its supplier, and is                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * protected under applicable copyright laws. All rights are reserved.           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Any use in violation of the foregoing restrictions may subject the            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * user to criminal sanctions under applicable laws, as well as to               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * civil liability for the breach of the terms and conditions of this            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * license.                                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Author               Date        Comment                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            ********************************************************************/           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           /** I N C L U D E S **********************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           #include <p18cxxx.h>                                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           #include "system\typedefs.h"                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           #include "system\usb\usb.h"                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           #include "io_cfg.h"             // Required for USBCheckBusStatus()              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           /** V A R I A B L E S ********************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           #pragma udata                                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBModuleEnable(void);                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBModuleDisable(void);                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBSuspend(void);                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBWakeFromSuspend(void);                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBProtocolResetHandler(void);                                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           void USB_SOF_Handler(void);                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBStallHandler(void);                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBErrorHandler(void);                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           /** D E C L A R A T I O N S **************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           #pragma code                                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBCheckBusStatus(void)                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine enables/disables the USB module by monitoring   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  the USB power signal.                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBCheckBusStatus(void)                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               /**************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * Bus Attachment & Detachment Detection                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * usb_bus_sense is an i/o pin defined in io_cfg.h                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                *************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               #define USB_BUS_ATTACHED    1                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               #define USB_BUS_DETACHED    0                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015c0   a280     BTFSS     0x80,0x1,0x0       if(usb_bus_sense == USB_BUS_ATTACHED)       // Is USB bus attached?          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015c2   d003     BRA       0x15ca                                                                                          
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015c4   a66d     BTFSS     0x6d,0x3,0x0           if(UCONbits.USBEN == 0)                 // Is the module off?            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015c6   d80f     RCALL     0x15e6                     USBModuleEnable();                  // Is off, enable it             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               }                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015c8   d002     BRA       0x15ce             else                                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015ca   b66d     BTFSC     0x6d,0x3,0x0           if(UCONbits.USBEN == 1)                 // Is the module on?             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015cc   d813     RCALL     0x15f4                     USBModuleDisable();                 // Is on, disable it             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               }//end if(usb_bus_sense...)                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * After enabling the USB module, it takes some time for the voltage         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * on the D+ or D- line to rise high enough to get out of the SE0 condition. F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * The USB Reset interrupt should not be unmasked until the SE0 condition is F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * cleared. This helps preventing the firmware from misinterpreting this     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * unique event as a USB bus reset from the USB host.                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015ce   0100     MOVLB     0x0                if(usb_device_state == ATTACHED_STATE)                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015d0   05c1     DECF      0xc1,0x0,0x1                                                                                    
0015d2   e108     BNZ       0x15e4                                                                                          
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015d4   ba6d     BTFSC     0x6d,0x5,0x0           if(!UCONbits.SE0)                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015d6   d006     BRA       0x15e4                                                                                          
                                                   {                                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015d8   6a68     CLRF      0x68,0x0                   UIR = 0;                        // Clear all USB interrupts          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015da   6a69     CLRF      0x69,0x0                   UIE = 0;                        // Mask all USB interrupts           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015dc   8069     BSF       0x69,0x0,0x0               UIEbits.URSTIE = 1;             // Unmask RESET interrupt            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015de   8869     BSF       0x69,0x4,0x0               UIEbits.IDLEIE = 1;             // Unmask IDLE interrupt             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015e0   0e02     MOVLW     0x2                        usb_device_state = POWERED_STATE;                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015e2   6fc1     MOVWF     0xc1,0x1                                                                                        
                                                   }//end if                           // else wait until SE0 is cleared    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               }//end if(usb_device_state == ATTACHED_STATE)                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015e4   0012     RETURN    0x0            }//end USBCheckBusStatus                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBModuleEnable(void)                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine enables the USB module.                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  An end designer should never have to call this routine       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  manually. This routine should only be called from            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  USBCheckBusStatus().                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            See USBCheckBusStatus() for more information.                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBModuleEnable(void)                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015e6   6a6d     CLRF      0x6d,0x0           UCON = 0;                                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015e8   6a69     CLRF      0x69,0x0           UIE = 0;                                // Mask all USB interrupts           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015ea   866d     BSF       0x6d,0x3,0x0       UCONbits.USBEN = 1;                     // Enable module & attach to bus     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015ec   0100     MOVLB     0x0                usb_device_state = ATTACHED_STATE;      // Defined in usbmmap.c & .h         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015ee   0e01     MOVLW     0x1                                                                                             
0015f0   6fc1     MOVWF     0xc1,0x1                                                                                        
0015f2   0012     RETURN    0x0            }//end USBModuleEnable                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBModuleDisable(void)                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine disables the USB module.                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  An end designer should never have to call this routine       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  manually. This routine should only be called from            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  USBCheckBusStatus().                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            See USBCheckBusStatus() for more information.                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBModuleDisable(void)                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015f4   6a6d     CLRF      0x6d,0x0           UCON = 0;                               // Disable module & detach from bus  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015f6   6a69     CLRF      0x69,0x0           UIE = 0;                                // Mask all USB interrupts           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015f8   0100     MOVLB     0x0                usb_device_state = DETACHED_STATE;      // Defined in usbmmap.c & .h         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015fa   6bc1     CLRF      0xc1,0x1                                                                                        
0015fc   0012     RETURN    0x0            }//end USBModuleDisable                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBSoftDetach(void)                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    The device will have to be re-enumerated to function again.  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        USBSoftDetach electrically disconnects the device from       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  the bus. This is done by stop supplying Vusb voltage to      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  pull-up resistor. The pull-down resistors on the host        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  side will pull both differential signal lines low and        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  the host registers the event as a disconnect.                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  Since the USB cable is not physically disconnected, the      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  power supply through the cable can still be sensed by        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  the device. The next time USBCheckBusStatus() function       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  is called, it will reconnect the device back to the bus.     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBSoftDetach(void)                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0015fe   effa     GOTO      0x15f4             USBModuleDisable();                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001600   f00a                                                                                                               
                                           }//end USBSoftDetach                                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBDriverService(void)                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine is the heart of this firmware. It manages       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  all USB interrupts.                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            Device state transitions through the following stages:       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  DETACHED -> ATTACHED -> POWERED -> DEFAULT ->                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  ADDRESS_PENDING -> ADDRESSED -> CONFIGURED -> READY          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBDriverService(void)                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if USB cable is not even attached.        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001602   0100     MOVLB     0x0                if(usb_device_state == DETACHED_STATE) return;                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001604   51c1     MOVF      0xc1,0x0,0x1                                                                                    
001606   e101     BNZ       0x160a                                                                                          
001608   d03a     BRA       0x167e                                                                                          
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * Task A: Service USB Activity Interrupt                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00160a   5068     MOVF      0x68,0x0,0x0       if(UIRbits.ACTVIF && UIEbits.ACTVIE)    USBWakeFromSuspend();                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00160c   0b04     ANDLW     0x4                                                                                             
00160e   e004     BZ        0x1618                                                                                          
001610   5069     MOVF      0x69,0x0,0x0                                                                                    
001612   0b04     ANDLW     0x4                                                                                             
001614   e001     BZ        0x1618                                                                                          
001616   d838     RCALL     0x1688                                                                                          
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if the device is in suspend mode.         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001618   b26d     BTFSC     0x6d,0x1,0x0       if(UCONbits.SUSPND==1) return;                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00161a   d031     BRA       0x167e                                                                                          
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * Task B: Service USB Bus Reset Interrupt.                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * When bus reset is received during suspend, ACTVIF will be set first,      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * once the UCONbits.SUSPND is clear, then the URSTIF bit will be asserted.  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * This is why URSTIF is checked after ACTVIF.                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00161c   5068     MOVF      0x68,0x0,0x0       if(UIRbits.URSTIF && UIEbits.URSTIE)    USBProtocolResetHandler();           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00161e   0b01     ANDLW     0x1                                                                                             
001620   e004     BZ        0x162a                                                                                          
001622   5069     MOVF      0x69,0x0,0x0                                                                                    
001624   0b01     ANDLW     0x1                                                                                             
001626   e001     BZ        0x162a                                                                                          
001628   d850     RCALL     0x16ca                                                                                          
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * Task C: Service other USB interrupts                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00162a   5068     MOVF      0x68,0x0,0x0       if(UIRbits.IDLEIF && UIEbits.IDLEIE)    USBSuspend();                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00162c   0b10     ANDLW     0x10                                                                                            
00162e   e004     BZ        0x1638                                                                                          
001630   5069     MOVF      0x69,0x0,0x0                                                                                    
001632   0b10     ANDLW     0x10                                                                                            
001634   e001     BZ        0x1638                                                                                          
001636   d824     RCALL     0x1680                                                                                          
001638   5068     MOVF      0x68,0x0,0x0       if(UIRbits.SOFIF && UIEbits.SOFIE)      USB_SOF_Handler();                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00163a   0b40     ANDLW     0x40                                                                                            
00163c   e004     BZ        0x1646                                                                                          
00163e   5069     MOVF      0x69,0x0,0x0                                                                                    
001640   0b40     ANDLW     0x40                                                                                            
001642   e001     BZ        0x1646                                                                                          
001644   d837     RCALL     0x16b4                                                                                          
001646   5068     MOVF      0x68,0x0,0x0       if(UIRbits.STALLIF && UIEbits.STALLIE)  USBStallHandler();                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001648   0b20     ANDLW     0x20                                                                                            
00164a   e004     BZ        0x1654                                                                                          
00164c   5069     MOVF      0x69,0x0,0x0                                                                                    
00164e   0b20     ANDLW     0x20                                                                                            
001650   e001     BZ        0x1654                                                                                          
001652   d832     RCALL     0x16b8                                                                                          
001654   5068     MOVF      0x68,0x0,0x0       if(UIRbits.UERRIF && UIEbits.UERRIE)    USBErrorHandler();                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001656   0b02     ANDLW     0x2                                                                                             
001658   e004     BZ        0x1662                                                                                          
00165a   5069     MOVF      0x69,0x0,0x0                                                                                    
00165c   0b02     ANDLW     0x2                                                                                             
00165e   e001     BZ        0x1662                                                                                          
001660   d832     RCALL     0x16c6                                                                                          
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if the host has not sent a bus reset.     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * Once bus reset is received, the device transitions into the DEFAULT       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * state and is ready for communication.                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001662   0e03     MOVLW     0x3                if(usb_device_state < DEFAULT_STATE) return;                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001664   0100     MOVLB     0x0                                                                                             
001666   5dc1     SUBWF     0xc1,0x0,0x1                                                                                    
001668   e201     BC        0x166c                                                                                          
00166a   d009     BRA       0x167e                                                                                          
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * Task D: Servicing USB Transaction Complete Interrupt                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00166c   5068     MOVF      0x68,0x0,0x0       if(UIRbits.TRNIF && UIEbits.TRNIE)                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00166e   0b08     ANDLW     0x8                                                                                             
001670   e006     BZ        0x167e                                                                                          
001672   5069     MOVF      0x69,0x0,0x0                                                                                    
001674   0b08     ANDLW     0x8                                                                                             
001676   e003     BZ        0x167e                                                                                          
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                   /*                                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                    * USBCtrlEPService only services transactions over EP0.                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                    * It ignores all other EP transactions.                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                    */                                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001678   ecb8     CALL      0x1170,0x0             USBCtrlEPService();                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00167a   f008                                                                                                               
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                   /*                                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                    * Other EP can be serviced later by responsible device class firmware.  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                    * Each device driver knows when an OUT or IN transaction is ready by    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                    * checking the buffer ownership bit.                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                    * An OUT EP should always be owned by SIE until the data is ready.      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                    * An IN EP should always be owned by CPU until the data is ready.       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                    *                                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                    * Because of this logic, it is not necessary to save the USTAT value    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                    * of non-EP0 transactions.                                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                    */                                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00167c   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               }//end if(UIRbits.TRNIF && UIEbits.TRNIE)                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00167e   0012     RETURN    0x0            }//end USBDriverService                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBSuspend(void)                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:                                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBSuspend(void)                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * NOTE: Do not clear UIRbits.ACTVIF here!                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * Reason:                                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * ACTVIF is only generated once an IDLEIF has been generated.               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * This is a 1:1 ratio interrupt generation.                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * For every IDLEIF, there will be only one ACTVIF regardless of             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * the number of subsequent bus transitions.                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                *                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * If the ACTIF is cleared here, a problem could occur when:                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * [       IDLE       ][bus activity ->                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * <--- 3 ms ----->     ^                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                *                ^     ACTVIF=1                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                *                IDLEIF=1                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                *  #           #           #           #   (#=Program polling flags)        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                *                          ^                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                *                          This polling loop will see both                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                *                          IDLEIF=1 and ACTVIF=1.                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                *                          However, the program services IDLEIF first       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                *                          because ACTIVIE=0.                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                *                          If this routine clears the only ACTIVIF,         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                *                          then it can never get out of the suspend         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                *                          mode.                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001680   8469     BSF       0x69,0x2,0x0       UIEbits.ACTVIE = 1;                     // Enable bus activity interrupt     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001682   9868     BCF       0x68,0x4,0x0       UIRbits.IDLEIF = 0;                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001684   826d     BSF       0x6d,0x1,0x0       UCONbits.SUSPND = 1;                    // Put USB module in power conserve  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                       // mode, SIE clock inactive          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * At this point the PIC can go into sleep,idle, or                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * switch to a slower clock, etc.                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               /* Modifiable Section */                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               /* End Modifiable Section */                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001686   0012     RETURN    0x0            }//end USBSuspend                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBWakeFromSuspend(void)                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:                                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBWakeFromSuspend(void)                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * If using clock switching, this is the place to restore the                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * original clock frequency.                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001688   926d     BCF       0x6d,0x1,0x0       UCONbits.SUSPND = 0;                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00168a   9469     BCF       0x69,0x2,0x0       UIEbits.ACTVIE = 0;                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00168c   9468     BCF       0x68,0x2,0x0       UIRbits.ACTVIF = 0;                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00168e   0012     RETURN    0x0            }//end USBWakeFromSuspend                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBRemoteWakeup(void)                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This function should be called by user when the device       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  is waken up by an external stimulus other than ACTIVIF.      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  Please read the note below to understand the limitations.    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            The modifiable section in this routine should be changed     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  to meet the application needs. Current implementation        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  temporary blocks other functions from executing for a        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  period of 1-13 ms depending on the core frequency.           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  According to USB 2.0 specification section 7.1.7.7,          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  "The remote wakeup device must hold the resume signaling     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  for at lest 1 ms but for no more than 15 ms."                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  The idea here is to use a delay counter loop, using a        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  common value that would work over a wide range of core       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  frequencies.                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  That value selected is 1800. See table below:                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  Core Freq(MHz)      MIP         RESUME Signal Period (ms)    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                      48              12          1.05                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                       4              1           12.6                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  * These timing could be incorrect when using code            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                    optimization or extended instruction mode,                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                    or when having other interrupts enabled.                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                    Make sure to verify using the MPLAB SIM's Stopwatch        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBRemoteWakeup(void)                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               static word delay_count;                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001690   0100     MOVLB     0x0                if(usb_stat.RemoteWakeup == 1)          // Check if RemoteWakeup function    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001692   a1c2     BTFSS     0xc2,0x0,0x1                                                                                    
001694   d00e     BRA       0x16b2                                                                                          
                                               {                                       // has been enabled by the host.     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001696   dff8     RCALL     0x1688                 USBWakeFromSuspend();               // Unsuspend USB modue               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001698   846d     BSF       0x6d,0x2,0x0           UCONbits.RESUME = 1;                // Start RESUME signaling            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                   /* Modifiable Section */                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00169a   0100     MOVLB     0x0                    delay_count = 1800U;                // Set RESUME line for 1-13 ms       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00169c   0e08     MOVLW     0x8                                                                                             
00169e   6fc5     MOVWF     0xc5,0x1                                                                                        
0016a0   0e07     MOVLW     0x7                                                                                             
0016a2   6fc6     MOVWF     0xc6,0x1                                                                                        
                                                   do                                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                   {                                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016a4   07c5     DECF      0xc5,0x1,0x1               delay_count--;                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016a6   0e00     MOVLW     0x0                                                                                             
0016a8   5bc6     SUBWFB    0xc6,0x1,0x1                                                                                    
0016aa   51c5     MOVF      0xc5,0x0,0x1           }while(delay_count);                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016ac   11c6     IORWF     0xc6,0x0,0x1                                                                                    
0016ae   e1fa     BNZ       0x16a4                                                                                          
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                   /* End Modifiable Section */                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016b0   946d     BCF       0x6d,0x2,0x0           UCONbits.RESUME = 0;                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               }//endif                                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016b2   0012     RETURN    0x0            }//end USBRemoteWakeup                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USB_SOF_Handler(void)                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The USB host sends out a SOF packet to full-speed devices    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  every 1 ms. This interrupt may be useful for isochronous     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  pipes. End designers should implement callback routine       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  as necessary.                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           void USB_SOF_Handler(void)                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               /* Callback routine here */                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016b4   9c68     BCF       0x68,0x6,0x0       UIRbits.SOFIF = 0;                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016b6   0012     RETURN    0x0            }//end USB_SOF_Handler                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBStallHandler(void)                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    A STALL packet is sent to the host by the SIE.               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The STALLIF is set anytime the SIE sends out a STALL         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  packet regardless of which endpoint causes it.               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  A Setup transaction overrides the STALL function. A stalled  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  endpoint stops stalling once it receives a setup packet.     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  In this case, the SIE will accepts the Setup packet and      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  set the TRNIF flag to notify the firmware. STALL function    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  for that particular endpoint pipe will be automatically      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  disabled (direction specific).                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  There are a few reasons for an endpoint to be stalled.       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  1. When a non-supported USB request is received.             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                     Example: GET_DESCRIPTOR(DEVICE_QUALIFIER)                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  2. When an endpoint is currently halted.                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  3. When the device class specifies that an endpoint must     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                     stall in response to a specific event.                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                     Example: Mass Storage Device Class                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                              If the CBW is not valid, the device shall        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                              STALL the Bulk-In pipe.                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                              See USB Mass Storage Class Bulk-only Transport   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                              Specification for more details.                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            UEPn.EPSTALL can be scanned to see which endpoint causes     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  the stall event.                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  If                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBStallHandler(void)                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * Does not really have to do anything here,                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * even for the control endpoint.                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * All BDs of Endpoint 0 are owned by SIE right now,                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * but once a Setup Transaction is received, the ownership                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * for EP0_OUT will be returned to CPU.                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * When the Setup Transaction is serviced, the ownership                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * for EP0_IN will then be forced back to CPU by firmware.                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                *                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                * NOTE: Above description is not quite true at this point.                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                *       It seems the SIE never returns the UOWN bit to CPU,                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                *       and a TRNIF is never generated upon successful                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                *       reception of a SETUP transaction.                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                *       Firmware work-around is implemented below.                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                */                                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016b8   a070     BTFSS     0x70,0x0,0x0       if(UEP0bits.EPSTALL == 1)                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016ba   d003     BRA       0x16c2                                                                                          
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016bc   ec03     CALL      0x1406,0x0             USBPrepareForNextSetupTrf();        // Firmware Work-Around              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016be   f00a                                                                                                               
0016c0   9070     BCF       0x70,0x0,0x0           UEP0bits.EPSTALL = 0;                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                               }                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016c2   9a68     BCF       0x68,0x5,0x0       UIRbits.STALLIF = 0;                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016c4   0012     RETURN    0x0            }//end USBStallHandler                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBErrorHandler(void)                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The purpose of this interrupt is mainly for debugging        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  during development. Check UEIR to see which error causes     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  the interrupt.                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBErrorHandler(void)                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016c6   9268     BCF       0x68,0x1,0x0       UIRbits.UERRIF = 0;                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016c8   0012     RETURN    0x0            }//end USBErrorHandler                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBProtocolResetHandler(void)                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    A USB bus reset is received from the host.                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    Currently, this routine flushes any pending USB              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  transactions. It empties out the USTAT FIFO. This action     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  might not be desirable in some applications.                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Overview:        Once a USB bus reset is received from the host, this         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  routine should be called. It resets the device address to    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  zero, disables all non-EP0 endpoints, initializes EP0 to     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  be ready for default communication, clears all USB           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  interrupt flags, unmasks applicable USB interrupts, and      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                  reinitializes internal state-machine variables.              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           void USBProtocolResetHandler(void)                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016ca   6a6a     CLRF      0x6a,0x0           UEIR = 0;                       // Clear all USB error flags                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016cc   6a68     CLRF      0x68,0x0           UIR = 0;                        // Clears all USB interrupts                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016ce   0e9f     MOVLW     0x9f               UEIE = 0b10011111;              // Unmask all USB error interrupts           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016d0   6e6b     MOVWF     0x6b,0x0                                                                                        
0016d2   0e7b     MOVLW     0x7b               UIE = 0b01111011;               // Enable all interrupts except ACTVIE       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016d4   6e69     MOVWF     0x69,0x0                                                                                        
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016d6   6a6e     CLRF      0x6e,0x0           UADDR = 0x00;                   // Reset to default address                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016d8   0e0f     MOVLW     0xf                mDisableEP1to15();              // Reset all non-EP0 UEPn registers          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016da   6ee6     MOVWF     0xe6,0x0                                                                                        
0016dc   0e71     MOVLW     0x71                                                                                            
0016de   6ee6     MOVWF     0xe6,0x0                                                                                        
0016e0   0e0f     MOVLW     0xf                                                                                             
0016e2   6ee6     MOVWF     0xe6,0x0                                                                                        
0016e4   d814     RCALL     0x170e                                                                                          
0016e6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0016e8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0016ea   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0016ec   0e16     MOVLW     0x16               UEP0 = EP_CTRL|HSHK_EN;         // Init EP0 as a Ctrl EP, see usbdrv.h       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016ee   6e70     MOVWF     0x70,0x0                                                                                        
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016f0   a668     BTFSS     0x68,0x3,0x0       while(UIRbits.TRNIF == 1)       // Flush any pending transactions            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016f2   d002     BRA       0x16f8                                                                                          
0016f6   d7fc     BRA       0x16f0                                                                                          
0016f4   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016f8   986d     BCF       0x6d,0x4,0x0       UCONbits.PKTDIS = 0;            // Make sure packet processing is enabled    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016fa   ec03     CALL      0x1406,0x0         USBPrepareForNextSetupTrf();    // Declared in usbctrltrf.c                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016fc   f00a                                                                                                               
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
0016fe   0100     MOVLB     0x0                usb_stat.RemoteWakeup = 0;      // Default status flag to disable            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001700   91c2     BCF       0xc2,0x0,0x1                                                                                    
001702   0100     MOVLB     0x0                usb_active_cfg = 0;             // Clear active configuration                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001704   6bc3     CLRF      0xc3,0x1                                                                                        
001706   0100     MOVLB     0x0                usb_device_state = DEFAULT_STATE;                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001708   0e03     MOVLW     0x3                                                                                             
00170a   6fc1     MOVWF     0xc1,0x1                                                                                        
00170c   0012     RETURN    0x0            }//end USBProtocolResetHandler                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           /* Auxiliary Function */                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00170e   cfd9     MOVFF     0xfd9,0xfe6    void ClearArray(byte* startAdr,byte count)                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001710   ffe6                                                                                                               
001712   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001714   ffd9                                                                                                               
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001716   0efd     MOVLW     0xfd               *startAdr;                                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001718   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00171a   ffe9                                                                                                               
00171c   0efe     MOVLW     0xfe                                                                                            
00171e   cfdb     MOVFF     0xfdb,0xfea                                                                                     
001720   ffea                                                                                                               
001722   0efc     MOVLW     0xfc               while(count)                                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001724   50db     MOVF      0xdb,0x0,0x0                                                                                    
001726   e004     BZ        0x1730                                                                                          
00172e   d7f9     BRA       0x1722                                                                                          
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                   _asm                                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001728   6aee     CLRF      0xee,0x0               clrf POSTINC0,0                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                                   _endasm                                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00172a   0efc     MOVLW     0xfc                   count--;                                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
00172c   06db     DECF      0xdb,0x1,0x0                                                                                    
                                               }//end while                                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001730   52e5     MOVF      0xe5,0x1,0x0   }//end ClearArray                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
001732   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001734   ffd9                                                                                                               
001736   0012     RETURN    0x0                                                                                             
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           /** EOF usbdrv.c *************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbdrv\usbdrv.c
                                           /*********************************************************************           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                Microchip USB C18 Firmware Version 1.0                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *********************************************************************           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * FileName:        usb9.c                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Dependencies:    See INCLUDES section below                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Processor:       PIC18                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Compiler:        C18 2.30.01+                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Company:         Microchip Technology, Inc.                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Software License Agreement                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * The software supplied herewith by Microchip Technology Incorporated           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * supplied to you, the Company’s customer, for use solely and                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * software is owned by the Company and/or its supplier, and is                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * protected under applicable copyright laws. All rights are reserved.           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Any use in violation of the foregoing restrictions may subject the            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * user to criminal sanctions under applicable laws, as well as to               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * civil liability for the breach of the terms and conditions of this            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * license.                                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Author               Date        Comment                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            ********************************************************************/           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           /** I N C L U D E S **********************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           #include <p18cxxx.h>                                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           #include "system\typedefs.h"                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           #include "system\usb\usb.h"                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           #include "io_cfg.h"                     // Required for self_power status        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           /** V A R I A B L E S ********************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           #pragma udata                                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           void USBStdGetDscHandler(void);                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           void USBStdSetCfgHandler(void);                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           void USBStdGetStatusHandler(void);                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           void USBStdFeatureReqHandler(void);                                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           /** D E C L A R A T I O N S **************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           #pragma code                                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Function:        void USBCheckStdRequest(void)                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Overview:        This routine checks the setup data packet to see if it       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                  knows how to handle it                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           void USBCheckStdRequest(void)                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000e64   0104     MOVLB     0x4                if(SetupPkt.RequestType != STANDARD) return;                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000e66   5118     MOVF      0x18,0x0,0x1                                                                                    
000e68   0b60     ANDLW     0x60                                                                                            
000e6a   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000e6c   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000e6e   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000e70   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000e72   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000e74   0900     IORLW     0x0                                                                                             
000e76   e001     BZ        0xe7a                                                                                           
000e78   d055     BRA       0xf24                                                                                           
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000e7a   5119     MOVF      0x19,0x0,0x1       switch(SetupPkt.bRequest)                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000e7c   0a07     XORLW     0x7                                                                                             
000e7e   e051     BZ        0xf22                                                                                           
000e80   0a0b     XORLW     0xb                                                                                             
000e82   e04f     BZ        0xf22                                                                                           
000e84   0a07     XORLW     0x7                                                                                             
000e86   e040     BZ        0xf08                                                                                           
000e88   0a01     XORLW     0x1                                                                                             
000e8a   e02c     BZ        0xee4                                                                                           
000e8c   0a0b     XORLW     0xb                                                                                             
000e8e   e028     BZ        0xee0                                                                                           
000e90   0a02     XORLW     0x2                                                                                             
000e92   e026     BZ        0xee0                                                                                           
000e94   0a03     XORLW     0x3                                                                                             
000e96   e022     BZ        0xedc                                                                                           
000e98   0a08     XORLW     0x8                                                                                             
000e9a   e012     BZ        0xec0                                                                                           
000e9c   0a01     XORLW     0x1                                                                                             
000e9e   e00e     BZ        0xebc                                                                                           
000ea0   0a0f     XORLW     0xf                                                                                             
000ea2   e00a     BZ        0xeb8                                                                                           
000ea4   0a03     XORLW     0x3                                                                                             
000ea6   e001     BZ        0xeaa                                                                                           
000ea8   d03c     BRA       0xf22                                                                                           
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                   case SET_ADR:                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000eaa   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000eac   0e01     MOVLW     0x1                                                                                             
000eae   6fba     MOVWF     0xba,0x1                                                                                        
000eb0   0100     MOVLB     0x0                        usb_device_state = ADR_PENDING_STATE;       // Update state only     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000eb2   0e04     MOVLW     0x4                                                                                             
000eb4   6fc1     MOVWF     0xc1,0x1                                                                                        
                                                       /* See USBCtrlTrfInHandler() in usbctrltrf.c for the next step */    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000eb6   d036     BRA       0xf24                      break;                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                   case GET_DSC:                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000eb8   d836     RCALL     0xf26                      USBStdGetDscHandler();                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000eba   d034     BRA       0xf24                      break;                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                   case SET_CFG:                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000ebc   d890     RCALL     0xfde                      USBStdSetCfgHandler();                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000ebe   d032     BRA       0xf24                      break;                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                   case GET_CFG:                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000ec0   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000ec2   0e01     MOVLW     0x1                                                                                             
000ec4   6fba     MOVWF     0xba,0x1                                                                                        
000ec6   0100     MOVLB     0x0                        pSrc.bRam = (byte*)&usb_active_cfg;         // Set Source            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000ec8   0ec3     MOVLW     0xc3                                                                                            
000eca   6fbb     MOVWF     0xbb,0x1                                                                                        
000ecc   0e00     MOVLW     0x0                                                                                             
000ece   6fbc     MOVWF     0xbc,0x1                                                                                        
000ed0   0100     MOVLB     0x0                        usb_stat.ctrl_trf_mem = _RAM;               // Set memory type       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000ed2   93c2     BCF       0xc2,0x1,0x1                                                                                    
000ed4   0100     MOVLB     0x0                        LSB(wCount) = 1;                            // Set data count        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000ed6   0e01     MOVLW     0x1                                                                                             
000ed8   6fbf     MOVWF     0xbf,0x1                                                                                        
000eda   d024     BRA       0xf24                      break;                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                   case GET_STATUS:                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000edc   d8a8     RCALL     0x102e                     USBStdGetStatusHandler();                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000ede   d022     BRA       0xf24                      break;                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                   case CLR_FEATURE:                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                   case SET_FEATURE:                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000ee0   d8f6     RCALL     0x10ce                     USBStdFeatureReqHandler();                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000ee2   d020     BRA       0xf24                      break;                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                   case GET_INTF:                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000ee4   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000ee6   0e01     MOVLW     0x1                                                                                             
000ee8   6fba     MOVWF     0xba,0x1                                                                                        
000eea   0104     MOVLB     0x4                        pSrc.bRam = (byte*)&usb_alt_intf+SetupPkt.bIntfID;  // Set source    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000eec   511c     MOVF      0x1c,0x0,0x1                                                                                    
000eee   0100     MOVLB     0x0                                                                                             
000ef0   6fbb     MOVWF     0xbb,0x1                                                                                        
000ef2   6bbc     CLRF      0xbc,0x1                                                                                        
000ef4   0ec4     MOVLW     0xc4                                                                                            
000ef6   27bb     ADDWF     0xbb,0x1,0x1                                                                                    
000ef8   0e00     MOVLW     0x0                                                                                             
000efa   23bc     ADDWFC    0xbc,0x1,0x1                                                                                    
000efc   0100     MOVLB     0x0                        usb_stat.ctrl_trf_mem = _RAM;               // Set memory type       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000efe   93c2     BCF       0xc2,0x1,0x1                                                                                    
000f00   0100     MOVLB     0x0                        LSB(wCount) = 1;                            // Set data count        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000f02   0e01     MOVLW     0x1                                                                                             
000f04   6fbf     MOVWF     0xbf,0x1                                                                                        
000f06   d00e     BRA       0xf24                      break;                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                   case SET_INTF:                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000f08   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000f0a   0e01     MOVLW     0x1                                                                                             
000f0c   6fba     MOVWF     0xba,0x1                                                                                        
000f0e   0104     MOVLB     0x4                        usb_alt_intf[SetupPkt.bIntfID] = SetupPkt.bAltID;                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000f10   511c     MOVF      0x1c,0x0,0x1                                                                                    
000f12   6aea     CLRF      0xea,0x0                                                                                        
000f14   0fc4     ADDLW     0xc4                                                                                            
000f16   6ee9     MOVWF     0xe9,0x0                                                                                        
000f18   0e00     MOVLW     0x0                                                                                             
000f1a   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000f1c   c41a     MOVFF     0x41a,0xfef                                                                                     
000f1e   ffef                                                                                                               
000f20   d001     BRA       0xf24                      break;                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                   case SET_DSC:                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                   case SYNCH_FRAME:                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                   default:                                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000f22   d000     BRA       0xf24                      break;                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                               }//end switch                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000f24   0012     RETURN    0x0            }//end USBCheckStdRequest                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Function:        void USBStdGetDscHandler(void)                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard GET_DESCRIPTOR request.    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                  It utilizes tables dynamically looks up descriptor size.     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                  This routine should never have to be modified if the tables  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                  in usbdsc.c are declared correctly.                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           void USBStdGetDscHandler(void)                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000f26   0e80     MOVLW     0x80               if(SetupPkt.bmRequestType == 0x80)                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000f28   0104     MOVLB     0x4                                                                                             
000f2a   5d18     SUBWF     0x18,0x0,0x1                                                                                    
000f2c   e157     BNZ       0xfdc                                                                                           
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000f2e   511b     MOVF      0x1b,0x0,0x1           switch(SetupPkt.bDscType)                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000f30   0a03     XORLW     0x3                                                                                             
000f32   e034     BZ        0xf9c                                                                                           
000f34   0a01     XORLW     0x1                                                                                             
000f36   e010     BZ        0xf58                                                                                           
000f38   0a03     XORLW     0x3                                                                                             
000f3a   e001     BZ        0xf3e                                                                                           
000f3c   d04d     BRA       0xfd8                                                                                           
                                                   {                                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                       case DSC_DEV:                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000f3e   0100     MOVLB     0x0                            ctrl_trf_session_owner = MUID_USB9;                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000f40   0e01     MOVLW     0x1                                                                                             
000f42   6fba     MOVWF     0xba,0x1                                                                                        
000f44   0100     MOVLB     0x0                            pSrc.bRom = (rom byte*)&device_dsc;                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000f46   0e56     MOVLW     0x56                                                                                            
000f48   6fbb     MOVWF     0xbb,0x1                                                                                        
000f4a   0e18     MOVLW     0x18                                                                                            
000f4c   6fbc     MOVWF     0xbc,0x1                                                                                        
000f4e   0e12     MOVLW     0x12                           wCount._word = sizeof(device_dsc);          // Set data count    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000f50   0100     MOVLB     0x0                                                                                             
000f52   6fbf     MOVWF     0xbf,0x1                                                                                        
000f54   6bc0     CLRF      0xc0,0x1                                                                                        
000f56   d040     BRA       0xfd8                          break;                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                       case DSC_CFG:                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000f58   0100     MOVLB     0x0                            ctrl_trf_session_owner = MUID_USB9;                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000f5a   0e01     MOVLW     0x1                                                                                             
000f5c   6fba     MOVWF     0xba,0x1                                                                                        
000f5e   0104     MOVLB     0x4                            pSrc.bRom = *(USB_CD_Ptr+SetupPkt.bDscIndex);                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000f60   511a     MOVF      0x1a,0x0,0x1                                                                                    
000f62   6ef6     MOVWF     0xf6,0x0                                                                                        
000f64   6af7     CLRF      0xf7,0x0                                                                                        
000f66   90d8     BCF       0xd8,0x0,0x0                                                                                    
000f68   36f6     RLCF      0xf6,0x1,0x0                                                                                    
000f6a   36f7     RLCF      0xf7,0x1,0x0                                                                                    
000f6c   0e04     MOVLW     0x4                                                                                             
000f6e   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
000f70   0e19     MOVLW     0x19                                                                                            
000f72   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000f74   0009     TBLRDPOSTINC                                                                                              
000f76   cff5     MOVFF     0xff5,0xbb                                                                                      
000f78   f0bb                                                                                                               
000f7a   000a     TBLRDPOSTDEC                                                                                              
000f7c   cff5     MOVFF     0xff5,0xbc                                                                                      
000f7e   f0bc                                                                                                               
000f80   0e02     MOVLW     0x2                            wCount._word = *(pSrc.wRom+1);              // Set data count    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000f82   0100     MOVLB     0x0                                                                                             
000f84   6af7     CLRF      0xf7,0x0                                                                                        
000f86   25bb     ADDWF     0xbb,0x0,0x1                                                                                    
000f88   6ef6     MOVWF     0xf6,0x0                                                                                        
000f8a   51bc     MOVF      0xbc,0x0,0x1                                                                                    
000f8c   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000f8e   0009     TBLRDPOSTINC                                                                                              
000f90   cff5     MOVFF     0xff5,0xbf                                                                                      
000f92   f0bf                                                                                                               
000f94   000a     TBLRDPOSTDEC                                                                                              
000f96   cff5     MOVFF     0xff5,0xc0                                                                                      
000f98   f0c0                                                                                                               
000f9a   d01e     BRA       0xfd8                          break;                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                       case DSC_STR:                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000f9c   0100     MOVLB     0x0                            ctrl_trf_session_owner = MUID_USB9;                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000f9e   0e01     MOVLW     0x1                                                                                             
000fa0   6fba     MOVWF     0xba,0x1                                                                                        
000fa2   0104     MOVLB     0x4                            pSrc.bRom = *(USB_SD_Ptr+SetupPkt.bDscIndex);                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000fa4   511a     MOVF      0x1a,0x0,0x1                                                                                    
000fa6   6ef6     MOVWF     0xf6,0x0                                                                                        
000fa8   6af7     CLRF      0xf7,0x0                                                                                        
000faa   90d8     BCF       0xd8,0x0,0x0                                                                                    
000fac   36f6     RLCF      0xf6,0x1,0x0                                                                                    
000fae   36f7     RLCF      0xf7,0x1,0x0                                                                                    
000fb0   0e08     MOVLW     0x8                                                                                             
000fb2   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
000fb4   0e19     MOVLW     0x19                                                                                            
000fb6   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000fb8   0009     TBLRDPOSTINC                                                                                              
000fba   cff5     MOVFF     0xff5,0xbb                                                                                      
000fbc   f0bb                                                                                                               
000fbe   000a     TBLRDPOSTDEC                                                                                              
000fc0   cff5     MOVFF     0xff5,0xbc                                                                                      
000fc2   f0bc                                                                                                               
000fc4   c0bb     MOVFF     0xbb,0xff6                     wCount._word = *pSrc.bRom;                  // Set data count    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000fc6   fff6                                                                                                               
000fc8   c0bc     MOVFF     0xbc,0xff7                                                                                      
000fca   fff7                                                                                                               
000fcc   0008     TBLRD                                                                                                     
000fce   50f5     MOVF      0xf5,0x0,0x0                                                                                    
000fd0   0100     MOVLB     0x0                                                                                             
000fd2   6fbf     MOVWF     0xbf,0x1                                                                                        
000fd4   6bc0     CLRF      0xc0,0x1                                                                                        
000fd6   d000     BRA       0xfd8                          break;                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                   }//end switch                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000fd8   0100     MOVLB     0x0                    usb_stat.ctrl_trf_mem = _ROM;                       // Set memory type   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000fda   83c2     BSF       0xc2,0x1,0x1                                                                                    
                                               }//end if                                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000fdc   0012     RETURN    0x0            }//end USBStdGetDscHandler                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Function:        void USBStdSetCfgHandler(void)                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Overview:        This routine first disables all endpoints by clearing        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                  UEP registers. It then configures (initializes) endpoints    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                  specified in the modifiable section.                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           void USBStdSetCfgHandler(void)                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000fde   0100     MOVLB     0x0                ctrl_trf_session_owner = MUID_USB9;                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000fe0   0e01     MOVLW     0x1                                                                                             
000fe2   6fba     MOVWF     0xba,0x1                                                                                        
000fe4   0e0f     MOVLW     0xf                mDisableEP1to15();                          // See usbdrv.h                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000fe6   6ee6     MOVWF     0xe6,0x0                                                                                        
000fe8   0e71     MOVLW     0x71                                                                                            
000fea   6ee6     MOVWF     0xe6,0x0                                                                                        
000fec   0e0f     MOVLW     0xf                                                                                             
000fee   6ee6     MOVWF     0xe6,0x0                                                                                        
000ff0   ec87     CALL      0x170e,0x0                                                                                      
000ff2   f00b                                                                                                               
000ff4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000ff6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000ff8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000ffa   0e01     MOVLW     0x1                ClearArray((byte*)&usb_alt_intf,MAX_NUM_INT);                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
000ffc   6ee6     MOVWF     0xe6,0x0                                                                                        
000ffe   0ec4     MOVLW     0xc4                                                                                            
001000   6ee6     MOVWF     0xe6,0x0                                                                                        
001002   0e00     MOVLW     0x0                                                                                             
001004   6ee6     MOVWF     0xe6,0x0                                                                                        
001006   ec87     CALL      0x170e,0x0                                                                                      
001008   f00b                                                                                                               
00100a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00100c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00100e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001010   c41a     MOVFF     0x41a,0xc3         usb_active_cfg = SetupPkt.bCfgValue;                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001012   f0c3                                                                                                               
001014   0104     MOVLB     0x4                if(SetupPkt.bCfgValue == 0)                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001016   511a     MOVF      0x1a,0x0,0x1                                                                                    
001018   e104     BNZ       0x1022                                                                                          
00101a   0100     MOVLB     0x0                    usb_device_state = ADDRESS_STATE;                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
00101c   0e05     MOVLW     0x5                                                                                             
00101e   6fc1     MOVWF     0xc1,0x1                                                                                        
001020   d005     BRA       0x102c             else                                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001022   0100     MOVLB     0x0                    usb_device_state = CONFIGURED_STATE;                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001024   0e06     MOVLW     0x6                                                                                             
001026   6fc1     MOVWF     0xc1,0x1                                                                                        
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                   /* Modifiable Section */                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                   #if defined(USB_USE_GEN)                // See autofiles\usbcfg.h        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001028   ec9c     CALL      0x1738,0x0             USBGenInitEP();                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
00102a   f00b                                                                                                               
                                                   #endif                                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                   /* End modifiable section */                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                               }//end if(SetupPkt.bcfgValue == 0)                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
00102c   0012     RETURN    0x0            }//end USBStdSetCfgHandler                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Function:        void USBStdGetStatusHandler(void)                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard GET_STATUS request         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           void USBStdGetStatusHandler(void)                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
00102e   0104     MOVLB     0x4                CtrlTrfData._byte0 = 0;                         // Initialize content        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001030   6b20     CLRF      0x20,0x1                                                                                        
001032   6b21     CLRF      0x21,0x1           CtrlTrfData._byte1 = 0;                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001034   0104     MOVLB     0x4                switch(SetupPkt.Recipient)                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001036   5118     MOVF      0x18,0x0,0x1                                                                                    
001038   0b1f     ANDLW     0x1f                                                                                            
00103a   0a02     XORLW     0x2                                                                                             
00103c   e016     BZ        0x106a                                                                                          
00103e   0a03     XORLW     0x3                                                                                             
001040   e010     BZ        0x1062                                                                                          
001042   0a01     XORLW     0x1                                                                                             
001044   e001     BZ        0x1048                                                                                          
001046   d035     BRA       0x10b2                                                                                          
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                   case RCPT_DEV:                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001048   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
00104a   0e01     MOVLW     0x1                                                                                             
00104c   6fba     MOVWF     0xba,0x1                                                                                        
                                                       /*                                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                        * _byte0: bit0: Self-Powered Status [0] Bus-Powered [1] Self-Powered F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                        *         bit1: RemoteWakeup        [0] Disabled    [1] Enabled     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                        */                                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
00104e   a480     BTFSS     0x80,0x2,0x0               if(self_power == 1)                     // self_power defined in io_cfg.h F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001050   d002     BRA       0x1056                                                                                          
001052   0104     MOVLB     0x4                            CtrlTrfData._byte0|=0b000000001;    // Set bit0                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001054   8120     BSF       0x20,0x0,0x1                                                                                    
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001056   0100     MOVLB     0x0                        if(usb_stat.RemoteWakeup == 1)          // usb_stat defined in usbmmap.c F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001058   a1c2     BTFSS     0xc2,0x0,0x1                                                                                    
00105a   d002     BRA       0x1060                                                                                          
00105c   0104     MOVLB     0x4                            CtrlTrfData._byte0|=0b00000010;     // Set bit1                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
00105e   8320     BSF       0x20,0x1,0x1                                                                                    
001060   d028     BRA       0x10b2                     break;                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                   case RCPT_INTF:                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001062   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;     // No data to update         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001064   0e01     MOVLW     0x1                                                                                             
001066   6fba     MOVWF     0xba,0x1                                                                                        
001068   d024     BRA       0x10b2                     break;                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                   case RCPT_EP:                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
00106a   0100     MOVLB     0x0                        ctrl_trf_session_owner = MUID_USB9;                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
00106c   0e01     MOVLW     0x1                                                                                             
00106e   6fba     MOVWF     0xba,0x1                                                                                        
                                                       /*                                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                        * _byte0: bit0: Halt Status [0] Not Halted [1] Halted               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                        */                                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001070   0104     MOVLB     0x4                        pDst.bRam = (byte*)&ep0Bo+(SetupPkt.EPNum*8)+(SetupPkt.EPDir*4);     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001072   511c     MOVF      0x1c,0x0,0x1                                                                                    
001074   0b0f     ANDLW     0xf                                                                                             
001076   0d08     MULLW     0x8                                                                                             
001078   50f3     MOVF      0xf3,0x0,0x0                                                                                    
00107a   6a11     CLRF      0x11,0x0                                                                                        
00107c   0f00     ADDLW     0x0                                                                                             
00107e   6e10     MOVWF     0x10,0x0                                                                                        
001080   0e04     MOVLW     0x4                                                                                             
001082   2211     ADDWFC    0x11,0x1,0x0                                                                                    
001084   511c     MOVF      0x1c,0x0,0x1                                                                                    
001086   0b80     ANDLW     0x80                                                                                            
001088   e001     BZ        0x108c                                                                                          
00108a   0e01     MOVLW     0x1                                                                                             
00108c   0d04     MULLW     0x4                                                                                             
00108e   50f3     MOVF      0xf3,0x0,0x0                                                                                    
001090   0100     MOVLB     0x0                                                                                             
001092   2410     ADDWF     0x10,0x0,0x0                                                                                    
001094   6fbd     MOVWF     0xbd,0x1                                                                                        
001096   0e00     MOVLW     0x0                                                                                             
001098   2011     ADDWFC    0x11,0x0,0x0                                                                                    
00109a   6fbe     MOVWF     0xbe,0x1                                                                                        
00109c   c0bd     MOVFF     0xbd,0xfe9                 if(*pDst.bRam & _BSTALL)    // Use _BSTALL as a bit mask             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
00109e   ffe9                                                                                                               
0010a0   c0be     MOVFF     0xbe,0xfea                                                                                      
0010a2   ffea                                                                                                               
0010a4   50ef     MOVF      0xef,0x0,0x0                                                                                    
0010a6   0b04     ANDLW     0x4                                                                                             
0010a8   e003     BZ        0x10b0                                                                                          
0010aa   0104     MOVLB     0x4                            CtrlTrfData._byte0=0x01;// Set bit0                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
0010ac   0e01     MOVLW     0x1                                                                                             
0010ae   6f20     MOVWF     0x20,0x1                                                                                        
0010b0   d000     BRA       0x10b2                     break;                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                               }//end switch                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
0010b2   0100     MOVLB     0x0                if(ctrl_trf_session_owner == MUID_USB9)                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
0010b4   05ba     DECF      0xba,0x0,0x1                                                                                    
0010b6   e10a     BNZ       0x10cc                                                                                          
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
0010b8   0100     MOVLB     0x0                    pSrc.bRam = (byte*)&CtrlTrfData;            // Set Source                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
0010ba   0e20     MOVLW     0x20                                                                                            
0010bc   6fbb     MOVWF     0xbb,0x1                                                                                        
0010be   0e04     MOVLW     0x4                                                                                             
0010c0   6fbc     MOVWF     0xbc,0x1                                                                                        
0010c2   0100     MOVLB     0x0                    usb_stat.ctrl_trf_mem = _RAM;               // Set memory type           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
0010c4   93c2     BCF       0xc2,0x1,0x1                                                                                    
0010c6   0100     MOVLB     0x0                    LSB(wCount) = 2;                            // Set data count            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
0010c8   0e02     MOVLW     0x2                                                                                             
0010ca   6fbf     MOVWF     0xbf,0x1                                                                                        
                                               }//end if(...)                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
0010cc   0012     RETURN    0x0            }//end USBStdGetStatusHandler                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Function:        void USBStdFeatureReqHandler(void)                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard SET & CLEAR FEATURES       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                  requests                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           void USBStdFeatureReqHandler(void)                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
0010ce   0104     MOVLB     0x4                if((SetupPkt.bFeature == DEVICE_REMOTE_WAKEUP)&&                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
0010d0   051a     DECF      0x1a,0x0,0x1                                                                                    
0010d2   e110     BNZ       0x10f4                (SetupPkt.Recipient == RCPT_DEV))                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
0010d4   5118     MOVF      0x18,0x0,0x1                                                                                    
0010d6   0b1f     ANDLW     0x1f                                                                                            
0010d8   0900     IORLW     0x0                                                                                             
0010da   e10c     BNZ       0x10f4                                                                                          
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
0010dc   0100     MOVLB     0x0                    ctrl_trf_session_owner = MUID_USB9;                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
0010de   0e01     MOVLW     0x1                                                                                             
0010e0   6fba     MOVWF     0xba,0x1                                                                                        
0010e2   0e03     MOVLW     0x3                    if(SetupPkt.bRequest == SET_FEATURE)                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
0010e4   0104     MOVLB     0x4                                                                                             
0010e6   5d19     SUBWF     0x19,0x0,0x1                                                                                    
0010e8   e103     BNZ       0x10f0                                                                                          
0010ea   0100     MOVLB     0x0                        usb_stat.RemoteWakeup = 1;                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
0010ec   81c2     BSF       0xc2,0x0,0x1                                                                                    
0010ee   d002     BRA       0x10f4                 else                                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
0010f0   0100     MOVLB     0x0                        usb_stat.RemoteWakeup = 0;                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
0010f2   91c2     BCF       0xc2,0x0,0x1                                                                                    
                                               }//end if                                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
0010f4   0104     MOVLB     0x4                if((SetupPkt.bFeature == ENDPOINT_HALT)&&                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
0010f6   511a     MOVF      0x1a,0x0,0x1                                                                                    
0010f8   e13a     BNZ       0x116e                (SetupPkt.Recipient == RCPT_EP)&&                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
0010fa   5118     MOVF      0x18,0x0,0x1                                                                                    
0010fc   0b1f     ANDLW     0x1f                                                                                            
0010fe   0802     SUBLW     0x2                                                                                             
001100   e136     BNZ       0x116e                                                                                          
001102   511c     MOVF      0x1c,0x0,0x1          (SetupPkt.EPNum != 0))                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001104   0b0f     ANDLW     0xf                                                                                             
001106   0900     IORLW     0x0                                                                                             
001108   e032     BZ        0x116e                                                                                          
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
00110a   0100     MOVLB     0x0                    ctrl_trf_session_owner = MUID_USB9;                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
00110c   0e01     MOVLW     0x1                                                                                             
00110e   6fba     MOVWF     0xba,0x1                                                                                        
                                                   /* Must do address calculation here */                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001110   0104     MOVLB     0x4                    pDst.bRam = (byte*)&ep0Bo+(SetupPkt.EPNum*8)+(SetupPkt.EPDir*4);         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001112   511c     MOVF      0x1c,0x0,0x1                                                                                    
001114   0b0f     ANDLW     0xf                                                                                             
001116   0d08     MULLW     0x8                                                                                             
001118   50f3     MOVF      0xf3,0x0,0x0                                                                                    
00111a   6a11     CLRF      0x11,0x0                                                                                        
00111c   0f00     ADDLW     0x0                                                                                             
00111e   6e10     MOVWF     0x10,0x0                                                                                        
001120   0e04     MOVLW     0x4                                                                                             
001122   2211     ADDWFC    0x11,0x1,0x0                                                                                    
001124   511c     MOVF      0x1c,0x0,0x1                                                                                    
001126   0b80     ANDLW     0x80                                                                                            
001128   e001     BZ        0x112c                                                                                          
00112a   0e01     MOVLW     0x1                                                                                             
00112c   0d04     MULLW     0x4                                                                                             
00112e   50f3     MOVF      0xf3,0x0,0x0                                                                                    
001130   0100     MOVLB     0x0                                                                                             
001132   2410     ADDWF     0x10,0x0,0x0                                                                                    
001134   6fbd     MOVWF     0xbd,0x1                                                                                        
001136   0e00     MOVLW     0x0                                                                                             
001138   2011     ADDWFC    0x11,0x0,0x0                                                                                    
00113a   6fbe     MOVWF     0xbe,0x1                                                                                        
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
00113c   0e03     MOVLW     0x3                    if(SetupPkt.bRequest == SET_FEATURE)                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
00113e   0104     MOVLB     0x4                                                                                             
001140   5d19     SUBWF     0x19,0x0,0x1                                                                                    
001142   e107     BNZ       0x1152                                                                                          
001144   0e84     MOVLW     0x84                       *pDst.bRam = _USIE|_BSTALL;                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001146   c0bd     MOVFF     0xbd,0xfe9                                                                                      
001148   ffe9                                                                                                               
00114a   c0be     MOVFF     0xbe,0xfea                                                                                      
00114c   ffea                                                                                                               
00114e   6eef     MOVWF     0xef,0x0                                                                                        
001150   d00e     BRA       0x116e                 else                                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                   {                                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001152   af1c     BTFSS     0x1c,0x7,0x1               if(SetupPkt.EPDir == 1) // IN                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001154   d006     BRA       0x1162                                                                                          
001156   c0bd     MOVFF     0xbd,0xfe9                     *pDst.bRam = _UCPU;                                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001158   ffe9                                                                                                               
00115a   c0be     MOVFF     0xbe,0xfea                                                                                      
00115c   ffea                                                                                                               
00115e   6aef     CLRF      0xef,0x0                                                                                        
001160   d006     BRA       0x116e                     else                                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001162   0e88     MOVLW     0x88                           *pDst.bRam = _USIE|_DAT0|_DTSEN;                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
001164   c0bd     MOVFF     0xbd,0xfe9                                                                                      
001166   ffe9                                                                                                               
001168   c0be     MOVFF     0xbe,0xfea                                                                                      
00116a   ffea                                                                                                               
00116c   6eef     MOVWF     0xef,0x0                                                                                        
                                                   }//end if                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                               }//end if                                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
00116e   0012     RETURN    0x0            }//end USBStdFeatureReqHandler                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           /** EOF usb9.c ***************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usb9\usb9.c
                                           /*********************************************************************           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                Microchip USB C18 Firmware Version 1.0                         F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *********************************************************************           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * FileName:        usbdsc.c                                                     F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * Dependencies:    See INCLUDES section below                                   F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * Processor:       PIC18                                                        F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * Compiler:        C18 2.30.01+                                                 F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * Company:         Microchip Technology, Inc.                                   F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * Software License Agreement                                                    F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * The software supplied herewith by Microchip Technology Incorporated           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * supplied to you, the Company’s customer, for use solely and                   F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * software is owned by the Company and/or its supplier, and is                  F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * protected under applicable copyright laws. All rights are reserved.           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * Any use in violation of the foregoing restrictions may subject the            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * user to criminal sanctions under applicable laws, as well as to               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * civil liability for the breach of the terms and conditions of this            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * license.                                                                      F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            ********************************************************************/           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           /*********************************************************************           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * -usbdsc.c-                                                                    F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * This file contains the USB descriptor information. It is used                 F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * in conjunction with the usbdsc.h file. When a descriptor is added             F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * or removed from the main configuration descriptor, i.e. CFG01,                F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * the user must also change the descriptor structure defined in                 F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * the usbdsc.h file. The structure is used to calculate the                     F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * descriptor size, i.e. sizeof(CFG01).                                          F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * A typical configuration descriptor consists of:                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * At least one configuration descriptor (USB_CFG_DSC)                           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * One or more interface descriptors (USB_INTF_DSC)                              F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * One or more endpoint descriptors (USB_EP_DSC)                                 F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * Naming Convention:                                                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * To resolve ambiguity, the naming convention are as followed:                  F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * - USB_CFG_DSC type should be named cdxx, where xx is the                      F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *   configuration number. This number should match the actual                   F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *   index value of this configuration.                                          F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * - USB_INTF_DSC type should be named i<yy>a<zz>, where yy is the               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *   interface number and zz is the alternate interface number.                  F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * - USB_EP_DSC type should be named ep<##><d>_i<yy>a<zz>, where                 F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *   ## is the endpoint number and d is the direction of transfer.               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *   The interface name should also be listed as a suffix to identify            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *   which interface does the endpoint belong to.                                F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * Example:                                                                      F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * If a device has one configuration, two interfaces; interface 0                F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * has two endpoints (in and out), and interface 1 has one endpoint(in).         F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * Then the CFG01 structure in the usbdsc.h should be:                           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * #define CFG01 rom struct                            \                         F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * {   USB_CFG_DSC             cd01;                   \                         F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *     USB_INTF_DSC            i00a00;                 \                         F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep01o_i00a00;           \                         F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep01i_i00a00;           \                         F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *     USB_INTF_DSC            i01a00;                 \                         F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *     USB_EP_DSC              ep02i_i01a00;           \                         F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * } cfg01                                                                       F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * Note the hierarchy of the descriptors above, it follows the USB               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * specification requirement. All endpoints belonging to an interface            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * should be listed immediately after that interface.                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * Filling in the descriptor values in the usbdsc.c file:                        F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * Most items should be self-explanatory, however, a few will be                 F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * explained for clarification.                                                  F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * [Configuration Descriptor(USB_CFG_DSC)]                                       F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * The configuration attribute must always have the _DEFAULT                     F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * definition at the minimum. Additional options can be ORed                     F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * to the _DEFAULT attribute. Available options are _SELF and _RWU.              F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * These definitions are defined in the usbdefs_std_dsc.h file. The              F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * _SELF tells the USB host that this device is self-powered. The                F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * _RWU tells the USB host that this device supports Remote Wakeup.              F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * [Endpoint Descriptor(USB_EP_DSC)]                                             F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * Assume the following example:                                                 F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * sizeof(USB_EP_DSC),DSC_EP,_EP01_OUT,_BULK,64,0x00                             F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * The first two parameters are self-explanatory. They specify the               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * length of this endpoint descriptor (7) and the descriptor type.               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * The next parameter identifies the endpoint, the definitions are               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * defined in usbdefs_std_dsc.h and has the following naming                     F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * convention:                                                                   F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * _EP<##>_<dir>                                                                 F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * where ## is the endpoint number and dir is the direction of                   F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * transfer. The dir has the value of either 'OUT' or 'IN'.                      F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * The next parameter identifies the type of the endpoint. Available             F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * options are _BULK, _INT, _ISO, and _CTRL. The _CTRL is not                    F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * typically used because the default control transfer endpoint is               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * not defined in the USB descriptors. When _ISO option is used,                 F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * addition options can be ORed to _ISO. Example:                                F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * _ISO|_AD|_FE                                                                  F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * This describes the endpoint as an isochronous pipe with adaptive              F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * and feedback attributes. See usbdefs_std_dsc.h and the USB                    F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * specification for details. The next parameter defines the size of             F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * the endpoint. The last parameter in the polling interval.                     F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * Adding a USB String                                                           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * A string descriptor array should have the following format:                   F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * rom struct{byte bLength;byte bDscType;word string[size];}sdxxx={              F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * sizeof(sdxxx),DSC_STR,<text>};                                                F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * The above structure provides a means for the C compiler to                    F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * calculate the length of string descriptor sdxxx, where xxx is the             F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * index number. The first two bytes of the descriptor are descriptor            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * length and type. The rest <text> are string texts which must be               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * in the unicode format. The unicode format is achieved by declaring            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * each character as a word type. The whole text string is declared              F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * as a word array with the number of characters equals to <size>.               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * <size> has to be manually counted and entered into the array                  F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * declaration. Let's study this through an example:                             F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * if the string is "USB" , then the string descriptor should be:                F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * (Using index 02)                                                              F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * rom struct{byte bLength;byte bDscType;word string[3];}sd002={                 F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * sizeof(sd002),DSC_STR,'U','S','B'};                                           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * A USB project may have multiple strings and the firmware supports             F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * the management of multiple strings through a look-up table.                   F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * The look-up table is defined as:                                              F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * rom const unsigned char *rom USB_SD_Ptr[]={&sd000,&sd001,&sd002};             F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * The above declaration has 3 strings, sd000, sd001, and sd002.                 F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * Strings can be removed or added. sd000 is a specialized string                F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * descriptor. It defines the language code, usually this is                     F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * US English (0x0409). The index of the string must match the index             F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * position of the USB_SD_Ptr array, &sd000 must be in position                  F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * USB_SD_Ptr[0], &sd001 must be in position USB_SD_Ptr[1] and so on.            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * The look-up table USB_SD_Ptr is used by the get string handler                F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * function in usb9.c.                                                           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * -------------------------------------------------------------------           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * The look-up table scheme also applies to the configuration                    F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * descriptor. A USB device may have multiple configuration                      F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * descriptors, i.e. CFG01, CFG02, etc. To add a configuration                   F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * descriptor, user must implement a structure similar to CFG01.                 F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * The next step is to add the configuration descriptor name, i.e.               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * cfg01, cfg02,.., to the look-up table USB_CD_Ptr. USB_CD_Ptr[0]               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * is a dummy place holder since configuration 0 is the un-configured            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * state according to the definition in the USB specification.                   F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            ********************************************************************/           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           /*********************************************************************           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * Descriptor specific type definitions are defined in:                          F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * system\usb\usbdefs\usbdefs_std_dsc.h                                          F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * Configuration information is defined in:                                      F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            * autofiles\usbcfg.h                                                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                            ********************************************************************/           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           /** I N C L U D E S *************************************************/           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           #include "system\typedefs.h"                                                     F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           #include "system\usb\usb.h"                                                      F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           /** C O N S T A N T S ************************************************/          F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           #pragma romdata                                                                  F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           /* Device Descriptor */                                                          F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           rom USB_DEV_DSC device_dsc=                                                      F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               sizeof(USB_DEV_DSC),    // Size of this descriptor in bytes                  F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               DSC_DEV,                // DEVICE descriptor type                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               0x0200,                 // USB Spec Release Number in BCD format             F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               0x00,                   // Class Code                                        F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               0x00,                   // Subclass code                                     F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               0x00,                   // Protocol code                                     F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               EP0_BUFF_SIZE,          // Max packet size for EP0, see usbcfg.h             F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               0x04D8,                 // Vendor ID                                         F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               0x000C,                 // Product ID: PICDEM FS USB (DEMO Mode)             F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               0x0000,                 // Device release number in BCD format               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               0x01,                   // Manufacturer string index                         F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               0x02,                   // Product string index                              F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               0x00,                   // Device serial number string index                 F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               0x01                    // Number of possible configurations                 F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           };                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           /* Configuration 1 Descriptor */                                                 F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           CFG01=                                                                           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               /* Configuration Descriptor */                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               sizeof(USB_CFG_DSC),    // Size of this descriptor in bytes                  F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               DSC_CFG,                // CONFIGURATION descriptor type                     F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               sizeof(cfg01),          // Total length of data for this cfg                 F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               1,                      // Number of interfaces in this cfg                  F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               1,                      // Index value of this configuration                 F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               0,                      // Configuration string index                        F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               _DEFAULT,               // Attributes, see usbdefs_std_dsc.h                 F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               50,                     // Max power consumption (2X mA)                     F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               /* Interface Descriptor */                                                   F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               sizeof(USB_INTF_DSC),   // Size of this descriptor in bytes                  F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               DSC_INTF,               // INTERFACE descriptor type                         F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               0,                      // Interface Number                                  F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               0,                      // Alternate Setting Number                          F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               2,                      // Number of endpoints in this intf                  F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               0x00,                   // Class code                                        F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               0x00,                   // Subclass code                                     F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               0x00,                   // Protocol code                                     F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               0,                      // Interface string index                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               /* Endpoint Descriptors */                                                   F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP01_OUT,_INT,USBGEN_EP_SIZE,32,                  F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP01_IN,_INT,USBGEN_EP_SIZE,32                    F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           };                                                                               F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[1];}sd000={                    F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           sizeof(sd000),DSC_STR,0x0409};                                                   F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[25];}sd001={                   F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           sizeof(sd001),DSC_STR,                                                           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           'M','i','c','r','o','c','h','i','p',' ',                                         F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           'T','e','c','h','n','o','l','o','g','y',' ','I','n','c','.'};                    F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[33];}sd002={                   F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           sizeof(sd002),DSC_STR,                                                           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           'P','I','C','D','E','M',' ','F','S',' ','U','S','B',' ',                         F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           'D','e','m','o',' ','B','o','a','r','d',' ','(','C',')',                         F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           ' ','2','0','0','4'};                                                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           rom const unsigned char *rom USB_CD_Ptr[]={&cfg01,&cfg01};                       F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           rom const unsigned char *rom USB_SD_Ptr[]={&sd000,&sd001,&sd002};                F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           #pragma code                                                                     F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           /** EOF usbdsc.c ****************************************************/           F:\ecom\EC_Mouse_Week_6\PIC\autofiles\usbdsc.c
                                           /*********************************************************************           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                Microchip USB C18 Firmware Version 1.0                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *********************************************************************           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * FileName:        usbctrltrf.c                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Dependencies:    See INCLUDES section below                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Processor:       PIC18                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Compiler:        C18 2.30.01+                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Company:         Microchip Technology, Inc.                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Software License Agreement                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * The software supplied herewith by Microchip Technology Incorporated           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * supplied to you, the Company’s customer, for use solely and                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * software is owned by the Company and/or its supplier, and is                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * protected under applicable copyright laws. All rights are reserved.           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Any use in violation of the foregoing restrictions may subject the            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * user to criminal sanctions under applicable laws, as well as to               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * civil liability for the breach of the terms and conditions of this            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * license.                                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Author               Date        Comment                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            ********************************************************************/           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /** I N C L U D E S **********************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           #include <p18cxxx.h>                                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           #include "system\typedefs.h"                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           #include "system\usb\usb.h"                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /** V A R I A B L E S ********************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           #pragma udata                                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           byte ctrl_trf_state;                // Control Transfer State                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           byte ctrl_trf_session_owner;        // Current transfer session owner            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           POINTER pSrc;                       // Data source pointer                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           POINTER pDst;                       // Data destination pointer                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           WORD wCount;                        // Data counter                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfSetupHandler(void);                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfOutHandler(void);                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfInHandler(void);                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /** D E C L A R A T I O N S **************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           #pragma code                                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlEPService(void)                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    USTAT is loaded with a valid endpoint address.               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        USBCtrlEPService checks for three transaction types that     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  it knows how to service and services them:                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. EP0 SETUP                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. EP0 OUT                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. EP0 IN                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  It ignores all other types (i.e. EP1, EP2, etc.)             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlEPService(void)                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001170   506c     MOVF      0x6c,0x0,0x0       if(USTAT == EP00_OUT)                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001172   e002     BZ        0x1178                                                                                          
001174   0e00     MOVLW     0x0                                                                                             
001176   d001     BRA       0x117a                                                                                          
001178   0e01     MOVLW     0x1                                                                                             
00117a   0900     IORLW     0x0                                                                                             
00117c   e00b     BZ        0x1194                                                                                          
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00117e   0104     MOVLB     0x4                    if(ep0Bo.Stat.PID == SETUP_TOKEN)           // EP0 SETUP                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001180   5100     MOVF      0x0,0x0,0x1                                                                                     
001182   0b3c     ANDLW     0x3c                                                                                            
001184   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
001186   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
001188   080d     SUBLW     0xd                                                                                             
00118a   e102     BNZ       0x1190                                                                                          
00118c   d80c     RCALL     0x11a6                     USBCtrlTrfSetupHandler();                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00118e   d001     BRA       0x1192                 else                                        // EP0 OUT                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001190   d81c     RCALL     0x11ca                     USBCtrlTrfOutHandler();                                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001192   d008     BRA       0x11a4             else if(USTAT == EP00_IN)                       // EP0 IN                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001194   506c     MOVF      0x6c,0x0,0x0                                                                                    
001196   e002     BZ        0x119c                                                                                          
001198   0e00     MOVLW     0x0                                                                                             
00119a   d001     BRA       0x119e                                                                                          
00119c   0e01     MOVLW     0x1                                                                                             
00119e   0904     IORLW     0x4                                                                                             
0011a0   e001     BZ        0x11a4                                                                                          
0011a2   d823     RCALL     0x11ea                 USBCtrlTrfInHandler();                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011a4   0012     RETURN    0x0            }//end USBCtrlEPService                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfSetupHandler(void)                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    SetupPkt buffer is loaded with valid USB Setup Data          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine is a task dispatcher and has 3 stages.          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. It initializes the control transfer state machine.        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. It calls on each of the module that may know how to       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     service the Setup Request from the host.                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     Module Example: USB9, HID, CDC, MSD, ...                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     As new classes are added, ClassReqHandler table in        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     usbdsc.c should be updated to call all available          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     class handlers.                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. Once each of the modules has had a chance to check if     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     it is responsible for servicing the request, stage 3      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     then checks direction of the transfer to determine how    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     to prepare EP0 for the control transfer.                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     Refer to USBCtrlEPServiceComplete() for more details.     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            Microchip USB Firmware has three different states for        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  the control transfer state machine:                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. WAIT_SETUP                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. CTRL_TRF_TX                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. CTRL_TRF_RX                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Refer to firmware manual to find out how one state           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  is transitioned to another.                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  A Control Transfer is composed of many USB transactions.     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  When transferring data over multiple transactions,           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  it is important to keep track of data source, data           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  destination, and data count. These three parameters are      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  stored in pSrc,pDst, and wCount. A flag is used to           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  note if the data source is from ROM or RAM.                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011a6   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfSetupHandler(void)                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011a8   ffe6                                                                                                               
0011aa   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0011ac   ffd9                                                                                                               
0011ae   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               byte i;                                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 1 */                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011b0   0100     MOVLB     0x0                ctrl_trf_state = WAIT_SETUP;                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011b2   6bb9     CLRF      0xb9,0x1                                                                                        
0011b4   6bba     CLRF      0xba,0x1           ctrl_trf_session_owner = MUID_NULL;     // Set owner to NULL                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011b6   6bbf     CLRF      0xbf,0x1           wCount._word = 0;                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011b8   6bc0     CLRF      0xc0,0x1                                                                                        
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 2 */                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011ba   ec32     CALL      0xe64,0x0          USBCheckStdRequest();                   // See system\usb9\usb9.c            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011bc   f007                                                                                                               
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Modifiable Section */                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               // Insert other USB Device Class Request Handlers here                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               /* End Modifiable Section */                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 3 */                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011be   d8dd     RCALL     0x137a             USBCtrlEPServiceComplete();                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011c0   52e5     MOVF      0xe5,0x1,0x0   }//end USBCtrlTrfSetupHandler                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011c2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0011c4   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0011c6   ffd9                                                                                                               
0011c8   0012     RETURN    0x0                                                                                             
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfOutHandler(void)                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine handles an OUT transaction according to         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  which control transfer state is currently active.            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            Note that if the the control transfer was from               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  host to device, the session owner should be notified         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  at the end of each OUT transaction to service the            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  received data.                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfOutHandler(void)                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011ca   0e02     MOVLW     0x2                if(ctrl_trf_state == CTRL_TRF_RX)                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011cc   0100     MOVLB     0x0                                                                                             
0011ce   5db9     SUBWF     0xb9,0x0,0x1                                                                                    
0011d0   e10a     BNZ       0x11e6                                                                                          
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011d2   d896     RCALL     0x1300                 USBCtrlTrfRxService();                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                   /*                                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                    * Don't have to worry about overwriting _KEEP bit                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                    * because if _KEEP was set, TRNIF would not have been                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                    * generated in the first place.                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                    */                                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011d4   0104     MOVLB     0x4                    if(ep0Bo.Stat.DTS == 0)                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011d6   bd00     BTFSC     0x0,0x6,0x1                                                                                     
0011d8   d003     BRA       0x11e0                                                                                          
0011da   0ec8     MOVLW     0xc8                       ep0Bo.Stat._byte = _USIE|_DAT1|_DTSEN;                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011dc   6f00     MOVWF     0x0,0x1                                                                                         
0011de   d002     BRA       0x11e4                 else                                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011e0   0e88     MOVLW     0x88                       ep0Bo.Stat._byte = _USIE|_DAT0|_DTSEN;                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011e2   6f00     MOVWF     0x0,0x1                                                                                         
                                               }                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011e4   d001     BRA       0x11e8             else    // CTRL_TRF_TX                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011e6   d90f     RCALL     0x1406                 USBPrepareForNextSetupTrf();                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011e8   0012     RETURN    0x0            }//end USBCtrlTrfOutHandler                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfInHandler(void)                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine handles an IN transaction according to          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  which control transfer state is currently active.            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            A Set Address Request must not change the acutal address     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  of the device until the completion of the control            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer. The end of the control transfer for Set Address    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Request is an IN transaction. Therefore it is necessary      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  to service this unique situation when the condition is       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  right. Macro mUSBCheckAdrPendingState is defined in          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  usb9.h and its function is to specifically service this      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  event.                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfInHandler(void)                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011ea   0e04     MOVLW     0x4                mUSBCheckAdrPendingState();         // Must check if in ADR_PENDING_STATE    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0011ec   0100     MOVLB     0x0                                                                                             
0011ee   5dc1     SUBWF     0xc1,0x0,0x1                                                                                    
0011f0   e10a     BNZ       0x1206                                                                                          
0011f2   c41a     MOVFF     0x41a,0xf6e                                                                                     
0011f4   ff6e                                                                                                               
0011f6   506e     MOVF      0x6e,0x0,0x0                                                                                    
0011f8   0800     SUBLW     0x0                                                                                             
0011fa   e203     BC        0x1202                                                                                          
0011fc   0e05     MOVLW     0x5                                                                                             
0011fe   6fc1     MOVWF     0xc1,0x1                                                                                        
001200   d002     BRA       0x1206                                                                                          
001202   0e03     MOVLW     0x3                                                                                             
001204   6fc1     MOVWF     0xc1,0x1                                                                                        
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001206   0100     MOVLB     0x0                if(ctrl_trf_state == CTRL_TRF_TX)                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001208   05b9     DECF      0xb9,0x0,0x1                                                                                    
00120a   e10a     BNZ       0x1220                                                                                          
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00120c   d80b     RCALL     0x1224                 USBCtrlTrfTxService();                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00120e   0104     MOVLB     0x4                    if(ep0Bi.Stat.DTS == 0)                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001210   bd04     BTFSC     0x4,0x6,0x1                                                                                     
001212   d003     BRA       0x121a                                                                                          
001214   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001216   6f04     MOVWF     0x4,0x1                                                                                         
001218   d002     BRA       0x121e                 else                                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00121a   0e88     MOVLW     0x88                       ep0Bi.Stat._byte = _USIE|_DAT0|_DTSEN;                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00121c   6f04     MOVWF     0x4,0x1                                                                                         
                                               }                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00121e   d001     BRA       0x1222             else // CTRL_TRF_RX                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001220   d8f2     RCALL     0x1406                 USBPrepareForNextSetupTrf();                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001222   0012     RETURN    0x0            }//end USBCtrlTrfInHandler                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfTxService(void)                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    pSrc, wCount, and usb_stat.ctrl_trf_mem are setup properly.  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine should be called from only two places.          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  One from USBCtrlEPServiceComplete() and one from             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  USBCtrlTrfInHandler(). It takes care of managing a           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer over multiple USB transactions.                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            This routine works with isochronous endpoint larger than     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  256 bytes and is shown here as an example of how to deal     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  with BC9 and BC8. In reality, a control endpoint can never   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  be larger than 64 bytes.                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001224   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfTxService(void)                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001226   ffe6                                                                                                               
001228   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00122a   ffd9                                                                                                               
00122c   0e02     MOVLW     0x2                                                                                             
00122e   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               WORD byte_to_send;                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                * First, have to figure out how many byte of data to send.                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001230   0100     MOVLB     0x0                if(wCount._word < EP0_BUFF_SIZE)                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001232   0e08     MOVLW     0x8                                                                                             
001234   5dbf     SUBWF     0xbf,0x0,0x1                                                                                    
001236   0e00     MOVLW     0x0                                                                                             
001238   59c0     SUBWFB    0xc0,0x0,0x1                                                                                    
00123a   e205     BC        0x1246                                                                                          
00123c   c0bf     MOVFF     0xbf,0xfde             byte_to_send._word = wCount._word;                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00123e   ffde                                                                                                               
001240   c0c0     MOVFF     0xc0,0xfdd                                                                                      
001242   ffdd                                                                                                               
001244   d003     BRA       0x124c             else                                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001246   0e08     MOVLW     0x8                    byte_to_send._word = EP0_BUFF_SIZE;                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001248   6ede     MOVWF     0xde,0x0                                                                                        
00124a   6add     CLRF      0xdd,0x0                                                                                        
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                * Next, load the number of bytes to send to BC9..0 in buffer descriptor     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00124c   0104     MOVLB     0x4                ep0Bi.Stat.BC9 = 0;                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00124e   9304     BCF       0x4,0x1,0x1                                                                                     
001250   9104     BCF       0x4,0x0,0x1        ep0Bi.Stat.BC8 = 0;                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001252   0e01     MOVLW     0x1                ep0Bi.Stat._byte |= MSB(byte_to_send);                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001254   50db     MOVF      0xdb,0x0,0x0                                                                                    
001256   1304     IORWF     0x4,0x1,0x1                                                                                     
001258   cfdf     MOVFF     0xfdf,0x405        ep0Bi.Cnt = LSB(byte_to_send);                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00125a   f405                                                                                                               
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                * Subtract the number of bytes just about to be sent from the total.        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00125c   0e00     MOVLW     0x0                wCount._word = wCount._word - byte_to_send._word;                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00125e   50db     MOVF      0xdb,0x0,0x0                                                                                    
001260   0100     MOVLB     0x0                                                                                             
001262   5fbf     SUBWF     0xbf,0x1,0x1                                                                                    
001264   0e01     MOVLW     0x1                                                                                             
001266   50db     MOVF      0xdb,0x0,0x0                                                                                    
001268   5bc0     SUBWFB    0xc0,0x1,0x1                                                                                    
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00126a   0e20     MOVLW     0x20               pDst.bRam = (byte*)&CtrlTrfData;        // Set destination pointer           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00126c   6fbd     MOVWF     0xbd,0x1                                                                                        
00126e   0e04     MOVLW     0x4                                                                                             
001270   6fbe     MOVWF     0xbe,0x1                                                                                        
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001272   0100     MOVLB     0x0                if(usb_stat.ctrl_trf_mem == _ROM)       // Determine type of memory source   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001274   a3c2     BTFSS     0xc2,0x1,0x1                                                                                    
001276   d01e     BRA       0x12b4                                                                                          
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001278   cfd9     MOVFF     0xfd9,0xfe9            while(byte_to_send._word)                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00127a   ffe9                                                                                                               
00127c   cfda     MOVFF     0xfda,0xfea                                                                                     
00127e   ffea                                                                                                               
001280   50ee     MOVF      0xee,0x0,0x0                                                                                    
001282   10ed     IORWF     0xed,0x0,0x0                                                                                    
001284   e016     BZ        0x12b2                                                                                          
0012b0   d7e3     BRA       0x1278                                                                                          
                                                   {                                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001286   c0bb     MOVFF     0xbb,0xff6                 *pDst.bRam = *pSrc.bRom;                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001288   fff6                                                                                                               
00128a   c0bc     MOVFF     0xbc,0xff7                                                                                      
00128c   fff7                                                                                                               
00128e   0008     TBLRD                                                                                                     
001290   50f5     MOVF      0xf5,0x0,0x0                                                                                    
001292   c0bd     MOVFF     0xbd,0xfe9                                                                                      
001294   ffe9                                                                                                               
001296   c0be     MOVFF     0xbe,0xfea                                                                                      
001298   ffea                                                                                                               
00129a   6eef     MOVWF     0xef,0x0                                                                                        
00129c   0100     MOVLB     0x0                        pDst.bRam++;                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00129e   2bbd     INCF      0xbd,0x1,0x1                                                                                    
0012a0   0e00     MOVLW     0x0                                                                                             
0012a2   23be     ADDWFC    0xbe,0x1,0x1                                                                                    
0012a4   2bbb     INCF      0xbb,0x1,0x1               pSrc.bRom++;                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0012a6   23bc     ADDWFC    0xbc,0x1,0x1                                                                                    
0012a8   06df     DECF      0xdf,0x1,0x0               byte_to_send._word--;                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0012aa   0e01     MOVLW     0x1                                                                                             
0012ac   e201     BC        0x12b0                                                                                          
0012ae   06db     DECF      0xdb,0x1,0x0                                                                                    
                                                   }//end while(byte_to_send._word)                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0012b2   d01c     BRA       0x12ec             else // RAM                                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0012b4   cfd9     MOVFF     0xfd9,0xfe9            while(byte_to_send._word)                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0012b6   ffe9                                                                                                               
0012b8   cfda     MOVFF     0xfda,0xfea                                                                                     
0012ba   ffea                                                                                                               
0012bc   50ee     MOVF      0xee,0x0,0x0                                                                                    
0012be   10ed     IORWF     0xed,0x0,0x0                                                                                    
0012c0   e015     BZ        0x12ec                                                                                          
0012ea   d7e4     BRA       0x12b4                                                                                          
                                                   {                                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0012c2   c0bb     MOVFF     0xbb,0xfe9                 *pDst.bRam = *pSrc.bRam;                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0012c4   ffe9                                                                                                               
0012c6   c0bc     MOVFF     0xbc,0xfea                                                                                      
0012c8   ffea                                                                                                               
0012ca   50ef     MOVF      0xef,0x0,0x0                                                                                    
0012cc   c0bd     MOVFF     0xbd,0xfe9                                                                                      
0012ce   ffe9                                                                                                               
0012d0   c0be     MOVFF     0xbe,0xfea                                                                                      
0012d2   ffea                                                                                                               
0012d4   6eef     MOVWF     0xef,0x0                                                                                        
0012d6   0100     MOVLB     0x0                        pDst.bRam++;                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0012d8   2bbd     INCF      0xbd,0x1,0x1                                                                                    
0012da   0e00     MOVLW     0x0                                                                                             
0012dc   23be     ADDWFC    0xbe,0x1,0x1                                                                                    
0012de   2bbb     INCF      0xbb,0x1,0x1               pSrc.bRam++;                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0012e0   23bc     ADDWFC    0xbc,0x1,0x1                                                                                    
0012e2   06df     DECF      0xdf,0x1,0x0               byte_to_send._word--;                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0012e4   0e01     MOVLW     0x1                                                                                             
0012e6   e201     BC        0x12ea                                                                                          
0012e8   06db     DECF      0xdb,0x1,0x0                                                                                    
                                                   }//end while(byte_to_send._word)                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               }//end if(usb_stat.ctrl_trf_mem == _ROM)                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0012ec   0e02     MOVLW     0x2            }//end USBCtrlTrfTxService                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0012ee   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
0012f0   e202     BC        0x12f6                                                                                          
0012f2   6ae1     CLRF      0xe1,0x0                                                                                        
0012f4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0012f6   6ee1     MOVWF     0xe1,0x0                                                                                        
0012f8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0012fa   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0012fc   ffd9                                                                                                               
0012fe   0012     RETURN    0x0                                                                                             
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfRxService(void)                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    pDst and wCount are setup properly.                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  pSrc is always &CtrlTrfData                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  usb_stat.ctrl_trf_mem is always _RAM.                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  wCount should be set to 0 at the start of each control       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer.                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        *** This routine is only partially complete. Check for       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  new version of the firmware.                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001300   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfRxService(void)                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001302   ffe6                                                                                                               
001304   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001306   ffd9                                                                                                               
001308   0e02     MOVLW     0x2                                                                                             
00130a   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               WORD byte_to_read;                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00130c   0e03     MOVLW     0x3                MSB(byte_to_read) = 0x03 & ep0Bo.Stat._byte;    // Filter out last 2 bits    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00130e   0104     MOVLB     0x4                                                                                             
001310   1500     ANDWF     0x0,0x0,0x1                                                                                     
001312   6ee7     MOVWF     0xe7,0x0                                                                                        
001314   0e01     MOVLW     0x1                                                                                             
001316   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
001318   ffdb                                                                                                               
00131a   c401     MOVFF     0x401,0xfdf        LSB(byte_to_read) = ep0Bo.Cnt;                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00131c   ffdf                                                                                                               
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                * Accumulate total number of bytes read                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00131e   50de     MOVF      0xde,0x0,0x0       wCount._word = wCount._word + byte_to_read._word;                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001320   0100     MOVLB     0x0                                                                                             
001322   27bf     ADDWF     0xbf,0x1,0x1                                                                                    
001324   50dd     MOVF      0xdd,0x0,0x0                                                                                    
001326   23c0     ADDWFC    0xc0,0x1,0x1                                                                                    
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001328   0e20     MOVLW     0x20               pSrc.bRam = (byte*)&CtrlTrfData;                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00132a   6fbb     MOVWF     0xbb,0x1                                                                                        
00132c   0e04     MOVLW     0x4                                                                                             
00132e   6fbc     MOVWF     0xbc,0x1                                                                                        
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001330   cfd9     MOVFF     0xfd9,0xfe9        while(byte_to_read._word)                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001332   ffe9                                                                                                               
001334   cfda     MOVFF     0xfda,0xfea                                                                                     
001336   ffea                                                                                                               
001338   50ee     MOVF      0xee,0x0,0x0                                                                                    
00133a   10ed     IORWF     0xed,0x0,0x0                                                                                    
00133c   e014     BZ        0x1366                                                                                          
001364   d7e5     BRA       0x1330                                                                                          
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00133e   c0bb     MOVFF     0xbb,0xfe9             *pDst.bRam = *pSrc.bRam;                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001340   ffe9                                                                                                               
001342   c0bc     MOVFF     0xbc,0xfea                                                                                      
001344   ffea                                                                                                               
001346   50ef     MOVF      0xef,0x0,0x0                                                                                    
001348   c0bd     MOVFF     0xbd,0xfe9                                                                                      
00134a   ffe9                                                                                                               
00134c   c0be     MOVFF     0xbe,0xfea                                                                                      
00134e   ffea                                                                                                               
001350   6eef     MOVWF     0xef,0x0                                                                                        
001352   2bbd     INCF      0xbd,0x1,0x1           pDst.bRam++;                                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001354   0e00     MOVLW     0x0                                                                                             
001356   23be     ADDWFC    0xbe,0x1,0x1                                                                                    
001358   2bbb     INCF      0xbb,0x1,0x1           pSrc.bRam++;                                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00135a   23bc     ADDWFC    0xbc,0x1,0x1                                                                                    
00135c   06df     DECF      0xdf,0x1,0x0           byte_to_read._word--;                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00135e   0e01     MOVLW     0x1                                                                                             
001360   e201     BC        0x1364                                                                                          
001362   06db     DECF      0xdb,0x1,0x0                                                                                    
                                               }//end while(byte_to_read._word)                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001366   0e02     MOVLW     0x2            }//end USBCtrlTrfRxService                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001368   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
00136a   e202     BC        0x1370                                                                                          
00136c   6ae1     CLRF      0xe1,0x0                                                                                        
00136e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001370   6ee1     MOVWF     0xe1,0x0                                                                                        
001372   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001374   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001376   ffd9                                                                                                               
001378   0012     RETURN    0x0                                                                                             
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlEPServiceComplete(void)                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine wrap up the ramaining tasks in servicing        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  a Setup Request. Its main task is to set the endpoint        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  controls appropriately for a given situation. See code       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  below.                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  There are three main scenarios:                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  a) There was no handler for the Request, in this case        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     a STALL should be sent out.                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  b) The host has requested a read control transfer,           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     endpoints are required to be setup in a specific way.     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  c) The host has requested a write control transfer, or       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     a control data stage is not required, endpoints are       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     required to be setup in a specific way.                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Packet processing is resumed by clearing PKTDIS bit.         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlEPServiceComplete(void)                                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00137a   0100     MOVLB     0x0                if(ctrl_trf_session_owner == MUID_NULL)                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00137c   51ba     MOVF      0xba,0x0,0x1                                                                                    
00137e   e10c     BNZ       0x1398                                                                                          
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                   /*                                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                    * If no one knows how to service this request then stall.               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                    * Must also prepare EP0 to receive the next SETUP transaction.          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                    */                                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001380   0104     MOVLB     0x4                    ep0Bo.Cnt = EP0_BUFF_SIZE;                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001382   0e08     MOVLW     0x8                                                                                             
001384   6f01     MOVWF     0x1,0x1                                                                                         
001386   0e18     MOVLW     0x18                   ep0Bo.ADR = (byte*)&SetupPkt;                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001388   6f02     MOVWF     0x2,0x1                                                                                         
00138a   0e04     MOVLW     0x4                                                                                             
00138c   6f03     MOVWF     0x3,0x1                                                                                         
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00138e   0e84     MOVLW     0x84                   ep0Bo.Stat._byte = _USIE|_BSTALL;                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001390   6f00     MOVWF     0x0,0x1                                                                                         
001392   0104     MOVLB     0x4                    ep0Bi.Stat._byte = _USIE|_BSTALL;                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001394   6f04     MOVWF     0x4,0x1                                                                                         
                                               }                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001396   d035     BRA       0x1402             else    // A module has claimed ownership of the control transfer session.   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001398   0104     MOVLB     0x4                    if(SetupPkt.DataDir == DEV_TO_HOST)                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00139a   af18     BTFSS     0x18,0x7,0x1                                                                                    
00139c   d022     BRA       0x13e2                                                                                          
                                                   {                                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00139e   0100     MOVLB     0x0                        if(SetupPkt.wLength < wCount._word)                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0013a0   51bf     MOVF      0xbf,0x0,0x1                                                                                    
0013a2   0104     MOVLB     0x4                                                                                             
0013a4   5d1e     SUBWF     0x1e,0x0,0x1                                                                                    
0013a6   0100     MOVLB     0x0                                                                                             
0013a8   51c0     MOVF      0xc0,0x0,0x1                                                                                    
0013aa   0104     MOVLB     0x4                                                                                             
0013ac   591f     SUBWFB    0x1f,0x0,0x1                                                                                    
0013ae   e204     BC        0x13b8                                                                                          
0013b0   c41e     MOVFF     0x41e,0xbf                     wCount._word = SetupPkt.wLength;                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0013b2   f0bf                                                                                                               
0013b4   c41f     MOVFF     0x41f,0xc0                                                                                      
0013b6   f0c0                                                                                                               
0013b8   df35     RCALL     0x1224                     USBCtrlTrfTxService();                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0013ba   0100     MOVLB     0x0                        ctrl_trf_state = CTRL_TRF_TX;                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0013bc   0e01     MOVLW     0x1                                                                                             
0013be   6fb9     MOVWF     0xb9,0x1                                                                                        
                                                       /*                                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Control Read:                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * <SETUP[0]><IN[1]><IN[0]>...<OUT[1]> | <SETUP[0]>                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 1. Prepare OUT EP to respond to early termination                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * NOTE:                                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * If something went wrong during the control transfer,              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the last status stage may not be sent by the host.                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * When this happens, two different things could happen              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * depending on the host.                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * a) The host could send out a RESET.                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * b) The host could send out a new SETUP transaction                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    without sending a RESET first.                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * To properly handle case (b), the OUT EP must be setup             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * to receive either a zero length OUT transaction, or a             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * new SETUP transaction.                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Since the SETUP transaction requires the DTS bit to be            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * DAT0 while the zero length OUT status requires the DTS            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * bit to be DAT1, the DTS bit check by the hardware should          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * be disabled. This way the SIE could accept either of              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the two transactions.                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Furthermore, the Cnt byte should be set to prepare for            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the SETUP data (8-byte or more), and the buffer address           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * should be pointed to SetupPkt.                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0013c0   0104     MOVLB     0x4                        ep0Bo.Cnt = EP0_BUFF_SIZE;                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0013c2   0e08     MOVLW     0x8                                                                                             
0013c4   6f01     MOVWF     0x1,0x1                                                                                         
0013c6   0e18     MOVLW     0x18                       ep0Bo.ADR = (byte*)&SetupPkt;                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0013c8   6f02     MOVWF     0x2,0x1                                                                                         
0013ca   0e04     MOVLW     0x4                                                                                             
0013cc   6f03     MOVWF     0x3,0x1                                                                                         
0013ce   0e80     MOVLW     0x80                       ep0Bo.Stat._byte = _USIE;           // Note: DTSEN is 0!             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0013d0   6f00     MOVWF     0x0,0x1                                                                                         
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                       /*                                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 2. Prepare IN EP to transfer data, Cnt should have                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    been initialized by responsible request owner.                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0013d2   0104     MOVLB     0x4                        ep0Bi.ADR = (byte*)&CtrlTrfData;                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0013d4   0e20     MOVLW     0x20                                                                                            
0013d6   6f06     MOVWF     0x6,0x1                                                                                         
0013d8   0e04     MOVLW     0x4                                                                                             
0013da   6f07     MOVWF     0x7,0x1                                                                                         
0013dc   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0013de   6f04     MOVWF     0x4,0x1                                                                                         
                                                   }                                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0013e0   d010     BRA       0x1402                 else    // (SetupPkt.DataDir == HOST_TO_DEV)                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                   {                                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0013e2   0100     MOVLB     0x0                        ctrl_trf_state = CTRL_TRF_RX;                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0013e4   0e02     MOVLW     0x2                                                                                             
0013e6   6fb9     MOVWF     0xb9,0x1                                                                                        
                                                       /*                                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Control Write:                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * <SETUP[0]><OUT[1]><OUT[0]>...<IN[1]> | <SETUP[0]>                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 1. Prepare IN EP to respond to early termination                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    This is the same as a Zero Length Packet Response              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    for control transfer without a data stage                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0013e8   0104     MOVLB     0x4                        ep0Bi.Cnt = 0;                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0013ea   6b05     CLRF      0x5,0x1                                                                                         
0013ec   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0013ee   6f04     MOVWF     0x4,0x1                                                                                         
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                       /*                                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 2. Prepare OUT EP to receive data.                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0013f0   0104     MOVLB     0x4                        ep0Bo.Cnt = EP0_BUFF_SIZE;                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0013f2   0e08     MOVLW     0x8                                                                                             
0013f4   6f01     MOVWF     0x1,0x1                                                                                         
0013f6   0e20     MOVLW     0x20                       ep0Bo.ADR = (byte*)&CtrlTrfData;                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
0013f8   6f02     MOVWF     0x2,0x1                                                                                         
0013fa   0e04     MOVLW     0x4                                                                                             
0013fc   6f03     MOVWF     0x3,0x1                                                                                         
0013fe   0ec8     MOVLW     0xc8                       ep0Bo.Stat._byte = _USIE|_DAT1|_DTSEN;                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001400   6f00     MOVWF     0x0,0x1                                                                                         
                                                   }//end if(SetupPkt.DataDir == DEV_TO_HOST)                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               }//end if(ctrl_trf_session_owner == MUID_NULL)                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                * PKTDIS bit is set when a Setup Transaction is received.                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                * Clear to resume packet processing.                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001402   986d     BCF       0x6d,0x4,0x0       UCONbits.PKTDIS = 0;                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001404   0012     RETURN    0x0            }//end USBCtrlEPServiceComplete                                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBPrepareForNextSetupTrf(void)                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        The routine forces EP0 OUT to be ready for a new Setup       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transaction, and forces EP0 IN to be owned by CPU.           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBPrepareForNextSetupTrf(void)                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001406   0100     MOVLB     0x0                ctrl_trf_state = WAIT_SETUP;            // See usbctrltrf.h                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001408   6bb9     CLRF      0xb9,0x1                                                                                        
00140a   0104     MOVLB     0x4                ep0Bo.Cnt = EP0_BUFF_SIZE;              // Defined in usbcfg.h               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00140c   0e08     MOVLW     0x8                                                                                             
00140e   6f01     MOVWF     0x1,0x1                                                                                         
001410   0e18     MOVLW     0x18               ep0Bo.ADR = (byte*)&SetupPkt;                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
001412   6f02     MOVWF     0x2,0x1                                                                                         
001414   0e04     MOVLW     0x4                                                                                             
001416   6f03     MOVWF     0x3,0x1                                                                                         
001418   0e88     MOVLW     0x88               ep0Bo.Stat._byte = _USIE|_DAT0|_DTSEN;  // EP0 buff dsc init, see usbmmap.h  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00141a   6f00     MOVWF     0x0,0x1                                                                                         
00141c   0104     MOVLB     0x4                ep0Bi.Stat._byte = _UCPU;               // EP0 IN buffer initialization      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
00141e   6b04     CLRF      0x4,0x1                                                                                         
001420   0012     RETURN    0x0            }//end USBPrepareForNextSetupTrf                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /** EOF usbctrltrf.c *********************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\usbctrltrf\usbctrltrf.c
                                           /*********************************************************************           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                Microchip USB C18 Firmware Version 1.0                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *********************************************************************           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * FileName:        user.c                                                       F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * Dependencies:    See INCLUDES section below                                   F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * Processor:       PIC18                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * Compiler:        C18 2.30.01+                                                 F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * Company:         Microchip Technology, Inc.                                   F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * Software License Agreement                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * The software supplied herewith by Microchip Technology Incorporated           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * supplied to you, the Company’s customer, for use solely and                   F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * software is owned by the Company and/or its supplier, and is                  F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * protected under applicable copyright laws. All rights are reserved.           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * Any use in violation of the foregoing restrictions may subject the            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * user to criminal sanctions under applicable laws, as well as to               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * civil liability for the breach of the terms and conditions of this            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * license.                                                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * Author               Date        Comment                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            ********************************************************************/           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           /** I N C L U D E S **********************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           #include <p18cxxx.h>                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           #include <usart.h>                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           #include "system\typedefs.h"                                                     F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           #include "system\usb\usb.h"                                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           #include "io_cfg.h"                                 // I/O pin mapping           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           #include "user\user.h"                                                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           #include "user\temperature.h"                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           #include "def_ports.h"                              // Port definitions          F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           /** D E F I N E S ************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           #define SW_CS_PIN PORTCbits.RC2 // Chip Select                                   F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           #define TRIS_SW_CS_PIN TRISCbits.TRISC2                                          F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           #define SW_DIO_PIN PORTBbits.RB7 // Data out                                     F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           #define TRIS_SW_DIO_PIN TRISBbits.TRISB7                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           #define SW_SCK_PIN PORTBbits.RB6 // Clock                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           #define TRIS_SW_SCK_PIN TRISBbits.TRISB6                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           /** V A R I A B L E S ********************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           #pragma udata                                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           byte old_sw2,old_sw3;                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           byte counter;                                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           DATA_PACKET dataPacket;                                                          F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           void BlinkUSBStatus(void);                                                       F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           BOOL Switch2IsPressed(void);                                                     F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           BOOL Switch3IsPressed(void);                                                     F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           void ServiceRequests(void);                                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           char ReadWithSPIHalfDuplex(char address);                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           char WriteWithSPIHalfDuplex(char address, char data);                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           void GetDeltaXY(void);                                                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           void GrabPixels(void);                                                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           void ReadWriteRegister(void);                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           // For board testing purpose only                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           void PICDEMFSUSBDemoBoardTest(void);                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           /** D E C L A R A T I O N S **************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           #pragma code                                                                     F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           void UserInit(void)                                                              F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000838   0ef0     MOVLW     0xf0               mInitAllLEDs();                                                              F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
00083a   168c     ANDWF     0x8c,0x1,0x0                                                                                    
00083c   1695     ANDWF     0x95,0x1,0x0                                                                                    
00083e   8893     BSF       0x93,0x4,0x0       mInitAllSwitches();                                                          F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000840   8a93     BSF       0x93,0x5,0x0                                                                                    
000842   5081     MOVF      0x81,0x0,0x0       old_sw2 = sw2;                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000844   0b10     ANDLW     0x10                                                                                            
000846   e001     BZ        0x84a                                                                                           
000848   0e01     MOVLW     0x1                                                                                             
00084a   0100     MOVLB     0x0                                                                                             
00084c   6f60     MOVWF     0x60,0x1                                                                                        
00084e   5081     MOVF      0x81,0x0,0x0       old_sw3 = sw3;                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000850   0b20     ANDLW     0x20                                                                                            
000852   e001     BZ        0x856                                                                                           
000854   0e01     MOVLW     0x1                                                                                             
000856   6f61     MOVWF     0x61,0x1                                                                                        
000858   0012     RETURN    0x0            }                                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * Function:        void ProcessIO(void)                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * Overview:        This function is a place holder for other user routines.     F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                  It is a mixture of both USB and non-USB tasks.               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           void ProcessIO(void)                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
00085a   d8f4     RCALL     0xa44              BlinkUSBStatus();                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                               // User Application USB tasks                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
00085c   0e06     MOVLW     0x6                if((usb_device_state < CONFIGURED_STATE)||(UCONbits.SUSPND==1)) return;      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
00085e   0100     MOVLB     0x0                                                                                             
000860   5dc1     SUBWF     0xc1,0x0,0x1                                                                                    
000862   e303     BNC       0x86a                                                                                           
000864   506d     MOVF      0x6d,0x0,0x0                                                                                    
000866   0b02     ANDLW     0x2                                                                                             
000868   e001     BZ        0x86c                                                                                           
00086a   d001     BRA       0x86e                                                                                           
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
00086c   d801     RCALL     0x870              ReadWriteRegister();                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
00086e   0012     RETURN    0x0            }                                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000870   cfd9     MOVFF     0xfd9,0xfe6    void ReadWriteRegister(void)                                                     F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000872   ffe6                                                                                                               
000874   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000876   ffd9                                                                                                               
000878   0e05     MOVLW     0x5                                                                                             
00087a   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                               int size_of_answer, i;                                                       F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                               byte destination_register;                                                   F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
00087c   0e40     MOVLW     0x40               if(USBGenRead((byte *) &dataPacket, sizeof(dataPacket)))                     F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
00087e   6ee6     MOVWF     0xe6,0x0                                                                                        
000880   0e63     MOVLW     0x63                                                                                            
000882   6ee6     MOVWF     0xe6,0x0                                                                                        
000884   0e00     MOVLW     0x0                                                                                             
000886   6ee6     MOVWF     0xe6,0x0                                                                                        
000888   eceb     CALL      0x17d6,0x0                                                                                      
00088a   f00b                                                                                                               
00088c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00088e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000890   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000892   0900     IORLW     0x0                                                                                             
000894   e101     BNZ       0x898                                                                                           
000896   d0cc     BRA       0xa30                                                                                           
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000898   0100     MOVLB     0x0                    size_of_answer = dataPacket._byte[1];                                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
00089a   5164     MOVF      0x64,0x0,0x1                                                                                    
00089c   6ede     MOVWF     0xde,0x0                                                                                        
00089e   6add     CLRF      0xdd,0x0                                                                                        
0008a0   0e04     MOVLW     0x4                    destination_register = dataPacket._byte[2];                              F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
0008a2   c065     MOVFF     0x65,0xfdb                                                                                      
0008a4   ffdb                                                                                                               
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
0008a6   0100     MOVLB     0x0                    switch(dataPacket.CMD)                                                   F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
0008a8   5163     MOVF      0x63,0x0,0x1                                                                                    
0008aa   0a02     XORLW     0x2                                                                                             
0008ac   e05d     BZ        0x968                                                                                           
0008ae   0a03     XORLW     0x3                                                                                             
0008b0   e050     BZ        0x952                                                                                           
0008b2   0a01     XORLW     0x1                                                                                             
0008b4   e001     BZ        0x8b8                                                                                           
0008b6   d0aa     BRA       0xa0c                                                                                           
                                                   {                                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                       case 0:                                                              F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
0008b8   0e03     MOVLW     0x3                            for(i = 3; i < (int) size_of_answer; i++)                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
0008ba   6ef3     MOVWF     0xf3,0x0                                                                                        
0008bc   0e02     MOVLW     0x2                                                                                             
0008be   cff3     MOVFF     0xff3,0xfdb                                                                                     
0008c0   ffdb                                                                                                               
0008c2   0e03     MOVLW     0x3                                                                                             
0008c4   6adb     CLRF      0xdb,0x0                                                                                        
0008c6   0e02     MOVLW     0x2                                                                                             
0008c8   cfdb     MOVFF     0xfdb,0x10                                                                                      
0008ca   f010                                                                                                               
0008cc   0e03     MOVLW     0x3                                                                                             
0008ce   cfdb     MOVFF     0xfdb,0x11                                                                                      
0008d0   f011                                                                                                               
0008d2   cfde     MOVFF     0xfde,0x12                                                                                      
0008d4   f012                                                                                                               
0008d6   cfdd     MOVFF     0xfdd,0x13                                                                                      
0008d8   f013                                                                                                               
0008da   5011     MOVF      0x11,0x0,0x0                                                                                    
0008dc   1813     XORWF     0x13,0x0,0x0                                                                                    
0008de   aee8     BTFSS     0xe8,0x7,0x0                                                                                    
0008e0   d002     BRA       0x8e6                                                                                           
0008e2   3413     RLCF      0x13,0x0,0x0                                                                                    
0008e4   d004     BRA       0x8ee                                                                                           
0008e6   5012     MOVF      0x12,0x0,0x0                                                                                    
0008e8   5c10     SUBWF     0x10,0x0,0x0                                                                                    
0008ea   5013     MOVF      0x13,0x0,0x0                                                                                    
0008ec   5811     SUBWFB    0x11,0x0,0x0                                                                                    
0008ee   e22e     BC        0x94c                                                                                           
000940   0e02     MOVLW     0x2                                                                                             
000942   2adb     INCF      0xdb,0x1,0x0                                                                                    
000944   0e03     MOVLW     0x3                                                                                             
000946   e301     BNC       0x94a                                                                                           
000948   2adb     INCF      0xdb,0x1,0x0                                                                                    
00094a   d7bd     BRA       0x8c6                                                                                           
                                                           {                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
0008f0   0e04     MOVLW     0x4                                dataPacket._byte[i] = ReadWithSPIHalfDuplex(destination_register); F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
0008f2   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0008f4   ffe6                                                                                                               
0008f6   da03     RCALL     0xcfe                                                                                           
0008f8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0008fa   6ee6     MOVWF     0xe6,0x0                                                                                        
0008fc   0e02     MOVLW     0x2                                                                                             
0008fe   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
000900   ffe9                                                                                                               
000902   0e03     MOVLW     0x3                                                                                             
000904   cfdb     MOVFF     0xfdb,0xfea                                                                                     
000906   ffea                                                                                                               
000908   0e63     MOVLW     0x63                                                                                            
00090a   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00090c   0e00     MOVLW     0x0                                                                                             
00090e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000910   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000912   50e7     MOVF      0xe7,0x0,0x0                                                                                    
000914   6eef     MOVWF     0xef,0x0                                                                                        
000916   0000     NOP                      					Nop();                                                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000918   0e02     MOVLW     0x2            					if((dataPacket._byte[i] >> 7) != 0x01) i--;                                 F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
00091a   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00091c   ffe9                                                                                                               
00091e   0e03     MOVLW     0x3                                                                                             
000920   cfdb     MOVFF     0xfdb,0xfea                                                                                     
000922   ffea                                                                                                               
000924   0e63     MOVLW     0x63                                                                                            
000926   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
000928   0e00     MOVLW     0x0                                                                                             
00092a   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00092c   50ef     MOVF      0xef,0x0,0x0                                                                                    
00092e   44e8     RLNCF     0xe8,0x0,0x0                                                                                    
000930   0b01     ANDLW     0x1                                                                                             
000932   0801     SUBLW     0x1                                                                                             
000934   e005     BZ        0x940                                                                                           
000936   0e02     MOVLW     0x2                                                                                             
000938   06db     DECF      0xdb,0x1,0x0                                                                                    
00093a   0e03     MOVLW     0x3                                                                                             
00093c   e201     BC        0x940                                                                                           
00093e   06db     DECF      0xdb,0x1,0x0                                                                                    
                                                           }                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
00094c   cfdf     MOVFF     0xfdf,0x62     				counter = size_of_answer;                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
00094e   f062                                                                                                               
000950   d05e     BRA       0xa0e                          break;                                                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                       case 1:                                                              F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000952   c066     MOVFF     0x66,0xfe6                     WriteWithSPIHalfDuplex(destination_register, dataPacket._byte[3]); F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000954   ffe6                                                                                                               
000956   0e04     MOVLW     0x4                                                                                             
000958   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
00095a   ffe6                                                                                                               
00095c   da29     RCALL     0xdb0                                                                                           
00095e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000960   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000962   cfdf     MOVFF     0xfdf,0x62                     counter = size_of_answer;                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000964   f062                                                                                                               
000966   d053     BRA       0xa0e                          break;                                                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           			case 2:                                                                       F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000968   0e03     MOVLW     0x3            				for(i = 3; i < 45; i++)                                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
00096a   6ef3     MOVWF     0xf3,0x0                                                                                        
00096c   0e02     MOVLW     0x2                                                                                             
00096e   cff3     MOVFF     0xff3,0xfdb                                                                                     
000970   ffdb                                                                                                               
000972   0e03     MOVLW     0x3                                                                                             
000974   6adb     CLRF      0xdb,0x0                                                                                        
000976   0e02     MOVLW     0x2                                                                                             
000978   cfdb     MOVFF     0xfdb,0x10                                                                                      
00097a   f010                                                                                                               
00097c   0e03     MOVLW     0x3                                                                                             
00097e   cfdb     MOVFF     0xfdb,0x11                                                                                      
000980   f011                                                                                                               
000982   90d8     BCF       0xd8,0x0,0x0                                                                                    
000984   5011     MOVF      0x11,0x0,0x0                                                                                    
000986   e604     BN        0x990                                                                                           
000988   0e2d     MOVLW     0x2d                                                                                            
00098a   5c10     SUBWF     0x10,0x0,0x0                                                                                    
00098c   0e00     MOVLW     0x0                                                                                             
00098e   5811     SUBWFB    0x11,0x0,0x0                                                                                    
000990   e22d     BC        0x9ec                                                                                           
0009e0   0e02     MOVLW     0x2                                                                                             
0009e2   2adb     INCF      0xdb,0x1,0x0                                                                                    
0009e4   0e03     MOVLW     0x3                                                                                             
0009e6   e301     BNC       0x9ea                                                                                           
0009e8   2adb     INCF      0xdb,0x1,0x0                                                                                    
0009ea   d7c5     BRA       0x976                                                                                           
                                                           {                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000992   0e0b     MOVLW     0xb                                dataPacket._byte[i] = ReadWithSPIHalfDuplex(0x0b);           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000994   6ee6     MOVWF     0xe6,0x0                                                                                        
000996   d9b3     RCALL     0xcfe                                                                                           
000998   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00099a   6ee6     MOVWF     0xe6,0x0                                                                                        
00099c   0e02     MOVLW     0x2                                                                                             
00099e   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0009a0   ffe9                                                                                                               
0009a2   0e03     MOVLW     0x3                                                                                             
0009a4   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0009a6   ffea                                                                                                               
0009a8   0e63     MOVLW     0x63                                                                                            
0009aa   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0009ac   0e00     MOVLW     0x0                                                                                             
0009ae   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0009b0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0009b2   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0009b4   6eef     MOVWF     0xef,0x0                                                                                        
0009b6   0000     NOP                      					Nop();                                                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
0009b8   0e02     MOVLW     0x2            					if((dataPacket._byte[i] >> 7) != 0x01) i--;                                 F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
0009ba   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0009bc   ffe9                                                                                                               
0009be   0e03     MOVLW     0x3                                                                                             
0009c0   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0009c2   ffea                                                                                                               
0009c4   0e63     MOVLW     0x63                                                                                            
0009c6   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0009c8   0e00     MOVLW     0x0                                                                                             
0009ca   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0009cc   50ef     MOVF      0xef,0x0,0x0                                                                                    
0009ce   44e8     RLNCF     0xe8,0x0,0x0                                                                                    
0009d0   0b01     ANDLW     0x1                                                                                             
0009d2   0801     SUBLW     0x1                                                                                             
0009d4   e005     BZ        0x9e0                                                                                           
0009d6   0e02     MOVLW     0x2                                                                                             
0009d8   06db     DECF      0xdb,0x1,0x0                                                                                    
0009da   0e03     MOVLW     0x3                                                                                             
0009dc   e201     BC        0x9e0                                                                                           
0009de   06db     DECF      0xdb,0x1,0x0                                                                                    
                                                           }                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           				                                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
0009ec   0e03     MOVLW     0x3            				dataPacket._byte[45] = ReadWithSPIHalfDuplex(0x03);                          F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
0009ee   6ee6     MOVWF     0xe6,0x0                                                                                        
0009f0   d986     RCALL     0xcfe                                                                                           
0009f2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0009f4   0100     MOVLB     0x0                                                                                             
0009f6   6f90     MOVWF     0x90,0x1                                                                                        
0009f8   0000     NOP                      				Nop();                                                                       F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
0009fa   0e04     MOVLW     0x4            				dataPacket._byte[46] = ReadWithSPIHalfDuplex(0x04);                          F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
0009fc   6ee6     MOVWF     0xe6,0x0                                                                                        
0009fe   d97f     RCALL     0xcfe                                                                                           
000a00   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000a02   0100     MOVLB     0x0                                                                                             
000a04   6f91     MOVWF     0x91,0x1                                                                                        
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a06   cfdf     MOVFF     0xfdf,0x62     				counter = size_of_answer;                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a08   f062                                                                                                               
000a0a   d001     BRA       0xa0e                          break;                                                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                       default:                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a0c   d000     BRA       0xa0e                          break;                                                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                   }                                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a0e   0100     MOVLB     0x0                    if(counter != 0)                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a10   5162     MOVF      0x62,0x0,0x1                                                                                    
000a12   e00e     BZ        0xa30                                                                                           
                                                   {                                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a14   0104     MOVLB     0x4                        if(!mUSBGenTxIsBusy())                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a16   bf0c     BTFSC     0xc,0x7,0x1                                                                                     
000a18   d00b     BRA       0xa30                                                                                           
000a1a   c062     MOVFF     0x62,0xfe6                     USBGenWrite((byte *) &dataPacket, counter);                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a1c   ffe6                                                                                                               
000a1e   0e63     MOVLW     0x63                                                                                            
000a20   6ee6     MOVWF     0xe6,0x0                                                                                        
000a22   0e00     MOVLW     0x0                                                                                             
000a24   6ee6     MOVWF     0xe6,0x0                                                                                        
000a26   ecb1     CALL      0x1762,0x0                                                                                      
000a28   f00b                                                                                                               
000a2a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000a2c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000a2e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                   }                                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                               }                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a30   0e05     MOVLW     0x5            }                                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a32   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
000a34   e202     BC        0xa3a                                                                                           
000a36   6ae1     CLRF      0xe1,0x0                                                                                        
000a38   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000a3a   6ee1     MOVWF     0xe1,0x0                                                                                        
000a3c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000a3e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000a40   ffd9                                                                                                               
000a42   0012     RETURN    0x0                                                                                             
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * Function:        void BlinkUSBStatus(void)                                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * Overview:        BlinkUSBStatus turns on and off LEDs corresponding to        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                  the USB device state.                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            * Note:            mLED macros can be found in io_cfg.h                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                  usb_device_state is declared in usbmmap.c and is modified    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *                  in usbdrv.c, usbctrltrf.c, and usb9.c                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           void BlinkUSBStatus(void)                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                               static word led_count=0;                                                     F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a44   0100     MOVLB     0x0                if(led_count == 0)led_count = 10000U;                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a46   51c7     MOVF      0xc7,0x0,0x1                                                                                    
000a48   11c8     IORWF     0xc8,0x0,0x1                                                                                    
000a4a   e104     BNZ       0xa54                                                                                           
000a4c   0e10     MOVLW     0x10                                                                                            
000a4e   6fc7     MOVWF     0xc7,0x1                                                                                        
000a50   0e27     MOVLW     0x27                                                                                            
000a52   6fc8     MOVWF     0xc8,0x1                                                                                        
000a54   07c7     DECF      0xc7,0x1,0x1       led_count--;                                                                 F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a56   0e00     MOVLW     0x0                                                                                             
000a58   5bc8     SUBWFB    0xc8,0x1,0x1                                                                                    
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                               #define mLED_Both_Off()         {mLED_1_Off();mLED_2_Off();}                 F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                               #define mLED_Both_On()          {mLED_1_On();mLED_2_On();}                   F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                               #define mLED_Only_1_On()        {mLED_1_On();mLED_2_Off();}                  F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                               #define mLED_Only_2_On()        {mLED_1_Off();mLED_2_On();}                  F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a5a   a26d     BTFSS     0x6d,0x1,0x0       if(UCONbits.SUSPND == 1)                                                     F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a5c   d00b     BRA       0xa74                                                                                           
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a5e   51c7     MOVF      0xc7,0x0,0x1           if(led_count==0)                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a60   11c8     IORWF     0xc8,0x0,0x1                                                                                    
000a62   e107     BNZ       0xa72                                                                                           
                                                   {                                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a64   708c     BTG       0x8c,0x0,0x0               mLED_1_Toggle();                                                     F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a66   508c     MOVF      0x8c,0x0,0x0               mLED_2 = mLED_1;        // Both blink at the same time               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a68   0b01     ANDLW     0x1                                                                                             
000a6a   e002     BZ        0xa70                                                                                           
000a6c   828c     BSF       0x8c,0x1,0x0                                                                                    
000a6e   d001     BRA       0xa72                                                                                           
000a70   928c     BCF       0x8c,0x1,0x0                                                                                    
                                                   }//end if                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                               }                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a72   d030     BRA       0xad4              else                                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a74   0100     MOVLB     0x0                    if(usb_device_state == DETACHED_STATE)                                   F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a76   51c1     MOVF      0xc1,0x0,0x1                                                                                    
000a78   e104     BNZ       0xa82                                                                                           
                                                   {                                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a7a   908c     BCF       0x8c,0x0,0x0               mLED_Both_Off();                                                     F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a7c   928c     BCF       0x8c,0x1,0x0                                                                                    
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a7e   d85e     RCALL     0xb3c                      PICDEMFSUSBDemoBoardTest();                                          F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                   }                                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a80   d029     BRA       0xad4                  else if(usb_device_state == ATTACHED_STATE)                              F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a82   05c1     DECF      0xc1,0x0,0x1                                                                                    
000a84   e103     BNZ       0xa8c                                                                                           
                                                   {                                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a86   808c     BSF       0x8c,0x0,0x0               mLED_Both_On();                                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a88   828c     BSF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a8a   d024     BRA       0xad4                  else if(usb_device_state == POWERED_STATE)                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a8c   0e02     MOVLW     0x2                                                                                             
000a8e   5dc1     SUBWF     0xc1,0x0,0x1                                                                                    
000a90   e103     BNZ       0xa98                                                                                           
                                                   {                                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a92   808c     BSF       0x8c,0x0,0x0               mLED_Only_1_On();                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a94   928c     BCF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a96   d01e     BRA       0xad4                  else if(usb_device_state == DEFAULT_STATE)                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a98   0e03     MOVLW     0x3                                                                                             
000a9a   5dc1     SUBWF     0xc1,0x0,0x1                                                                                    
000a9c   e103     BNZ       0xaa4                                                                                           
                                                   {                                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000a9e   908c     BCF       0x8c,0x0,0x0               mLED_Only_2_On();                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000aa0   828c     BSF       0x8c,0x1,0x0                                                                                    
                                                   }                                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000aa2   d018     BRA       0xad4                  else if(usb_device_state == ADDRESS_STATE)                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000aa4   0e05     MOVLW     0x5                                                                                             
000aa6   5dc1     SUBWF     0xc1,0x0,0x1                                                                                    
000aa8   e107     BNZ       0xab8                                                                                           
                                                   {                                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000aaa   0100     MOVLB     0x0                        if(led_count == 0)                                                   F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000aac   51c7     MOVF      0xc7,0x0,0x1                                                                                    
000aae   11c8     IORWF     0xc8,0x0,0x1                                                                                    
000ab0   e102     BNZ       0xab6                                                                                           
                                                       {                                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000ab2   708c     BTG       0x8c,0x0,0x0                   mLED_1_Toggle();                                                 F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000ab4   928c     BCF       0x8c,0x1,0x0                   mLED_2_Off();                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                       }//end if                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                   }                                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000ab6   d00e     BRA       0xad4                  else if(usb_device_state == CONFIGURED_STATE)                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000ab8   0e06     MOVLW     0x6                                                                                             
000aba   5dc1     SUBWF     0xc1,0x0,0x1                                                                                    
000abc   e10b     BNZ       0xad4                                                                                           
                                                   {                                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000abe   0100     MOVLB     0x0                        if(led_count==0)                                                     F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000ac0   51c7     MOVF      0xc7,0x0,0x1                                                                                    
000ac2   11c8     IORWF     0xc8,0x0,0x1                                                                                    
000ac4   e107     BNZ       0xad4                                                                                           
                                                       {                                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000ac6   708c     BTG       0x8c,0x0,0x0                   mLED_1_Toggle();                                                 F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000ac8   508c     MOVF      0x8c,0x0,0x0                   mLED_2 = !mLED_1;       // Alternate blink                       F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000aca   0b01     ANDLW     0x1                                                                                             
000acc   e002     BZ        0xad2                                                                                           
000ace   928c     BCF       0x8c,0x1,0x0                                                                                    
000ad0   d001     BRA       0xad4                                                                                           
000ad2   828c     BSF       0x8c,0x1,0x0                                                                                    
                                                       }//end if                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                   }//end if(...)                                                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                               }//end if(UCONbits.SUSPND...)                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000ad4   0012     RETURN    0x0            }//end BlinkUSBStatus                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           BOOL Switch2IsPressed(void)                                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000ad6   5081     MOVF      0x81,0x0,0x0       if(sw2 != old_sw2)                                                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000ad8   0b10     ANDLW     0x10                                                                                            
000ada   e001     BZ        0xade                                                                                           
000adc   0e01     MOVLW     0x1                                                                                             
000ade   0100     MOVLB     0x0                                                                                             
000ae0   5d60     SUBWF     0x60,0x0,0x1                                                                                    
000ae2   e009     BZ        0xaf6                                                                                           
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000ae4   5081     MOVF      0x81,0x0,0x0           old_sw2 = sw2;                  // Save new value                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000ae6   0b10     ANDLW     0x10                                                                                            
000ae8   e001     BZ        0xaec                                                                                           
000aea   0e01     MOVLW     0x1                                                                                             
000aec   6f60     MOVWF     0x60,0x1                                                                                        
000aee   b881     BTFSC     0x81,0x4,0x0           if(sw2 == 0)                    // If pressed                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000af0   d002     BRA       0xaf6                                                                                           
000af2   0e01     MOVLW     0x1                        return TRUE;                // Was pressed                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000af4   d002     BRA       0xafa                                                                                           
                                               }//end if                                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000af6   0e00     MOVLW     0x0                return FALSE;                       // Was not pressed                       F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000af8   d000     BRA       0xafa                                                                                           
000afa   0012     RETURN    0x0            }//end Switch2IsPressed                                                          F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           BOOL Switch3IsPressed(void)                                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000afc   5081     MOVF      0x81,0x0,0x0       if(sw3 != old_sw3)                                                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000afe   0b20     ANDLW     0x20                                                                                            
000b00   e001     BZ        0xb04                                                                                           
000b02   0e01     MOVLW     0x1                                                                                             
000b04   0100     MOVLB     0x0                                                                                             
000b06   5d61     SUBWF     0x61,0x0,0x1                                                                                    
000b08   e009     BZ        0xb1c                                                                                           
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b0a   5081     MOVF      0x81,0x0,0x0           old_sw3 = sw3;                  // Save new value                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b0c   0b20     ANDLW     0x20                                                                                            
000b0e   e001     BZ        0xb12                                                                                           
000b10   0e01     MOVLW     0x1                                                                                             
000b12   6f61     MOVWF     0x61,0x1                                                                                        
000b14   ba81     BTFSC     0x81,0x5,0x0           if(sw3 == 0)                    // If pressed                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b16   d002     BRA       0xb1c                                                                                           
000b18   0e01     MOVLW     0x1                        return TRUE;                // Was pressed                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b1a   d002     BRA       0xb20                                                                                           
                                               }//end if                                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b1c   0e00     MOVLW     0x0                return FALSE;                       // Was not pressed                       F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b1e   d000     BRA       0xb20                                                                                           
000b20   0012     RETURN    0x0            }//end Switch3IsPressed                                                          F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b22   cfd9     MOVFF     0xfd9,0xfe6    void TXbyte(byte data)                                                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b24   ffe6                                                                                                               
000b26   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000b28   ffd9                                                                                                               
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b2a   a2ac     BTFSS     0xac,0x1,0x0       while(TXSTAbits.TRMT==0);                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b2c   d7fe     BRA       0xb2a                                                                                           
000b2e   0efe     MOVLW     0xfe               TXREG = data;                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b30   50db     MOVF      0xdb,0x0,0x0                                                                                    
000b32   6ead     MOVWF     0xad,0x0                                                                                        
000b34   52e5     MOVF      0xe5,0x1,0x0   }//end TXbyte                                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b36   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000b38   ffd9                                                                                                               
000b3a   0012     RETURN    0x0                                                                                             
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b3c   cfd9     MOVFF     0xfd9,0xfe6    void PICDEMFSUSBDemoBoardTest(void)                                              F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b3e   ffe6                                                                                                               
000b40   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000b42   ffd9                                                                                                               
000b44   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                               byte temp;                                                                   F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                               //PICDEM FS USB Demo Board Test Procedure:                                   F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b46   dfc7     RCALL     0xad6              if(Switch2IsPressed())                                                       F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b48   0900     IORLW     0x0                                                                                             
000b4a   e101     BNZ       0xb4e                                                                                           
000b4c   d0d3     BRA       0xcf4                                                                                           
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                   //LEDs and push buttons testing                                          F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b4e   808c     BSF       0x8c,0x0,0x0           mLED_1_On();                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b50   dfc2     RCALL     0xad6                  while(!Switch2IsPressed());                                              F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b52   0900     IORLW     0x0                                                                                             
000b54   e101     BNZ       0xb58                                                                                           
000b56   d7fc     BRA       0xb50                                                                                           
000b58   908c     BCF       0x8c,0x0,0x0           mLED_1_Off();                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b5a   828c     BSF       0x8c,0x1,0x0           mLED_2_On();                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b5c   dfcf     RCALL     0xafc                  while(!Switch3IsPressed());                                              F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b5e   0900     IORLW     0x0                                                                                             
000b60   e101     BNZ       0xb64                                                                                           
000b62   d7fc     BRA       0xb5c                                                                                           
000b64   928c     BCF       0x8c,0x1,0x0           mLED_2_Off();                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b66   848c     BSF       0x8c,0x2,0x0           mLED_3_On();                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b68   dfc9     RCALL     0xafc                  while(!Switch3IsPressed());                                              F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b6a   0900     IORLW     0x0                                                                                             
000b6c   e101     BNZ       0xb70                                                                                           
000b6e   d7fc     BRA       0xb68                                                                                           
000b70   948c     BCF       0x8c,0x2,0x0           mLED_3_Off();                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b72   868c     BSF       0x8c,0x3,0x0           mLED_4_On();                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b74   dfc3     RCALL     0xafc                  while(!Switch3IsPressed());                                              F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b76   0900     IORLW     0x0                                                                                             
000b78   e101     BNZ       0xb7c                                                                                           
000b7a   d7fc     BRA       0xb74                                                                                           
000b7c   968c     BCF       0x8c,0x3,0x0           mLED_4_Off();                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                   //RS-232 Setup                                                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b7e   6ac6     CLRF      0xc6,0x0               SSPCON1 = 0;        // Make sure SPI is disabled                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b80   8e94     BSF       0x94,0x7,0x0           TRISCbits.TRISC7=1; // RX                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b82   9c94     BCF       0x94,0x6,0x0           TRISCbits.TRISC6=0; // TX                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b84   0e71     MOVLW     0x71                   SPBRG = 0x71;                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b86   6eaf     MOVWF     0xaf,0x0                                                                                        
000b88   0e02     MOVLW     0x2                    SPBRGH = 0x02;      // 0x0271 for 48MHz -> 19200 baud                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b8a   6eb0     MOVWF     0xb0,0x0                                                                                        
000b8c   0e24     MOVLW     0x24                   TXSTA = 0x24;       // TX enable BRGH=1                                  F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b8e   6eac     MOVWF     0xac,0x0                                                                                        
000b90   0e90     MOVLW     0x90                   RCSTA = 0x90;       // continuous RX                                     F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b92   6eab     MOVWF     0xab,0x0                                                                                        
000b94   0e08     MOVLW     0x8                    BAUDCON = 0x08;     // BRG16 = 1                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b96   6eb8     MOVWF     0xb8,0x0                                                                                        
000b98   50ae     MOVF      0xae,0x0,0x0           temp = RCREG;       // Empty buffer                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b9a   6edf     MOVWF     0xdf,0x0                                                                                        
000b9c   50ae     MOVF      0xae,0x0,0x0           temp = RCREG;       // Empty buffer                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000b9e   6edf     MOVWF     0xdf,0x0                                                                                        
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                   //RS-232 Tx & Rx Tests                                                   F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000ba0   dfad     RCALL     0xafc                  while(!Switch3IsPressed());                                              F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000ba2   0900     IORLW     0x0                                                                                             
000ba4   e101     BNZ       0xba8                                                                                           
000ba6   d7fc     BRA       0xba0                                                                                           
000ba8   0e52     MOVLW     0x52                   TXbyte('R');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000baa   6ee6     MOVWF     0xe6,0x0                                                                                        
000bac   dfba     RCALL     0xb22                                                                                           
000bae   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bb0   0e53     MOVLW     0x53                   TXbyte('S');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000bb2   6ee6     MOVWF     0xe6,0x0                                                                                        
000bb4   dfb6     RCALL     0xb22                                                                                           
000bb6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bb8   0e2d     MOVLW     0x2d                   TXbyte('-');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000bba   6ee6     MOVWF     0xe6,0x0                                                                                        
000bbc   dfb2     RCALL     0xb22                                                                                           
000bbe   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bc0   0e32     MOVLW     0x32                   TXbyte('2');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000bc2   6ee6     MOVWF     0xe6,0x0                                                                                        
000bc4   dfae     RCALL     0xb22                                                                                           
000bc6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bc8   0e33     MOVLW     0x33                   TXbyte('3');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000bca   6ee6     MOVWF     0xe6,0x0                                                                                        
000bcc   dfaa     RCALL     0xb22                                                                                           
000bce   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bd0   0e32     MOVLW     0x32                   TXbyte('2');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000bd2   6ee6     MOVWF     0xe6,0x0                                                                                        
000bd4   dfa6     RCALL     0xb22                                                                                           
000bd6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bd8   0e20     MOVLW     0x20                   TXbyte(' ');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000bda   6ee6     MOVWF     0xe6,0x0                                                                                        
000bdc   dfa2     RCALL     0xb22                                                                                           
000bde   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000be0   0e54     MOVLW     0x54                   TXbyte('T');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000be2   6ee6     MOVWF     0xe6,0x0                                                                                        
000be4   df9e     RCALL     0xb22                                                                                           
000be6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000be8   0e58     MOVLW     0x58                   TXbyte('X');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000bea   6ee6     MOVWF     0xe6,0x0                                                                                        
000bec   df9a     RCALL     0xb22                                                                                           
000bee   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bf0   0e20     MOVLW     0x20                   TXbyte(' ');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000bf2   6ee6     MOVWF     0xe6,0x0                                                                                        
000bf4   df96     RCALL     0xb22                                                                                           
000bf6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bf8   0e54     MOVLW     0x54                   TXbyte('T');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000bfa   6ee6     MOVWF     0xe6,0x0                                                                                        
000bfc   df92     RCALL     0xb22                                                                                           
000bfe   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c00   0e65     MOVLW     0x65                   TXbyte('e');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c02   6ee6     MOVWF     0xe6,0x0                                                                                        
000c04   df8e     RCALL     0xb22                                                                                           
000c06   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c08   0e73     MOVLW     0x73                   TXbyte('s');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c0a   6ee6     MOVWF     0xe6,0x0                                                                                        
000c0c   df8a     RCALL     0xb22                                                                                           
000c0e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c10   0e74     MOVLW     0x74                   TXbyte('t');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c12   6ee6     MOVWF     0xe6,0x0                                                                                        
000c14   df86     RCALL     0xb22                                                                                           
000c16   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c18   0e20     MOVLW     0x20                   TXbyte(' ');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c1a   6ee6     MOVWF     0xe6,0x0                                                                                        
000c1c   df82     RCALL     0xb22                                                                                           
000c1e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c20   0e4f     MOVLW     0x4f                   TXbyte('O');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c22   6ee6     MOVWF     0xe6,0x0                                                                                        
000c24   df7e     RCALL     0xb22                                                                                           
000c26   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c28   0e4b     MOVLW     0x4b                   TXbyte('K');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c2a   6ee6     MOVWF     0xe6,0x0                                                                                        
000c2c   df7a     RCALL     0xb22                                                                                           
000c2e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c30   0e2c     MOVLW     0x2c                   TXbyte(',');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c32   6ee6     MOVWF     0xe6,0x0                                                                                        
000c34   df76     RCALL     0xb22                                                                                           
000c36   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c38   0e20     MOVLW     0x20                   TXbyte(' ');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c3a   6ee6     MOVWF     0xe6,0x0                                                                                        
000c3c   df72     RCALL     0xb22                                                                                           
000c3e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c40   0e50     MOVLW     0x50                   TXbyte('P');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c42   6ee6     MOVWF     0xe6,0x0                                                                                        
000c44   df6e     RCALL     0xb22                                                                                           
000c46   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c48   0e72     MOVLW     0x72                   TXbyte('r');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c4a   6ee6     MOVWF     0xe6,0x0                                                                                        
000c4c   df6a     RCALL     0xb22                                                                                           
000c4e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c50   0e65     MOVLW     0x65                   TXbyte('e');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c52   6ee6     MOVWF     0xe6,0x0                                                                                        
000c54   df66     RCALL     0xb22                                                                                           
000c56   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c58   0e73     MOVLW     0x73                   TXbyte('s');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c5a   6ee6     MOVWF     0xe6,0x0                                                                                        
000c5c   df62     RCALL     0xb22                                                                                           
000c5e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c60   0e73     MOVLW     0x73                   TXbyte('s');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c62   6ee6     MOVWF     0xe6,0x0                                                                                        
000c64   df5e     RCALL     0xb22                                                                                           
000c66   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c68   0e20     MOVLW     0x20                   TXbyte(' ');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c6a   6ee6     MOVWF     0xe6,0x0                                                                                        
000c6c   df5a     RCALL     0xb22                                                                                           
000c6e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c70   0e22     MOVLW     0x22                   TXbyte('"');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c72   6ee6     MOVWF     0xe6,0x0                                                                                        
000c74   df56     RCALL     0xb22                                                                                           
000c76   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c78   0e72     MOVLW     0x72                   TXbyte('r');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c7a   6ee6     MOVWF     0xe6,0x0                                                                                        
000c7c   df52     RCALL     0xb22                                                                                           
000c7e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c80   0e22     MOVLW     0x22                   TXbyte('"');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c82   6ee6     MOVWF     0xe6,0x0                                                                                        
000c84   df4e     RCALL     0xb22                                                                                           
000c86   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c88   0e2c     MOVLW     0x2c                   TXbyte(',');                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c8a   6ee6     MOVWF     0xe6,0x0                                                                                        
000c8c   df4a     RCALL     0xb22                                                                                           
000c8e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c90   aa9e     BTFSS     0x9e,0x5,0x0           while(PIR1bits.RCIF==0);        //Wait for data from RS232               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c92   d7fe     BRA       0xc90                                                                                           
000c94   0e72     MOVLW     0x72                   if(RCREG == 'r')                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c96   5cae     SUBWF     0xae,0x0,0x0                                                                                    
000c98   e12c     BNZ       0xcf2                                                                                           
                                                   {                                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c9a   0e20     MOVLW     0x20                       TXbyte(' ');                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000c9c   6ee6     MOVWF     0xe6,0x0                                                                                        
000c9e   df41     RCALL     0xb22                                                                                           
000ca0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000ca2   0e52     MOVLW     0x52                       TXbyte('R');                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000ca4   6ee6     MOVWF     0xe6,0x0                                                                                        
000ca6   df3d     RCALL     0xb22                                                                                           
000ca8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000caa   0e58     MOVLW     0x58                       TXbyte('X');                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000cac   6ee6     MOVWF     0xe6,0x0                                                                                        
000cae   df39     RCALL     0xb22                                                                                           
000cb0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000cb2   0e20     MOVLW     0x20                       TXbyte(' ');                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000cb4   6ee6     MOVWF     0xe6,0x0                                                                                        
000cb6   df35     RCALL     0xb22                                                                                           
000cb8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000cba   0e54     MOVLW     0x54                       TXbyte('T');                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000cbc   6ee6     MOVWF     0xe6,0x0                                                                                        
000cbe   df31     RCALL     0xb22                                                                                           
000cc0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000cc2   0e65     MOVLW     0x65                       TXbyte('e');                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000cc4   6ee6     MOVWF     0xe6,0x0                                                                                        
000cc6   df2d     RCALL     0xb22                                                                                           
000cc8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000cca   0e73     MOVLW     0x73                       TXbyte('s');                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000ccc   6ee6     MOVWF     0xe6,0x0                                                                                        
000cce   df29     RCALL     0xb22                                                                                           
000cd0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000cd2   0e74     MOVLW     0x74                       TXbyte('t');                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000cd4   6ee6     MOVWF     0xe6,0x0                                                                                        
000cd6   df25     RCALL     0xb22                                                                                           
000cd8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000cda   0e20     MOVLW     0x20                       TXbyte(' ');                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000cdc   6ee6     MOVWF     0xe6,0x0                                                                                        
000cde   df21     RCALL     0xb22                                                                                           
000ce0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000ce2   0e4f     MOVLW     0x4f                       TXbyte('O');                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000ce4   6ee6     MOVWF     0xe6,0x0                                                                                        
000ce6   df1d     RCALL     0xb22                                                                                           
000ce8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000cea   0e4b     MOVLW     0x4b                       TXbyte('K');                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000cec   6ee6     MOVWF     0xe6,0x0                                                                                        
000cee   df19     RCALL     0xb22                                                                                           
000cf0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                   }//end if                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000cf2   dda2     RCALL     0x838                  UserInit();                     //Re-initialize default user fw          F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                   //Test phase 1 done                                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                               }//end if                                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000cf4   52e5     MOVF      0xe5,0x1,0x0   }//end PICDEMFSUSBDemoBoardTest()                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000cf6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000cf8   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000cfa   ffd9                                                                                                               
000cfc   0012     RETURN    0x0                                                                                             
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000cfe   cfd9     MOVFF     0xfd9,0xfe6    char ReadWithSPIHalfDuplex(char address)                                         F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d00   ffe6                                                                                                               
000d02   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000d04   ffd9                                                                                                               
000d06   0e02     MOVLW     0x2                                                                                             
000d08   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           	char Bit;                                                                       F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           	char input;                                                                     F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d0a   9494     BCF       0x94,0x2,0x0   	TRIS_SW_CS_PIN = 0; // Make the CS pin an output                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d0c   9c93     BCF       0x93,0x6,0x0   	TRIS_SW_SCK_PIN = 0; // Make the SCK pin an output                              F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d0e   9e93     BCF       0x93,0x7,0x0   	TRIS_SW_DIO_PIN = 0; // Make the DOUT pin an output                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d10   9482     BCF       0x82,0x2,0x0   	SW_CS_PIN = 0; // Enable the mouse                                              F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d12   0e01     MOVLW     0x1            	input = 0;                                                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d14   6adb     CLRF      0xdb,0x0                                                                                        
000d16   0efe     MOVLW     0xfe               address=address & 0x7F;                                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d18   50db     MOVF      0xdb,0x0,0x0                                                                                    
000d1a   0b7f     ANDLW     0x7f                                                                                            
000d1c   6ee7     MOVWF     0xe7,0x0                                                                                        
000d1e   0efe     MOVLW     0xfe                                                                                            
000d20   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
000d22   ffdb                                                                                                               
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d24   0e07     MOVLW     0x7            	for(Bit=7; Bit>=0;Bit--)                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d26   6edf     MOVWF     0xdf,0x0                                                                                        
000d28   cfdf     MOVFF     0xfdf,0x10                                                                                      
000d2a   f010                                                                                                               
000d2c   3410     RLCF      0x10,0x0,0x0                                                                                    
000d2e   e215     BC        0xd5a                                                                                           
000d56   06df     DECF      0xdf,0x1,0x0                                                                                    
000d58   d7e7     BRA       0xd28                                                                                           
                                           	{                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d30   9c81     BCF       0x81,0x6,0x0   		SW_SCK_PIN = 0; 					// Clear the SCK pin                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d32   0000     NOP                      		Nop(); 								// Pause a little bit                                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d34   0efe     MOVLW     0xfe           		SW_DIO_PIN = (address>>Bit)&1;		// Set the Data line with a bit of the address F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d36   50db     MOVF      0xdb,0x0,0x0                                                                                    
000d38   52df     MOVF      0xdf,0x1,0x0                                                                                    
000d3a   e006     BZ        0xd48                                                                                           
000d3c   cfdf     MOVFF     0xfdf,0xff3                                                                                     
000d3e   fff3                                                                                                               
000d40   32e8     RRCF      0xe8,0x1,0x0                                                                                    
000d42   0b7f     ANDLW     0x7f                                                                                            
000d44   06f3     DECF      0xf3,0x1,0x0                                                                                    
000d46   e1fc     BNZ       0xd40                                                                                           
000d48   0b01     ANDLW     0x1                                                                                             
000d4a   b0e8     BTFSC     0xe8,0x0,0x0                                                                                    
000d4c   8e81     BSF       0x81,0x7,0x0                                                                                    
000d4e   a0e8     BTFSS     0xe8,0x0,0x0                                                                                    
000d50   9e81     BCF       0x81,0x7,0x0                                                                                    
000d52   8c81     BSF       0x81,0x6,0x0   		SW_SCK_PIN = 1; 					// Set the SCK pin                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d54   0000     NOP                      		Nop(); 								// Pause a little bit                                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           	}                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d5a   8e93     BSF       0x93,0x7,0x0   	TRIS_SW_DIO_PIN = 1;                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d5c   0000     NOP                      	Nop();                                                                          F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           	                                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d5e   0e07     MOVLW     0x7            	for(Bit=7; Bit>=0;Bit--)                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d60   6edf     MOVWF     0xdf,0x0                                                                                        
000d62   cfdf     MOVFF     0xfdf,0x10                                                                                      
000d64   f010                                                                                                               
000d66   3410     RLCF      0x10,0x0,0x0                                                                                    
000d68   e213     BC        0xd90                                                                                           
000d8c   06df     DECF      0xdf,0x1,0x0                                                                                    
000d8e   d7e9     BRA       0xd62                                                                                           
                                           	{                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d6a   9c81     BCF       0x81,0x6,0x0   		SW_SCK_PIN = 0; 					// Clear the SCK pin                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d6c   0000     NOP                      		Nop(); 								// Pause a little bit                                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d6e   5081     MOVF      0x81,0x0,0x0   		input = (input<<1) | SW_DIO_PIN; 	// Read data line                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d70   0b80     ANDLW     0x80                                                                                            
000d72   e001     BZ        0xd76                                                                                           
000d74   0e01     MOVLW     0x1                                                                                             
000d76   6e10     MOVWF     0x10,0x0                                                                                        
000d78   0e01     MOVLW     0x1                                                                                             
000d7a   50db     MOVF      0xdb,0x0,0x0                                                                                    
000d7c   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
000d7e   1010     IORWF     0x10,0x0,0x0                                                                                    
000d80   6ee7     MOVWF     0xe7,0x0                                                                                        
000d82   0e01     MOVLW     0x1                                                                                             
000d84   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
000d86   ffdb                                                                                                               
000d88   8c81     BSF       0x81,0x6,0x0   		SW_SCK_PIN = 1; 					// Set the SCK pin                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d8a   0000     NOP                      		Nop(); 								// Pause a little bit                                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           	}                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d90   8482     BSF       0x82,0x2,0x0   	SW_CS_PIN = 1; // Disable the mouse                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d92   0e01     MOVLW     0x1            	return(input); // Return the received data                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d94   50db     MOVF      0xdb,0x0,0x0                                                                                    
000d96   d000     BRA       0xd98                                                                                           
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d98   6e10     MOVWF     0x10,0x0       }                                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000d9a   0e02     MOVLW     0x2                                                                                             
000d9c   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
000d9e   e202     BC        0xda4                                                                                           
000da0   6ae1     CLRF      0xe1,0x0                                                                                        
000da2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000da4   6ee1     MOVWF     0xe1,0x0                                                                                        
000da6   5010     MOVF      0x10,0x0,0x0                                                                                    
000da8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000daa   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000dac   ffd9                                                                                                               
000dae   0012     RETURN    0x0                                                                                             
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000db0   cfd9     MOVFF     0xfd9,0xfe6    char WriteWithSPIHalfDuplex(char address, char data)                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000db2   ffe6                                                                                                               
000db4   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000db6   ffd9                                                                                                               
000db8   0e02     MOVLW     0x2                                                                                             
000dba   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           	char Bit;                                                                       F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           	char input;                                                                     F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000dbc   9494     BCF       0x94,0x2,0x0   	TRIS_SW_CS_PIN = 0; // Make the CS pin an output                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000dbe   9c93     BCF       0x93,0x6,0x0   	TRIS_SW_SCK_PIN = 0; // Make the SCK pin an output                              F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000dc0   9e93     BCF       0x93,0x7,0x0   	TRIS_SW_DIO_PIN = 0; // Make the DOUT pin an output                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000dc2   9482     BCF       0x82,0x2,0x0   	SW_CS_PIN = 0; // Enable the mouse                                              F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000dc4   0e01     MOVLW     0x1            	input = 0;                                                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000dc6   6adb     CLRF      0xdb,0x0                                                                                        
000dc8   0efe     MOVLW     0xfe               address=address | 0x80;                                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000dca   50db     MOVF      0xdb,0x0,0x0                                                                                    
000dcc   0980     IORLW     0x80                                                                                            
000dce   6ee7     MOVWF     0xe7,0x0                                                                                        
000dd0   0efe     MOVLW     0xfe                                                                                            
000dd2   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
000dd4   ffdb                                                                                                               
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000dd6   0e07     MOVLW     0x7            	for(Bit=7; Bit>=0;Bit--)                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000dd8   6edf     MOVWF     0xdf,0x0                                                                                        
000dda   cfdf     MOVFF     0xfdf,0x10                                                                                      
000ddc   f010                                                                                                               
000dde   3410     RLCF      0x10,0x0,0x0                                                                                    
000de0   e215     BC        0xe0c                                                                                           
000e08   06df     DECF      0xdf,0x1,0x0                                                                                    
000e0a   d7e7     BRA       0xdda                                                                                           
                                           	{                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000de2   9c81     BCF       0x81,0x6,0x0   		SW_SCK_PIN = 0; 					// Clear the SCK pin                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000de4   0000     NOP                      		Nop(); 								// Pause a little bit                                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000de6   0efe     MOVLW     0xfe           		SW_DIO_PIN = (address>>Bit)&1;		// Set the Data line with a bit of the address F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000de8   50db     MOVF      0xdb,0x0,0x0                                                                                    
000dea   52df     MOVF      0xdf,0x1,0x0                                                                                    
000dec   e006     BZ        0xdfa                                                                                           
000dee   cfdf     MOVFF     0xfdf,0xff3                                                                                     
000df0   fff3                                                                                                               
000df2   32e8     RRCF      0xe8,0x1,0x0                                                                                    
000df4   0b7f     ANDLW     0x7f                                                                                            
000df6   06f3     DECF      0xf3,0x1,0x0                                                                                    
000df8   e1fc     BNZ       0xdf2                                                                                           
000dfa   0b01     ANDLW     0x1                                                                                             
000dfc   b0e8     BTFSC     0xe8,0x0,0x0                                                                                    
000dfe   8e81     BSF       0x81,0x7,0x0                                                                                    
000e00   a0e8     BTFSS     0xe8,0x0,0x0                                                                                    
000e02   9e81     BCF       0x81,0x7,0x0                                                                                    
000e04   8c81     BSF       0x81,0x6,0x0   		SW_SCK_PIN = 1; 					// Set the SCK pin                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000e06   0000     NOP                      		Nop(); 								// Pause a little bit                                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           	}                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000e0c   0000     NOP                      	Nop();                                                                          F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000e0e   0e07     MOVLW     0x7            	for(Bit=7; Bit>=0;Bit--)                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000e10   6edf     MOVWF     0xdf,0x0                                                                                        
000e12   cfdf     MOVFF     0xfdf,0x10                                                                                      
000e14   f010                                                                                                               
000e16   3410     RLCF      0x10,0x0,0x0                                                                                    
000e18   e215     BC        0xe44                                                                                           
000e40   06df     DECF      0xdf,0x1,0x0                                                                                    
000e42   d7e7     BRA       0xe12                                                                                           
                                           	{                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000e1a   9c81     BCF       0x81,0x6,0x0   		SW_SCK_PIN = 0; 					// Clear the SCK pin                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000e1c   0000     NOP                      		Nop(); 								// Pause a little bit                                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000e1e   0efd     MOVLW     0xfd           		SW_DIO_PIN = (data>>Bit)&1; 	// Read data line                                 F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000e20   50db     MOVF      0xdb,0x0,0x0                                                                                    
000e22   52df     MOVF      0xdf,0x1,0x0                                                                                    
000e24   e006     BZ        0xe32                                                                                           
000e26   cfdf     MOVFF     0xfdf,0xff3                                                                                     
000e28   fff3                                                                                                               
000e2a   32e8     RRCF      0xe8,0x1,0x0                                                                                    
000e2c   0b7f     ANDLW     0x7f                                                                                            
000e2e   06f3     DECF      0xf3,0x1,0x0                                                                                    
000e30   e1fc     BNZ       0xe2a                                                                                           
000e32   0b01     ANDLW     0x1                                                                                             
000e34   b0e8     BTFSC     0xe8,0x0,0x0                                                                                    
000e36   8e81     BSF       0x81,0x7,0x0                                                                                    
000e38   a0e8     BTFSS     0xe8,0x0,0x0                                                                                    
000e3a   9e81     BCF       0x81,0x7,0x0                                                                                    
000e3c   8c81     BSF       0x81,0x6,0x0   		SW_SCK_PIN = 1; 					// Set the SCK pin                                        F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000e3e   0000     NOP                      		Nop(); 								// Pause a little bit                                           F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           	}                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000e44   8482     BSF       0x82,0x2,0x0   	SW_CS_PIN = 1; // Disable the mouse                                             F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000e46   0e01     MOVLW     0x1            	return(input); // Return the received data                                      F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000e48   50db     MOVF      0xdb,0x0,0x0                                                                                    
000e4a   d000     BRA       0xe4c                                                                                           
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000e4c   6e10     MOVWF     0x10,0x0       }                                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
000e4e   0e02     MOVLW     0x2                                                                                             
000e50   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
000e52   e202     BC        0xe58                                                                                           
000e54   6ae1     CLRF      0xe1,0x0                                                                                        
000e56   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000e58   6ee1     MOVWF     0xe1,0x0                                                                                        
000e5a   5010     MOVF      0x10,0x0,0x0                                                                                    
000e5c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000e5e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000e60   ffd9                                                                                                               
000e62   0012     RETURN    0x0                                                                                             
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           /** EOF user.c ***************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\user\user.c
                                           /*********************************************************************           F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                Thermo Sensor with SPI(TM) Interface                           F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *********************************************************************           F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * FileName:        temperature.c                                                F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Dependencies:    See INCLUDES section below                                   F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Processor:       PIC18                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Compiler:        C18 2.30.01+                                                 F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Company:         Microchip Technology, Inc.                                   F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Software License Agreement                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * The software supplied herewith by Microchip Technology Incorporated           F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * supplied to you, the Company’s customer, for use solely and                   F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * software is owned by the Company and/or its supplier, and is                  F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * protected under applicable copyright laws. All rights are reserved.           F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Any use in violation of the foregoing restrictions may subject the            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * user to criminal sanctions under applicable laws, as well as to               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * civil liability for the breach of the terms and conditions of this            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * license.                                                                      F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Author               Date        Comment                                      F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            ********************************************************************/           F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           /** I N C L U D E S **********************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           #include <p18cxxx.h>                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           #include "system\typedefs.h"                                                     F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           #include <spi.h>                                                                 F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           #include "io_cfg.h"                                                              F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           #include "user\temperature.h"                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           /** V A R I A B L E S ********************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           #pragma udata                                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           WORD temperature;           // Raw data format                                   F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           char tempString[10];        // Buffer for storing data in ASCII format           F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           /** D E C L A R A T I O N S **************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           #pragma code                                                                     F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Function:        void InitTempSensor(void)                                    F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Overview:        Initializes SPI interface & chip select line                 F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           void InitTempSensor(void)                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
001422   848a     BSF       0x8a,0x2,0x0       cs_temp_sensor = 1;                                                          F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
001424   9493     BCF       0x93,0x2,0x0       tris_cs_temp_sensor = OUTPUT_PIN;                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
001426   6ae6     CLRF      0xe6,0x0           OpenSPI(SPI_FOSC_64, MODE_11, SMPMID);                                       F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
001428   0e03     MOVLW     0x3                                                                                             
00142a   6ee6     MOVWF     0xe6,0x0                                                                                        
00142c   0e02     MOVLW     0x2                                                                                             
00142e   6ee6     MOVWF     0xe6,0x0                                                                                        
001430   ec0b     CALL      0x1a16,0x0                                                                                      
001432   f00d                                                                                                               
001434   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001436   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001438   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                               // Initialize readable values - default to room temperature                  F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
00143a   0100     MOVLB     0x0                temperature._word = 0x0C87;       // 25 degree celsius                       F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
00143c   0e87     MOVLW     0x87                                                                                            
00143e   6fa3     MOVWF     0xa3,0x1                                                                                        
001440   0e0c     MOVLW     0xc                                                                                             
001442   6fa4     MOVWF     0xa4,0x1                                                                                        
001444   ef35     GOTO      0x146a             UpdateCelsiusASCII();                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
001446   f00a                                                                                                               
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           }//end InitTempSensor                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Function:        void AcquireTemperature(void)                                F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Overview:        None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           BOOL AcquireTemperature(void)                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
001448   948a     BCF       0x8a,0x2,0x0       cs_temp_sensor = 0;                                                          F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
00144a   ec68     CALL      0x1ad0,0x0         MSB(temperature) = ReadSPI();                                                F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
00144c   f00d                                                                                                               
00144e   0100     MOVLB     0x0                                                                                             
001450   6fa4     MOVWF     0xa4,0x1                                                                                        
001452   ec68     CALL      0x1ad0,0x0         LSB(temperature) = ReadSPI();                                                F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
001454   f00d                                                                                                               
001456   0100     MOVLB     0x0                                                                                             
001458   6fa3     MOVWF     0xa3,0x1                                                                                        
00145a   848a     BSF       0x8a,0x2,0x0       cs_temp_sensor = 1;                                                          F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
00145c   b5a3     BTFSC     0xa3,0x2,0x1       if(temperature.LowB.b2 == 0)                                                 F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
00145e   d002     BRA       0x1464                                                                                          
001460   0e00     MOVLW     0x0                    return FAIL;                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
001462   d002     BRA       0x1468                                                                                          
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
001464   0e01     MOVLW     0x1                return OK;                                                                   F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
001466   d000     BRA       0x1468                                                                                          
001468   0012     RETURN    0x0            }//end AcquireTemperature                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Function:        void UpdateCelsiusASCII(void)                                F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Overview:        This routine converts data output to ASCII string            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
00146a   cfd9     MOVFF     0xfd9,0xfe6    void UpdateCelsiusASCII(void)                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
00146c   ffe6                                                                                                               
00146e   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001470   ffd9                                                                                                               
001472   0e03     MOVLW     0x3                                                                                             
001474   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                               WORD temp;                                                                   F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                               byte i;                                                                      F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
001476   c0a3     MOVFF     0xa3,0x10          temp._word = temperature._word >> 3;                                         F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
001478   f010                                                                                                               
00147a   c0a4     MOVFF     0xa4,0x11                                                                                       
00147c   f011                                                                                                               
00147e   90d8     BCF       0xd8,0x0,0x0                                                                                    
001480   3211     RRCF      0x11,0x1,0x0                                                                                    
001482   3210     RRCF      0x10,0x1,0x0                                                                                    
001484   04e8     DECF      0xe8,0x0,0x0                                                                                    
001486   e1fb     BNZ       0x147e                                                                                          
001488   c010     MOVFF     0x10,0xfde                                                                                      
00148a   ffde                                                                                                               
00148c   c011     MOVFF     0x11,0xfdd                                                                                      
00148e   ffdd                                                                                                               
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
001490   50d9     MOVF      0xd9,0x0,0x0       if(temp.HighB.b4 == 0)                                                       F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
001492   0f01     ADDLW     0x1                                                                                             
001494   6ee9     MOVWF     0xe9,0x0                                                                                        
001496   cfda     MOVFF     0xfda,0xfea                                                                                     
001498   ffea                                                                                                               
00149a   50ef     MOVF      0xef,0x0,0x0                                                                                    
00149c   0b10     ANDLW     0x10                                                                                            
00149e   e108     BNZ       0x14b0                                                                                          
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
0014a0   0e01     MOVLW     0x1                    temp.HighB._byte &= 0b00011111;                                          F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
0014a2   9adb     BCF       0xdb,0x5,0x0                                                                                    
0014a4   9cdb     BCF       0xdb,0x6,0x0                                                                                    
0014a6   9edb     BCF       0xdb,0x7,0x0                                                                                    
0014a8   0100     MOVLB     0x0                    tempString[0] = '+';                                                     F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
0014aa   0e2b     MOVLW     0x2b                                                                                            
0014ac   6fa5     MOVWF     0xa5,0x1                                                                                        
                                               }                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
0014ae   d016     BRA       0x14dc             else                                                                         F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
0014b0   0e01     MOVLW     0x1                    temp.HighB._byte |= 0b11100000;                                          F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
0014b2   8adb     BSF       0xdb,0x5,0x0                                                                                    
0014b4   8cdb     BSF       0xdb,0x6,0x0                                                                                    
0014b6   8edb     BSF       0xdb,0x7,0x0                                                                                    
0014b8   0100     MOVLB     0x0                    tempString[0] = '-';                                                     F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
0014ba   0e2d     MOVLW     0x2d                                                                                            
0014bc   6fa5     MOVWF     0xa5,0x1                                                                                        
0014be   cfde     MOVFF     0xfde,0x10             temp._word = temp._word ^ 0xFFFF;   // Negate                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
0014c0   f010                                                                                                               
0014c2   cfdd     MOVFF     0xfdd,0x11                                                                                      
0014c4   f011                                                                                                               
0014c6   0eff     MOVLW     0xff                                                                                            
0014c8   1a10     XORWF     0x10,0x1,0x0                                                                                    
0014ca   1a11     XORWF     0x11,0x1,0x0                                                                                    
0014cc   c010     MOVFF     0x10,0xfde                                                                                      
0014ce   ffde                                                                                                               
0014d0   c011     MOVFF     0x11,0xfdd                                                                                      
0014d2   ffdd                                                                                                               
0014d4   2adf     INCF      0xdf,0x1,0x0           temp._word++;                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
0014d6   0e01     MOVLW     0x1                                                                                             
0014d8   e301     BNC       0x14dc                                                                                          
0014da   2adb     INCF      0xdb,0x1,0x0                                                                                    
                                               }//end if                                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
0014dc   cfde     MOVFF     0xfde,0x10         temp._word = (temp._word*10U) >> 4;     // Turn into celsius xx.x            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
0014de   f010                                                                                                               
0014e0   cfdd     MOVFF     0xfdd,0x11                                                                                      
0014e2   f011                                                                                                               
0014e4   0e0a     MOVLW     0xa                                                                                             
0014e6   0211     MULWF     0x11,0x0                                                                                        
0014e8   cff3     MOVFF     0xff3,0x11                                                                                      
0014ea   f011                                                                                                               
0014ec   0210     MULWF     0x10,0x0                                                                                        
0014ee   cff3     MOVFF     0xff3,0x10                                                                                      
0014f0   f010                                                                                                               
0014f2   50f4     MOVF      0xf4,0x0,0x0                                                                                    
0014f4   2611     ADDWF     0x11,0x1,0x0                                                                                    
0014f6   0e04     MOVLW     0x4                                                                                             
0014f8   90d8     BCF       0xd8,0x0,0x0                                                                                    
0014fa   3211     RRCF      0x11,0x1,0x0                                                                                    
0014fc   3210     RRCF      0x10,0x1,0x0                                                                                    
0014fe   04e8     DECF      0xe8,0x0,0x0                                                                                    
001500   e1fb     BNZ       0x14f8                                                                                          
001502   c010     MOVFF     0x10,0xfde                                                                                      
001504   ffde                                                                                                               
001506   c011     MOVFF     0x11,0xfdd                                                                                      
001508   ffdd                                                                                                               
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                               /* Populate string */                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
00150a   0e04     MOVLW     0x4                for(i=4;i>0;i--)                                                             F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
00150c   6ef3     MOVWF     0xf3,0x0                                                                                        
00150e   0e02     MOVLW     0x2                                                                                             
001510   cff3     MOVFF     0xff3,0xfdb                                                                                     
001512   ffdb                                                                                                               
001514   50db     MOVF      0xdb,0x0,0x0                                                                                    
001516   0800     SUBLW     0x0                                                                                             
001518   e233     BC        0x1580                                                                                          
00157a   0e02     MOVLW     0x2                                                                                             
00157c   06db     DECF      0xdb,0x1,0x0                                                                                    
00157e   d7ca     BRA       0x1514                                                                                          
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
00151a   cfde     MOVFF     0xfde,0x10             tempString[i] = (((char)(temp._word % 10)) & 0x0F) | 0x30;               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
00151c   f010                                                                                                               
00151e   cfdd     MOVFF     0xfdd,0x11                                                                                      
001520   f011                                                                                                               
001522   0e0a     MOVLW     0xa                                                                                             
001524   6e0b     MOVWF     0xb,0x0                                                                                         
001526   6a0c     CLRF      0xc,0x0                                                                                         
001528   c010     MOVFF     0x10,0x6                                                                                        
00152a   f006                                                                                                               
00152c   c011     MOVFF     0x11,0x7                                                                                        
00152e   f007                                                                                                               
001530   ec3d     CALL      0x1a7a,0x0                                                                                      
001532   f00d                                                                                                               
001534   c002     MOVFF     0x2,0x10                                                                                        
001536   f010                                                                                                               
001538   c003     MOVFF     0x3,0x11                                                                                        
00153a   f011                                                                                                               
00153c   0e0f     MOVLW     0xf                                                                                             
00153e   1410     ANDWF     0x10,0x0,0x0                                                                                    
001540   0930     IORLW     0x30                                                                                            
001542   6ee6     MOVWF     0xe6,0x0                                                                                        
001544   0e02     MOVLW     0x2                                                                                             
001546   50db     MOVF      0xdb,0x0,0x0                                                                                    
001548   6aea     CLRF      0xea,0x0                                                                                        
00154a   0fa5     ADDLW     0xa5                                                                                            
00154c   6ee9     MOVWF     0xe9,0x0                                                                                        
00154e   0e00     MOVLW     0x0                                                                                             
001550   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001552   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001554   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001556   6eef     MOVWF     0xef,0x0                                                                                        
001558   cfd9     MOVFF     0xfd9,0xfe9            temp._word /= 10;                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
00155a   ffe9                                                                                                               
00155c   cfda     MOVFF     0xfda,0xfea                                                                                     
00155e   ffea                                                                                                               
001560   0e0a     MOVLW     0xa                                                                                             
001562   6e0b     MOVWF     0xb,0x0                                                                                         
001564   6a0c     CLRF      0xc,0x0                                                                                         
001566   cfee     MOVFF     0xfee,0x6                                                                                       
001568   f006                                                                                                               
00156a   cfed     MOVFF     0xfed,0x7                                                                                       
00156c   f007                                                                                                               
00156e   ec3d     CALL      0x1a7a,0x0                                                                                      
001570   f00d                                                                                                               
001572   c006     MOVFF     0x6,0xfee                                                                                       
001574   ffee                                                                                                               
001576   c007     MOVFF     0x7,0xfed                                                                                       
001578   ffed                                                                                                               
                                               }//end for                                                                   F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                               /* Turn leading zeros into spaces */                                         F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
001580   0e30     MOVLW     0x30               if(tempString[1] == '0')                                                     F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
001582   0100     MOVLB     0x0                                                                                             
001584   5da6     SUBWF     0xa6,0x0,0x1                                                                                    
001586   e107     BNZ       0x1596                                                                                          
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
001588   0e20     MOVLW     0x20                   tempString[1] = ' ';                                                     F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
00158a   6fa6     MOVWF     0xa6,0x1                                                                                        
00158c   0e30     MOVLW     0x30                   if(tempString[2] == '0')                                                 F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
00158e   5da7     SUBWF     0xa7,0x0,0x1                                                                                    
001590   e102     BNZ       0x1596                                                                                          
001592   0e20     MOVLW     0x20                       tempString[2] = ' ';                                                 F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
001594   6fa7     MOVWF     0xa7,0x1                                                                                        
                                               }//end if                                                                    F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                               /* Adjust decimal digit */                                                   F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
001596   c0a9     MOVFF     0xa9,0xaa          tempString[5] = tempString[4];                                               F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
001598   f0aa                                                                                                               
00159a   0e2e     MOVLW     0x2e               tempString[4]='.';                                                           F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
00159c   6fa9     MOVWF     0xa9,0x1                                                                                        
00159e   0ef8     MOVLW     0xf8               tempString[6]=0xF8;     // Degree symbol                                     F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
0015a0   6fab     MOVWF     0xab,0x1                                                                                        
0015a2   0e43     MOVLW     0x43               tempString[7]='C';                                                           F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
0015a4   6fac     MOVWF     0xac,0x1                                                                                        
0015a6   0e0d     MOVLW     0xd                tempString[8]='\r';                                                          F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
0015a8   6fad     MOVWF     0xad,0x1                                                                                        
0015aa   6bae     CLRF      0xae,0x1           tempString[9]=0x00;     // Null-Terminated                                   F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
0015ac   0e03     MOVLW     0x3            }//end UpdateCelsiusASCII                                                        F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
0015ae   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
0015b0   e202     BC        0x15b6                                                                                          
0015b2   6ae1     CLRF      0xe1,0x0                                                                                        
0015b4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0015b6   6ee1     MOVWF     0xe1,0x0                                                                                        
0015b8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0015ba   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0015bc   ffd9                                                                                                               
0015be   0012     RETURN    0x0                                                                                             
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           /** EOF temperature.c ********************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\user\temperature.c
                                           /*********************************************************************           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *             Microchip USB C18 Firmware -  Generic                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *********************************************************************           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * FileName:        usbgen.c                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Dependencies:    See INCLUDES section below                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Processor:       PIC18                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Compiler:        C18 2.30.01+                                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Company:         Microchip Technology, Inc.                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Software License Agreement                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * The software supplied herewith by Microchip Technology Incorporated           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * supplied to you, the Company’s customer, for use solely and                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * software is owned by the Company and/or its supplier, and is                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * protected under applicable copyright laws. All rights are reserved.           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Any use in violation of the foregoing restrictions may subject the            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * user to criminal sanctions under applicable laws, as well as to               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * civil liability for the breach of the terms and conditions of this            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * license.                                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Author               Date        Comment                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            ********************************************************************/           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           /** I N C L U D E S **********************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           #include <p18cxxx.h>                                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           #include "system\typedefs.h"                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           #include "system\usb\usb.h"                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           #ifdef USB_USE_GEN                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           /** V A R I A B L E S ********************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           #pragma udata                                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           byte usbgen_rx_len;                                                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           /** D E C L A R A T I O N S **************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           #pragma code                                                                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           /** U S E R  A P I ***********************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Function:        void USBGenInitEP(void)                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * PreCondition:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Input:           None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Overview:        USBGenInitEP initializes generic endpoints, buffer           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  descriptors, internal state-machine, and variables.          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  It should be called after the USB host has sent out a        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  SET_CONFIGURATION request.                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  See USBStdSetCfgHandler() in usb9.c for examples.            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           void USBGenInitEP(void)                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
001738   0100     MOVLB     0x0                usbgen_rx_len = 0;                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
00173a   6bc9     CLRF      0xc9,0x1                                                                                        
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
00173c   0e1e     MOVLW     0x1e               USBGEN_UEP = EP_OUT_IN|HSHK_EN;             // Enable 2 data pipes           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
00173e   6e71     MOVWF     0x71,0x0                                                                                        
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                               /*                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                * Do not have to init Cnt of IN pipes here.                                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                * Reason:  Number of bytes to send to the host                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                *          varies from one transaction to                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                *          another. Cnt should equal the exact                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                *          number of bytes to transmit for                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                *          a given IN transaction.                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                *          This number of bytes will only                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                *          be known right before the data is                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                *          sent.                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                */                                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
001740   0104     MOVLB     0x4                USBGEN_BD_OUT.Cnt = sizeof(usbgen_out);     // Set buffer size               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
001742   0e40     MOVLW     0x40                                                                                            
001744   6f09     MOVWF     0x9,0x1                                                                                         
001746   0e28     MOVLW     0x28               USBGEN_BD_OUT.ADR = (byte*)&usbgen_out;     // Set buffer address            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
001748   6f0a     MOVWF     0xa,0x1                                                                                         
00174a   0e04     MOVLW     0x4                                                                                             
00174c   6f0b     MOVWF     0xb,0x1                                                                                         
00174e   0e88     MOVLW     0x88               USBGEN_BD_OUT.Stat._byte = _USIE|_DAT0|_DTSEN;// Set status                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
001750   6f08     MOVWF     0x8,0x1                                                                                         
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
001752   0104     MOVLB     0x4                USBGEN_BD_IN.ADR = (byte*)&usbgen_in;      // Set buffer address             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
001754   0e68     MOVLW     0x68                                                                                            
001756   6f0e     MOVWF     0xe,0x1                                                                                         
001758   0e04     MOVLW     0x4                                                                                             
00175a   6f0f     MOVWF     0xf,0x1                                                                                         
00175c   0e40     MOVLW     0x40               USBGEN_BD_IN.Stat._byte = _UCPU|_DAT1;      // Set buffer status             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
00175e   6f0c     MOVWF     0xc,0x1                                                                                         
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
001760   0012     RETURN    0x0            }//end USBGenInitEP                                                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Function:        void USBGenWrite(byte *buffer, byte len)                     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * PreCondition:    mUSBGenTxIsBusy() must return false.                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  Value of 'len' must be equal to or smaller than              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  USBGEN_EP_SIZE                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  For an interrupt/bulk endpoint, the largest buffer size is   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  64 bytes.                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Input:           buffer  : Pointer to the starting location of data bytes     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  len     : Number of bytes to be transferred                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Output:          None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Side Effects:    None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Overview:        Use this macro to transfer data located in data memory.      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  Remember: mUSBGenTxIsBusy() must return false before user    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  can call this function.                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  Unexpected behavior will occur if this function is called    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  when mUSBGenTxIsBusy() != 0                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  Typical Usage:                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  if(!mUSBGenTxIsBusy())                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                      USBGenWrite(buffer, 3);                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Note:            None                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
001762   cfd9     MOVFF     0xfd9,0xfe6    void USBGenWrite(byte *buffer, byte len)                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
001764   ffe6                                                                                                               
001766   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001768   ffd9                                                                                                               
00176a   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           	byte i;                                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           	                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                               /*                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                * Value of len should be equal to or smaller than USBGEN_EP_SIZE.           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                * This check forces the value of len to meet the precondition.              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                */                                                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
00176c   0efc     MOVLW     0xfc           	if(len > USBGEN_EP_SIZE)                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
00176e   50db     MOVF      0xdb,0x0,0x0                                                                                    
001770   0840     SUBLW     0x40                                                                                            
001772   e205     BC        0x177e                                                                                          
001774   0e40     MOVLW     0x40           	    len = USBGEN_EP_SIZE;                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
001776   6ef3     MOVWF     0xf3,0x0                                                                                        
001778   0efc     MOVLW     0xfc                                                                                            
00177a   cff3     MOVFF     0xff3,0xfdb                                                                                     
00177c   ffdb                                                                                                               
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                              /*                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                               * Copy data from user's buffer to dual-ram buffer                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                               */                                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
00177e   6adf     CLRF      0xdf,0x0           for (i = 0; i < len; i++)                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
001780   0efc     MOVLW     0xfc                                                                                            
001782   50db     MOVF      0xdb,0x0,0x0                                                                                    
001784   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
001786   e219     BC        0x17ba                                                                                          
0017b6   2adf     INCF      0xdf,0x1,0x0                                                                                    
0017b8   d7e3     BRA       0x1780                                                                                          
001788   50df     MOVF      0xdf,0x0,0x0       	usbgen_in[i] = buffer[i];                                                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
00178a   6ee7     MOVWF     0xe7,0x0                                                                                        
00178c   0efd     MOVLW     0xfd                                                                                            
00178e   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
001790   ffe9                                                                                                               
001792   0efe     MOVLW     0xfe                                                                                            
001794   cfdb     MOVFF     0xfdb,0xfea                                                                                     
001796   ffea                                                                                                               
001798   50e7     MOVF      0xe7,0x0,0x0                                                                                    
00179a   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00179c   0e00     MOVLW     0x0                                                                                             
00179e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0017a0   50ef     MOVF      0xef,0x0,0x0                                                                                    
0017a2   6ee6     MOVWF     0xe6,0x0                                                                                        
0017a4   50df     MOVF      0xdf,0x0,0x0                                                                                    
0017a6   6aea     CLRF      0xea,0x0                                                                                        
0017a8   0f68     ADDLW     0x68                                                                                            
0017aa   6ee9     MOVWF     0xe9,0x0                                                                                        
0017ac   0e04     MOVLW     0x4                                                                                             
0017ae   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0017b0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0017b2   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0017b4   6eef     MOVWF     0xef,0x0                                                                                        
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
0017ba   0efc     MOVLW     0xfc               USBGEN_BD_IN.Cnt = len;                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
0017bc   cfdb     MOVFF     0xfdb,0x40d                                                                                     
0017be   f40d                                                                                                               
0017c0   0e40     MOVLW     0x40               mUSBBufferReady(USBGEN_BD_IN);                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
0017c2   0104     MOVLB     0x4                                                                                             
0017c4   170c     ANDWF     0xc,0x1,0x1                                                                                     
0017c6   7d0c     BTG       0xc,0x6,0x1                                                                                     
0017c8   0e88     MOVLW     0x88                                                                                            
0017ca   130c     IORWF     0xc,0x1,0x1                                                                                     
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
0017cc   52e5     MOVF      0xe5,0x1,0x0   }//end USBGenWrite                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
0017ce   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0017d0   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0017d2   ffd9                                                                                                               
0017d4   0012     RETURN    0x0                                                                                             
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           /******************************************************************************  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Function:        byte USBGenRead(byte *buffer, byte len)                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * PreCondition:    Value of input argument 'len' should be smaller than the     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  maximum endpoint size responsible for receiving report       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  data from USB host for HID class.                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  Input argument 'buffer' should point to a buffer area that   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  is bigger or equal to the size specified by 'len'.           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Input:           buffer  : Pointer to where received bytes are to be stored   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  len     : The number of bytes expected.                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Output:          The number of bytes copied to buffer.                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Side Effects:    Publicly accessible variable usbgen_rx_len is updated        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  with the number of bytes copied to buffer.                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  Once USBGenRead is called, subsequent retrieval of           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  usbgen_rx_len can be done by calling macro                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  mUSBGenGetRxLength().                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Overview:        USBGenRead copies a string of bytes received through         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  the OUT endpoint to a user's specified location.             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  It is a non-blocking function. It does not wait              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  for data if there is no data available. Instead it returns   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  '0' to notify the caller that there is no data available.    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                                                                               F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            * Note:            If the actual number of bytes received is larger than the    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  number of bytes expected (len), only the expected number     F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  of bytes specified will be copied to buffer.                 F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  If the actual number of bytes received is smaller than the   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  number of bytes expected (len), only the actual number       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *                  of bytes received will be copied to buffer.                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                            *****************************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
0017d6   cfd9     MOVFF     0xfd9,0xfe6    byte USBGenRead(byte *buffer, byte len)                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
0017d8   ffe6                                                                                                               
0017da   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0017dc   ffd9                                                                                                               
                                           {                                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
0017de   0100     MOVLB     0x0                usbgen_rx_len = 0;                                                           F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
0017e0   6bc9     CLRF      0xc9,0x1                                                                                        
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
0017e2   0104     MOVLB     0x4                if(!mUSBGenRxIsBusy())                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
0017e4   bf08     BTFSC     0x8,0x7,0x1                                                                                     
0017e6   d030     BRA       0x1848                                                                                          
                                               {                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                   /*                                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                    * Adjust the expected number of bytes to equal                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                    * the actual number of bytes received.                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                    */                                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
0017e8   0efc     MOVLW     0xfc                   if(len > USBGEN_BD_OUT.Cnt)                                              F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
0017ea   cfdb     MOVFF     0xfdb,0x10                                                                                      
0017ec   f010                                                                                                               
0017ee   5109     MOVF      0x9,0x0,0x1                                                                                     
0017f0   80d8     BSF       0xd8,0x0,0x0                                                                                    
0017f2   5410     SUBFWB    0x10,0x0,0x0                                                                                    
0017f4   e203     BC        0x17fc                                                                                          
0017f6   0efc     MOVLW     0xfc                       len = USBGEN_BD_OUT.Cnt;                                             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
0017f8   c409     MOVFF     0x409,0xfdb                                                                                     
0017fa   ffdb                                                                                                               
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                   /*                                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                    * Copy data from dual-ram buffer to user's buffer                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                    */                                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
0017fc   0100     MOVLB     0x0                    for(usbgen_rx_len = 0; usbgen_rx_len < len; usbgen_rx_len++)             F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
0017fe   6bc9     CLRF      0xc9,0x1                                                                                        
001800   0efc     MOVLW     0xfc                                                                                            
001802   50db     MOVF      0xdb,0x0,0x0                                                                                    
001804   5dc9     SUBWF     0xc9,0x0,0x1                                                                                    
001806   e219     BC        0x183a                                                                                          
001836   2bc9     INCF      0xc9,0x1,0x1                                                                                    
001838   d7e3     BRA       0x1800                                                                                          
001808   51c9     MOVF      0xc9,0x0,0x1               buffer[usbgen_rx_len] = usbgen_out[usbgen_rx_len];                   F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
00180a   6aea     CLRF      0xea,0x0                                                                                        
00180c   0f28     ADDLW     0x28                                                                                            
00180e   6ee9     MOVWF     0xe9,0x0                                                                                        
001810   0e04     MOVLW     0x4                                                                                             
001812   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001814   50ef     MOVF      0xef,0x0,0x0                                                                                    
001816   6ee6     MOVWF     0xe6,0x0                                                                                        
001818   51c9     MOVF      0xc9,0x0,0x1                                                                                    
00181a   6ee7     MOVWF     0xe7,0x0                                                                                        
00181c   0efd     MOVLW     0xfd                                                                                            
00181e   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
001820   ffe9                                                                                                               
001822   0efe     MOVLW     0xfe                                                                                            
001824   cfdb     MOVFF     0xfdb,0xfea                                                                                     
001826   ffea                                                                                                               
001828   50e7     MOVF      0xe7,0x0,0x0                                                                                    
00182a   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00182c   0e00     MOVLW     0x0                                                                                             
00182e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001830   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001832   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001834   6eef     MOVWF     0xef,0x0                                                                                        
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                   /*                                                                       F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                    * Prepare dual-ram buffer for next OUT transaction                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                    */                                                                      F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
00183a   0104     MOVLB     0x4                    USBGEN_BD_OUT.Cnt = sizeof(usbgen_out);                                  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
00183c   0e40     MOVLW     0x40                                                                                            
00183e   6f09     MOVWF     0x9,0x1                                                                                         
001840   1708     ANDWF     0x8,0x1,0x1            mUSBBufferReady(USBGEN_BD_OUT);                                          F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
001842   7d08     BTG       0x8,0x6,0x1                                                                                     
001844   0e88     MOVLW     0x88                                                                                            
001846   1308     IORWF     0x8,0x1,0x1                                                                                     
                                               }//end if                                                                    F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
001848   0100     MOVLB     0x0                return usbgen_rx_len;                                                        F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
00184a   51c9     MOVF      0xc9,0x0,0x1                                                                                    
00184c   d000     BRA       0x184e                                                                                          
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
00184e   52e5     MOVF      0xe5,0x1,0x0   }//end USBGenRead                                                                F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
001850   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001852   ffd9                                                                                                               
001854   0012     RETURN    0x0                                                                                             
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           #endif //def USB_USE_GEN                                                         F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                                                                                            F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                           /** EOF usbgen.c *************************************************************/  F:\ecom\EC_Mouse_Week_6\PIC\system\usb\class\generic\usbgen.c
                                                   LIST P=18F4550                                                           C:\MCC18\src\traditional\proc\p18F4550.asm
                                                   LIST                                                                     C:\MCC18\src\traditional\proc\p18F4550.asm
                                                   END                                                                      C:\MCC18\src\traditional\proc\p18F4550.asm
                                           /*** Unsigned Integer Division: 16-bit by 16-bit                                 C:\MCC18\src\traditional\math\fxd1616u.c
                                            ***                                                                             C:\MCC18\src\traditional\math\fxd1616u.c
                                            *** Optimized: Dec. 21, 2000                                                    C:\MCC18\src\traditional\math\fxd1616u.c
                                            ***        by: Daniel R. Madill, Quanser Consulting Inc.                        C:\MCC18\src\traditional\math\fxd1616u.c
                                            ***       for: Saved (for the worst case) at least 5*16 = 80 instruction cycles C:\MCC18\src\traditional\math\fxd1616u.c
                                            ***            over the code supplied with MCC18 v1.00.12                       C:\MCC18\src\traditional\math\fxd1616u.c
                                            ***/                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                           void FXD1616U (/*unsigned arg0, unsigned arg1*/)                                 C:\MCC18\src\traditional\math\fxd1616u.c
                                           {                                                                                C:\MCC18\src\traditional\math\fxd1616u.c
                                             // use INDF1 for the counter...                                                C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                                 _asm                                                                       C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                               // REM = 0                                                                   C:\MCC18\src\traditional\math\fxd1616u.c
001a7a   6a03     CLRF      0x3,0x0            clrf __REMB0, 0                                                              C:\MCC18\src\traditional\math\fxd1616u.c
001a7c   6a02     CLRF      0x2,0x0            clrf __REMB1, 0                                                              C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                               // INDF1 = 16                                                                C:\MCC18\src\traditional\math\fxd1616u.c
001a7e   0e10     MOVLW     0x10               movlw 16                                                                     C:\MCC18\src\traditional\math\fxd1616u.c
001a80   6ee7     MOVWF     0xe7,0x0           movwf INDF1, 0                                                               C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                               // Clear the carry                                                           C:\MCC18\src\traditional\math\fxd1616u.c
001a82   90d8     BCF       0xd8,0x0,0x0   	bcf STATUS, 0, 0                                                                C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                           loop:                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                           	//AARG16 <<= 1; Carry is always clear at this point.                            C:\MCC18\src\traditional\math\fxd1616u.c
001a84   3606     RLCF      0x6,0x1,0x0    	rlcf __AARGB1, 1, 0                                                             C:\MCC18\src\traditional\math\fxd1616u.c
001a86   3607     RLCF      0x7,0x1,0x0    	rlcf __AARGB0, 1, 0                                                             C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                           	//PROD = (PROD << 1) | (AARG16 >> 16)                                           C:\MCC18\src\traditional\math\fxd1616u.c
001a88   3602     RLCF      0x2,0x1,0x0    	rlcf __REMB1, 1, 0                                                              C:\MCC18\src\traditional\math\fxd1616u.c
001a8a   3603     RLCF      0x3,0x1,0x0    	rlcf __REMB0, 1, 0                                                              C:\MCC18\src\traditional\math\fxd1616u.c
                                           	                                                                                C:\MCC18\src\traditional\math\fxd1616u.c
                                           	//if (PROD >= BARG16)                                                           C:\MCC18\src\traditional\math\fxd1616u.c
001a8c   500b     MOVF      0xb,0x0,0x0    	movf __BARGB1, 0, 0                                                             C:\MCC18\src\traditional\math\fxd1616u.c
001a8e   5c02     SUBWF     0x2,0x0,0x0    	subwf __REMB1, 0, 0                                                             C:\MCC18\src\traditional\math\fxd1616u.c
001a90   500c     MOVF      0xc,0x0,0x0    	movf __BARGB0, 0, 0                                                             C:\MCC18\src\traditional\math\fxd1616u.c
001a92   5803     SUBWFB    0x3,0x0,0x0    	subwfb __REMB0, 0, 0                                                            C:\MCC18\src\traditional\math\fxd1616u.c
001a94   e305     BNC       0x1aa0         	bnc endloop                                                                     C:\MCC18\src\traditional\math\fxd1616u.c
                                               //{                                                                          C:\MCC18\src\traditional\math\fxd1616u.c
                                           	    //PROD -= BARG16;                                                           C:\MCC18\src\traditional\math\fxd1616u.c
001a96   500b     MOVF      0xb,0x0,0x0    	    movf __BARGB1, 0, 0                                                         C:\MCC18\src\traditional\math\fxd1616u.c
001a98   5e02     SUBWF     0x2,0x1,0x0    	    subwf __REMB1, 1, 0                                                         C:\MCC18\src\traditional\math\fxd1616u.c
001a9a   500c     MOVF      0xc,0x0,0x0    	    movf __BARGB0, 0, 0                                                         C:\MCC18\src\traditional\math\fxd1616u.c
001a9c   5a03     SUBWFB    0x3,0x1,0x0    	    subwfb __REMB0, 1, 0                                                        C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                           	    //++AARG16; Since AARG16 was shift to the left above, the increment will    C:\MCC18\src\traditional\math\fxd1616u.c
                                                   //          simply set the LSbit. Using incf also clears the carry, which C:\MCC18\src\traditional\math\fxd1616u.c
                                                   //          means we don't have to clear the carry at the top of the loop. C:\MCC18\src\traditional\math\fxd1616u.c
001a9e   2a06     INCF      0x6,0x1,0x0            incf __AARGB1, 1, 0                                                      C:\MCC18\src\traditional\math\fxd1616u.c
                                               //}                                                                          C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                           endloop:                                                                         C:\MCC18\src\traditional\math\fxd1616u.c
001aa0   2ee7     DECFSZ    0xe7,0x1,0x0       decfsz INDF1, 1, 0    // does not affect the carry bit                       C:\MCC18\src\traditional\math\fxd1616u.c
001aa2   d7f0     BRA       0x1a84             bra loop                                                                     C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                             _endasm                                                                        C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                             /* result in AARG already... */                                                C:\MCC18\src\traditional\math\fxd1616u.c
001aa4   0012     RETURN    0x0            }                                                                                C:\MCC18\src\traditional\math\fxd1616u.c
                                           #include <p18cxxx.h>                                                             C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           #include <spi.h>                                                                 C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           /********************************************************************            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           *   Function Name:  OpenSPI                                         *            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           *   Return Value:   void                                            *            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           *   Parameters:     SSP peripheral setup bytes                      *            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           *   Description:    This function sets up the SSP module on a       *            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           *                   PIC18Cxxx device for use with a Microchip SPI   *            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           *                   EEPROM device or SPI bus device.                *            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           ********************************************************************/            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           #if defined (SPI_V1)                                                             C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
001a16   cfd9     MOVFF     0xfd9,0xfe6    void OpenSPI( unsigned char sync_mode, unsigned char bus_mode, unsigned char smp_phase) C:\MCC18\src\pmc_common\SPI\spi_open.c
001a18   ffe6                                                                                                               
001a1a   cfda     MOVFF     0xfda,0xfe6                                                                                     
001a1c   ffe6                                                                                                               
001a1e   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001a20   ffd9                                                                                                               
001a22   cfe2     MOVFF     0xfe2,0xfda                                                                                     
001a24   ffda                                                                                                               
                                           {                                                                                C:\MCC18\src\pmc_common\SPI\spi_open.c
001a26   0e3f     MOVLW     0x3f             SSPSTAT &= 0x3F;                // power on state                              C:\MCC18\src\pmc_common\SPI\spi_open.c
001a28   16c7     ANDWF     0xc7,0x1,0x0                                                                                    
001a2a   6ac6     CLRF      0xc6,0x0         SSPCON1 = 0x00;                 // power on state                              C:\MCC18\src\pmc_common\SPI\spi_open.c
001a2c   0efd     MOVLW     0xfd             SSPCON1 |= sync_mode;           // select serial mode                          C:\MCC18\src\pmc_common\SPI\spi_open.c
001a2e   50db     MOVF      0xdb,0x0,0x0                                                                                    
001a30   12c6     IORWF     0xc6,0x1,0x0                                                                                    
001a32   0efb     MOVLW     0xfb             SSPSTAT |= smp_phase;           // select data input sample phase              C:\MCC18\src\pmc_common\SPI\spi_open.c
001a34   50db     MOVF      0xdb,0x0,0x0                                                                                    
001a36   12c7     IORWF     0xc7,0x1,0x0                                                                                    
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
001a38   0efc     MOVLW     0xfc             switch( bus_mode )                                                             C:\MCC18\src\pmc_common\SPI\spi_open.c
001a3a   50db     MOVF      0xdb,0x0,0x0                                                                                    
001a3c   0a03     XORLW     0x3                                                                                             
001a3e   e009     BZ        0x1a52                                                                                          
001a40   0a01     XORLW     0x1                                                                                             
001a42   e004     BZ        0x1a4c                                                                                          
001a44   0a02     XORLW     0x2                                                                                             
001a46   e106     BNZ       0x1a54                                                                                          
                                             {                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 0:                       // SPI bus mode 0,0                            C:\MCC18\src\pmc_common\SPI\spi_open.c
001a48   8cc7     BSF       0xc7,0x6,0x0         SSPSTATbits.CKE = 1;        // data transmitted on falling edge            C:\MCC18\src\pmc_common\SPI\spi_open.c
001a4a   d004     BRA       0x1a54               break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 2:                       // SPI bus mode 1,0                            C:\MCC18\src\pmc_common\SPI\spi_open.c
001a4c   8cc7     BSF       0xc7,0x6,0x0         SSPSTATbits.CKE = 1;        // data transmitted on rising edge             C:\MCC18\src\pmc_common\SPI\spi_open.c
001a4e   88c6     BSF       0xc6,0x4,0x0         SSPCON1bits.CKP = 1;        // clock idle state high                       C:\MCC18\src\pmc_common\SPI\spi_open.c
001a50   d001     BRA       0x1a54               break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 3:                       // SPI bus mode 1,1                            C:\MCC18\src\pmc_common\SPI\spi_open.c
001a52   88c6     BSF       0xc6,0x4,0x0         SSPCON1bits.CKP = 1;        // clock idle state high                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               default:                      // default SPI bus mode 0,1                    C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             }                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
001a54   0efd     MOVLW     0xfd             switch( sync_mode )                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
001a56   50db     MOVF      0xdb,0x0,0x0                                                                                    
001a58   0a05     XORLW     0x5                                                                                             
001a5a   e003     BZ        0x1a62                                                                                          
001a5c   0a01     XORLW     0x1                                                                                             
001a5e   e103     BNZ       0x1a66                                                                                          
                                             {                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 4:                       // slave mode w /SS enable                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#if defined SPI_IO_V1                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC3 = 1;       // define clock pin as input	                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 	TRISAbits.TRISA5 = 1;       // define /SS1 pin as input                   C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V2 || defined SPI_IO_V4                                 C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISFbits.TRISF7 = 1;       // define /SS pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC3 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V3                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
001a60   8a92     BSF       0x92,0x5,0x0   		TRISAbits.TRISA5 = 1;       // define /SS pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISBbits.TRISB1 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V5	                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC6 = 1;       // define /SS pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V6                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC3 = 1;       // define clock pin as input	                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 	TRISAbits.TRISA5 = 1;       // define /SS1 pin as input                   C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               	ANSEL &= 0b11101111;                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		break;                                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           case 5:                       // slave mode w/o /SS enable                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#if defined (SPI_IO_V1) || defined (SPI_IO_V6) || defined (SPI_IO_V2) || defined (SPI_IO_V4) C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC3 = 1;       // define clock pin as input	                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V3                                                      C:\MCC18\src\pmc_common\SPI\spi_open.c
001a62   8293     BSF       0x93,0x1,0x0   	 	TRISBbits.TRISB1 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V5	                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
001a64   d001     BRA       0x1a68         		break;                                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	default:                      // master mode, define clock pin as output        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #if defined (SPI_IO_V1) || defined (SPI_IO_V6) || defined (SPI_IO_V2) || defined (SPI_IO_V4) C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC3 = 0;       // define clock pin as input	                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V3                                                      C:\MCC18\src\pmc_common\SPI\spi_open.c
001a66   9293     BCF       0x93,0x1,0x0   	 	TRISBbits.TRISB1 = 0;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V5	                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 0;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	                                                                                C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 break;                                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             }                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#if defined SPI_IO_V3                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
001a68   8093     BSF       0x93,0x0,0x0   	 	TRISBbits.TRISB0 = 1;       // define SDI pin as input	                       C:\MCC18\src\pmc_common\SPI\spi_open.c
001a6a   9e94     BCF       0x94,0x7,0x0         	TRISCbits.TRISC7 = 0;       // define SDO pin as output                   C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V5                                                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC4 = 1;       // define SDI pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC7 = 0;       // define SDO pin as output                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#else                                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC4 = 1;       // define SDI pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 0;       // define SDO pin as output                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
001a6c   8ac6     BSF       0xc6,0x5,0x0   	SSPCON1 |= SSPENB;              // enable synchronous serial port               C:\MCC18\src\pmc_common\SPI\spi_open.c
001a6e   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\MCC18\src\pmc_common\SPI\spi_open.c
001a70   cfe5     MOVFF     0xfe5,0xfda                                                                                     
001a72   ffda                                                                                                               
001a74   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001a76   ffd9                                                                                                               
001a78   0012     RETURN    0x0                                                                                             
                                           #endif                                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           #if defined (SPI_V4)                                                             C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           void OpenSPI( unsigned char sync_mode, unsigned char bus_mode, unsigned char smp_phase) C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           {                                                                                C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             SSPSTAT &= 0x3F;                // power on state                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             SSPCON = 0x00;                 // power on state                               C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             SSPCON |= sync_mode;           // select serial mode                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             SSPSTAT |= smp_phase;           // select data input sample phase              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             switch( bus_mode )                                                             C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             {                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 0:                       // SPI bus mode 0,0                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 SSPSTATbits.CKE = 1;        // data transmitted on falling edge            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 2:                       // SPI bus mode 1,0                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 SSPSTATbits.CKE = 1;        // data transmitted on rising edge             C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 SSPCONbits.CKP = 1;        // clock idle state high                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 3:                       // SPI bus mode 1,1                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 SSPCONbits.CKP = 1;        // clock idle state high                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               default:                      // default SPI bus mode 0,1                    C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             }                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             switch( sync_mode )                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             {                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 4:                       // slave mode w /SS enable                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#if defined SPI_IO_V1                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC3 = 1;       // define clock pin as input	                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 	TRISAbits.TRISA5 = 1;       // define /SS1 pin as input                   C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V2 || defined SPI_IO_V4                                 C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISFbits.TRISF7 = 1;       // define /SS pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC3 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V3                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISAbits.TRISA5 = 1;       // define /SS pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISBbits.TRISB1 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V5	                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC6 = 1;       // define /SS pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V6                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC3 = 1;       // define clock pin as input	                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 	TRISAbits.TRISA5 = 1;       // define /SS1 pin as input                   C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               	ANSEL &= 0b11101111;                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		break;                                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           case 5:                       // slave mode w/o /SS enable                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#if defined (SPI_IO_V1) || defined (SPI_IO_V6) || defined (SPI_IO_V2) || defined (SPI_IO_V4) C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC3 = 1;       // define clock pin as input	                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V3                                                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISBbits.TRISB1 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V5	                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		break;                                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	default:                      // master mode, define clock pin as output        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #if defined (SPI_IO_V1) || defined (SPI_IO_V6) || defined (SPI_IO_V2) || defined (SPI_IO_V4) C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC3 = 0;       // define clock pin as input	                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V3                                                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISBbits.TRISB1 = 0;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V5	                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 0;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	                                                                                C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 break;                                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             }                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#if defined SPI_IO_V3                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISBbits.TRISB0 = 1;       // define SDI pin as input	                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 	TRISCbits.TRISC7 = 0;       // define SDO pin as output                   C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V5                                                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC4 = 1;       // define SDI pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC7 = 0;       // define SDO pin as output                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#else                                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC4 = 1;       // define SDI pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 0;       // define SDO pin as output                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	SSPCON |= SSPENB;              // enable synchronous serial port                C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           }                                                                                C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           #endif                                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           #include <p18cxxx.h>                                                             C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           #include <spi.h>                                                                 C:\MCC18\src\pmc_common\SPI\spi_read.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           /********************************************************************            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           *     Function Name:    ReadSPI                                     *            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           *     Return Value:     contents of SSPBUF register                 *            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           *     Parameters:       void                                        *            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           *     Description:      Read single byte from SPI bus.              *            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           ********************************************************************/            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           #if defined (SPI_V1) || defined (SPI_V4)                                         C:\MCC18\src\pmc_common\SPI\spi_read.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           unsigned char ReadSPI( void )                                                    C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           {                                                                                C:\MCC18\src\pmc_common\SPI\spi_read.c
001ad0   6ac9     CLRF      0xc9,0x0         SSPBUF = 0x00;                  // initiate bus cycle                          C:\MCC18\src\pmc_common\SPI\spi_read.c
001ad2   a0c7     BTFSS     0xc7,0x0,0x0     while ( !SSPSTATbits.BF );      // wait until cycle complete                   C:\MCC18\src\pmc_common\SPI\spi_read.c
001ad4   d7fe     BRA       0x1ad2                                                                                          
001ad6   50c9     MOVF      0xc9,0x0,0x0     return ( SSPBUF );              // return with byte read                       C:\MCC18\src\pmc_common\SPI\spi_read.c
001ad8   0012     RETURN    0x0            }                                                                                C:\MCC18\src\pmc_common\SPI\spi_read.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           #endif                                                                           C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           ;	RCS Header $Id: aarg.asm,v 1.3 2006/01/12 23:16:38 rhinec Exp $                C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                           ;******************************************************************************* C:\MCC18\src\traditional\math\aarg.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\src\traditional\math\aarg.asm
                                           ;******************************************************************************* C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                           __REMB3                                                                          C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB7		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __REMB2                                                                          C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB6		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __REMB1                                                                          C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB5		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __REMB0                                                                          C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB4		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB3		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB2		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB1		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB0		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                           __AEXP		RES 1       ; 8 bit biased exponent for argument A                       C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                           	GLOBAL	__AARGB0, __AARGB1, __AARGB2, __AARGB3                                   C:\MCC18\src\traditional\math\aarg.asm
                                                   GLOBAL  __AARGB4, __AARGB5, __AARGB6, __AARGB7                           C:\MCC18\src\traditional\math\aarg.asm
                                           	GLOBAL  __AEXP                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           	GLOBAL  __REMB3, __REMB2, __REMB1, __REMB0                                      C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                                   END                                                                      C:\MCC18\src\traditional\math\aarg.asm
                                           ;	RCS Header $Id: barg.asm,v 1.3 2006/01/12 23:16:38 rhinec Exp $                C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                           ;******************************************************************************* C:\MCC18\src\traditional\math\barg.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\src\traditional\math\barg.asm
                                           ;******************************************************************************* C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                           __BARGB3		RES 1                                                                  C:\MCC18\src\traditional\math\barg.asm
                                           __BARGB2		RES 1                                                                  C:\MCC18\src\traditional\math\barg.asm
                                           __BARGB1		RES 1                                                                  C:\MCC18\src\traditional\math\barg.asm
                                           __BARGB0		RES 1       ; most significant byte of argument B                      C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                           __BEXP		RES 1       ; 8 bit biased exponent for argument B                       C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                                   GLOBAL  __BARGB3, __BARGB2, __BARGB1, __BARGB0                           C:\MCC18\src\traditional\math\barg.asm
                                                   GLOBAL  __BEXP                                                           C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                                   END                                                                      C:\MCC18\src\traditional\math\barg.asm
                                           ;	RCS Header $Id: cmath18.asm,v 1.5 2006/01/12 23:16:38 rhinec Exp $             C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\math\cmath18.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\math\cmath18.asm
                                           ;******************************************************************************* C:\MCC18\src\traditional\math\cmath18.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\src\traditional\math\cmath18.asm
                                           ;******************************************************************************* C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\math\cmath18.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\math\cmath18.asm
                                           SIGN		RES 1       ; save location for sign in MSB                                C:\MCC18\src\traditional\math\cmath18.asm
                                           __FPFLAGSbits                                                                    C:\MCC18\src\traditional\math\cmath18.asm
                                           __FPFLAGS		RES 1       ; floating point library exception flags                  C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\math\cmath18.asm
                                                   GLOBAL  SIGN, __FPFLAGS, __FPFLAGSbits                                   C:\MCC18\src\traditional\math\cmath18.asm
                                           	                                                                                C:\MCC18\src\traditional\math\cmath18.asm
                                                   END                                                                      C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\stdclib\__init.c
                                           /** @name __init                                                                 C:\MCC18\src\traditional\stdclib\__init.c
                                            * The {\bf __init} is called if the linker can not find a                       C:\MCC18\src\traditional\stdclib\__init.c
                                            * user defined version for it                                                   C:\MCC18\src\traditional\stdclib\__init.c
                                            */                                                                              C:\MCC18\src\traditional\stdclib\__init.c
                                                                                                                            C:\MCC18\src\traditional\stdclib\__init.c
                                           void __init (void)                                                               C:\MCC18\src\traditional\stdclib\__init.c
                                           {                                                                                C:\MCC18\src\traditional\stdclib\__init.c
001ada   0012     RETURN    0x0            }                                                                                C:\MCC18\src\traditional\stdclib\__init.c
                                                                                                                            C:\MCC18\src\traditional\stdclib\__init.c
